/*!CK:3103805946!*//*1447758881,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["tW71q"]); }

__d("MStickersWebDriverIDs",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STICKER_BUTTON:"MStickersWebDriverIDsStickerButton",STICKER_SELECTOR_CONTENT:"MStickersWebDriverIDsStickerSelectorContent",STICKER_NONSEARCH_PACK_BUTTON:"MStickersWebDriverIDsStickerNonsearchPackButton",STICKER_PACK_ITEM:"MStickersWebDriverIDsStickerPackItem"};},null,{});
__d("PUWSteps",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CLIENT_FLOW_BEGIN:"client_flow_begin",CLIENT_SELECT_BEGIN:"client_select_begin",CLIENT_SELECT_SUCCESS:"client_select_success",CLIENT_SELECT_CANCEL:"client_select_cancel",CLIENT_SELECT_FAIL:"client_select_fail",CLIENT_FLOW_POST:"client_flow_post",CLIENT_TRANSFER_BATCH_BEGIN:"client_transfer_batch_begin",CLIENT_UPLOAD_BEGIN:"client_upload_begin",CLIENT_ATTACH_PHOTO:"client_attach_photo",CLIENT_PROCESS_BEGIN:"client_process_begin",CLIENT_PROCESS_SUCCESS:"client_process_success",CLIENT_PROCESS_CANCEL:"client_process_cancel",CLIENT_PROCESS_SKIP:"client_process_skip",CLIENT_PROCESS_FAIL:"client_process_fail",CLIENT_PROCESS_UNAVAILABLE:"client_process_unavailable",CLIENT_TRANSFER_ENQUEUE:"client_transfer_enqueue",CLIENT_TRANSFER_BEGIN:"client_transfer_begin",CLIENT_TRANSFER_SUCCESS:"client_transfer_success",CLIENT_TRANSFER_CANCEL:"client_transfer_cancel",CLIENT_TRANSFER_FAIL:"client_transfer_fail",CLIENT_TRANSFER_MANUAL_RETRY:"client_transfer_manual_retry",CLIENT_UPLOAD_SUCCESS:"client_upload_success",CLIENT_UPLOAD_FAIL:"client_upload_fail",CLIENT_UPLOAD_CANCEL:"client_upload_cancel",CLIENT_UPLOAD_REMOVE:"client_upload_remove",CLIENT_FACEREC_BEGIN:"client_facerec_begin",CLIENT_FACEREC_SUCCESS:"client_facerec_success",CLIENT_FACEREC_FAIL:"client_facerec_fail",CLIENT_PHOTO_PREVIEW_OPEN:"client_photo_preview_open",CLIENT_PHOTO_PREVIEW_CLOSE:"client_photo_preview_close",CLIENT_TRANSFER_BATCH_SUCCESS:"client_transfer_batch_success",CLIENT_TRANSFER_BATCH_CANCEL:"client_transfer_batch_cancel",CLIENT_TRANSFER_BATCH_FAIL:"client_transfer_batch_fail",CLIENT_PUBLISH_ENQUEUE:"client_publish_enqueue",CLIENT_PUBLISH_BEGIN:"client_publish_begin",CLIENT_PUBLISH_SUCCESS:"client_publish_success",CLIENT_PUBLISH_FAIL:"client_publish_fail",CLIENT_ATTEMPT_FAIL:"client_attempt_fail",CLIENT_FLOW_SUCCESS:"client_flow_success",CLIENT_FLOW_FATAL:"client_flow_fatal",CLIENT_FLOW_GIVEUP:"client_flow_giveup",CLIENT_FLOW_CANCEL:"client_flow_cancel",CLIENT_FLOW_FAIL:"client_flow_fail",CLIENT_FLOW_INCOMPLETE:"client_flow_incomplete",CLIENT_ATTEMPT_INCOMPLETE:"client_attempt_incomplete",CLIENT_FLOW_RETRY:"client_flow_retry",CLIENT_ATTEMPT_RETRY:"client_attempt_retry",CLIENT_DIAGNOSTIC:"client_diagnostic",CLIENT_QUALITY_SWITCH:"client_quality_switch",CLIENT_CANCEL_SURVEY:"client_cancel_survey",CLIENT_PHOTO_EDIT_BEGIN:"client_photo_edit_begin",CLIENT_PHOTO_EDIT_SUCCESS:"client_photo_edit_success",SERVER_UPLOAD_BEGIN:"server_upload_begin",SERVER_UPLOAD_SUCCESS:"server_upload_success",SERVER_UPLOAD_FAIL:"server_upload_fail",SERVER_PUBLISH_BEGIN:"server_publish_begin",SERVER_PUBLISH_SUCCESS:"server_publish_success",SERVER_PUBLISH_FAIL:"server_publish_fail",SERVER_RECEIVER_BEGIN:"server_receiver_begin",SERVER_RECEIVER_PUBLISH_BEGIN:"server_receiver_publish_begin",SERVER_SENTRY_RESTRICTION:"server_sentry_restriction"};},null,{});
__d("StickerInterfaces",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGES:"messages",COMMENTS:"comments",STICKERED:"stickered",COMPOSER:"composer",POSTS:"posts",FRAMES:"frames"};},null,{});
__d("URLMatcherConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9910\u5385|\u98de\u5229\u6d66|\u96c6\u56e2|\u8c37\u6b4c|\u7f51\u7edc|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u70b9\u770b|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u65f6\u5c1a|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5e7f\u4e1c|\u5de5\u884c|\u5a31\u4e50|\u5927\u62ff|\u5728\u7ebf|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09b0\u09a4|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0645\u0648\u0642\u0639|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u0627\u0632\u0627\u0631|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|zw|zuerich|zone|zm|zip|za|yt|youtube|yokohama|yoga|yodobashi|ye|yandex|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rhqv96g|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mgbx4cd0ab|xn--mgbpl2fh|xn--mgberp4a5d4ar|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbayh7gpa|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba3a4f16a|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c|xn--gecrj9c|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--estv75g|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--c2br7g|xn--c1avg|xn--b4w605ferd|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90a3ac|xn--80aswg|xn--80asehdb|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--55qx5d|xn--55qw42g|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--42c2d9a|xn--3pxu8k|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--1qqw23a|xn--11b4c3d|xin|xerox|xbox|wtf|wtc|ws|world|works|work|wme|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|wedding|wed|website|webcam|watch|wang|walter|wales|vu|voyage|voto|voting|vote|vodka|vn|vlaanderen|vistaprint|vista|vision|vin|villas|video|viajes|vi|vg|vet|versicherung|verm\u00f6gensberatung|verm\u00f6gensberater|ventures|vegas|ve|vc|vacations|va|uz|uy|us|uol|uno|university|uk|ug|ubs|ua|tz|tw|tv|tui|tt|trust|travel|training|trading|trade|tr|toys|toyota|town|tours|toshiba|toray|top|tools|tokyo|today|to|tn|tm|tl|tk|tj|tirol|tires|tips|tienda|tickets|theater|thd|th|tg|tf|tennis|temasek|telefonica|tel|technology|tech|team|td|tc|taxi|tax|tattoo|tatar|tatamotors|taipei|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|statoil|starhub|st|srl|sr|spreadbetting|spiegel|space|soy|sony|solutions|solar|sohu|software|social|soccer|so|sncf|sn|sm|sl|skype|sky|ski|sk|sj|site|singles|si|shriram|show|shoes|shiksha|sh|sg|sexy|sex|sew|services|sener|seek|seat|se|sd|scot|scor|science|schwarz|schule|school|scholarships|schmidt|scb|sca|sc|sb|saxo|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|sale|sakura|saarland|sa|ryukyu|rw|run|ruhr|ru|rsvp|rs|rodeo|rocks|ro|rip|rio|ricoh|rich|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redstone|red|recipes|realty|realtor|re|racing|quebec|qpon|qa|py|pw|pub|pt|ps|property|properties|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|play|place|pl|pk|pizza|pink|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pet|pe|party|parts|partners|paris|panerai|page|pa|ovh|otsuka|osaka|organic|org|orange|oracle|ooo|online|onl|ong|one|omega|om|okinawa|office|nz|nyc|nu|ntt|nrw|nra|nr|np|nokia|no|nl|nissan|ninja|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|netbank|net|nec|ne|nc|navy|name|nagoya|nadex|na|mz|my|mx|mw|mv|museum|mu|mtpc|mtn|mt|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moscow|mortgage|mormon|montblanc|money|monash|moe|moda|mobi|mo|mn|mma|mm|ml|mk|mini|mil|microsoft|miami|mh|mg|menu|men|memorial|meme|melbourne|meet|media|me|md|mc|mba|marriott|markets|marketing|market|mango|management|man|maison|maif|madrid|ma|ly|lv|luxury|luxe|lupin|lu|ltda|lt|ls|lr|love|lotto|lotte|london|lol|loans|loan|lk|lixil|live|link|limo|limited|lighting|life|lidl|liaison|li|lgbt|lexus|legal|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|lat|lasalle|land|lancaster|lacaixa|la|kz|kyoto|ky|kw|kred|krd|kr|kp|komatsu|koeln|kn|km|kiwi|kitchen|kim|ki|kh|kg|ke|kddi|kaufen|juegos|jprs|jp|joburg|jobs|jo|jm|jll|jlc|jewelry|jetzt|je|jcb|java|iwc|itau|it|istanbul|ist|is|irish|ir|iq|ipiranga|io|investments|international|int|insure|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|im|il|iinet|ifm|ie|id|icu|ice|icbc|ibm|hu|ht|hsbc|hr|how|house|hotmail|hoteles|hosting|host|horse|honda|homes|homedepot|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|help|healthcare|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gu|gt|gs|group|gripe|green|gratis|graphics|gr|gq|gp|gov|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|genting|gent|ge|gdn|gd|gbiz|gb|garden|game|gallery|gal|ga|fyi|futbol|furniture|fund|frogans|frl|fr|foundation|forum|forsale|forex|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|fk|fj|fitness|fit|fishing|fish|firmdale|financial|finance|film|fi|feedback|fashion|farm|fans|fan|family|faith|fail|fage|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|ec|eat|earth|dz|dvag|durban|drive|download|doosan|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delta|delivery|degree|deals|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|crs|crown|cricket|creditcard|credit|cr|courses|coupons|country|corsica|coop|cool|cooking|contractors|consulting|construction|condos|computer|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|club|cloud|clothing|clinic|click|cleaning|claims|cl|ck|city|citic|cisco|ci|church|chrome|christmas|chloe|cheap|chat|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbn|cba|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|capital|capetown|canon|cancerresearch|camp|camera|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|business|builders|build|budapest|bt|bs|brussels|brother|broker|bridgestone|bradesco|br|boutique|boots|boo|bond|boats|bo|bnpparibas|bnl|bn|bmw|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|best|berlin|bentley|beer|be|bd|bcn|bbva|bbc|bb|bayern|bauhaus|bargains|barclays|barclaycard|barcelona|bar|bank|band|ba|azure|az|axa|ax|aw|autos|auto|audio|auction|au|attorney|at|associates|asia|as|arpa|army|archi|ar|aquarelle|aq|app|apartments|ao|android|amsterdam|am|alsace|allfinanz|al|airtel|airforce|aig|ai|agency|ag|afl|af|aero|aeg|ae|adult|ads|ad|actor|active|accountants|accountant|accenture|academy|ac|abogado|abbott|abb))"};},null,{});
__d("MAdsUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j){return j===Object(j);}function i(j,k){var l=j;if(Array.isArray(j)){l=j.map(i);}else if(h(j)){l={};Object.keys(j).forEach(function(m){if(m!==k)l[m]=i(j[m],k);});}return l;}f.exports={clone:i,isObject:h};},null);
__d('CurrentLocale',['LocaleInitialData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={};i.get=function(){return h.locale;};f.exports=i;},null);
__d('uuid',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g,function(i){var j=Math.random()*16|0,k=i=='x'?j:j&3|8;return k.toString(16);});}f.exports=h;},null);
__d('MCommentStatusLogger',['BanzaiScuba','CurrentLocale','CurrentUser','UserAgentData','ex','uuid'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n='mtouch_comment_info',o={INIT:'init',SUBMIT:'submit',RESPOND:'respond',RENDER:'render'};function p(u,v,w){this.prevEventType=u||null;this.perfLoggable=!!v;this.isEndStep=!!w;}var q={};q[o.INIT]=new p();q[o.SUBMIT]=new p(o.INIT,true);q[o.RESPOND]=new p(o.SUBMIT,true);q[o.RENDER]=new p(o.RESPOND,true,true);function r(u){this.$InteractionLog1=u;this.$InteractionLog2={};this.$InteractionLog3=0;this.$InteractionLog4=0;this.$InteractionLog5=null;}r.prototype.$InteractionLog6=function(u){return u in this.$InteractionLog2;};r.prototype.logEvent=function(u,v){if(this.$InteractionLog6(u)||!(u in q))return false;var w=q[u],x=w.prevEventType;if(x&&!this.$InteractionLog6(x))return false;v=v||{};this.$InteractionLog3=v.hasOwnProperty('text')?v.text:this.$InteractionLog3;this.$InteractionLog4=v.hasOwnProperty('photo')?v.photo:this.$InteractionLog4;this.$InteractionLog5=v.hasOwnProperty('stickerID')?v.stickerID:this.$InteractionLog5;var y=this.$InteractionLog5?1:0,z=Date.now(),aa=Math.round(z/1000);this.$InteractionLog2[u]=z;var ba=new h(n);ba.addNormal('state',u);ba.addInteger('text',this.$InteractionLog3);ba.addInteger('photo',this.$InteractionLog4);ba.addInteger('sticker',y);ba.addNormal('browserName',k.browserName);ba.addNormal('browserVersion',k.browserVersion);ba.addNormal('deviceName',k.deviceName);ba.addNormal('stickerID',this.$InteractionLog5);ba.addNormal('uid',j.getID());ba.addNormal('interactionKey',this.$InteractionLog1);ba.addInteger('client_time',aa);ba.addNormal('locale',i.get());if(x&&w.perfLoggable){var ca=this.$InteractionLog7(x,u);ba.addInteger('duration',ca);}ba.post({retry:true});return true;};r.prototype.$InteractionLog7=function(u,v){var w=this.$InteractionLog2;if(!this.$InteractionLog6(u)||!this.$InteractionLog6(v))return null;var x=w[u],y=w[v];if(x>y)return null;return y-x;};var s={},t={newInteractionKey:function(){return m();},_logCommentStatus:function(u,v,w){if(!(v in q))return;var x=s[u];if(v===o.INIT)if(x){return;}else{x=new r(u);s[u]=x;}if(!x)return;var y=x.logEvent(v,w);if(y&&q[v].isEndStep)this.clear(u);},logInitText:function(u){this._logCommentStatus(u,o.INIT,{text:1});},logInitPhoto:function(u){this._logCommentStatus(u,o.INIT,{photo:1});},logSubmit:function(u,v){this._logCommentStatus(u,o.SUBMIT,{text:v.text,photo:v.photo,stickerID:null});},logReceiveResponse:function(u,v){this._logCommentStatus(u,o.RESPOND,{text:v.text,photo:v.photo,stickerID:v.stickerID});},logRender:function(u){this._logCommentStatus(u,o.RENDER);},logInitAndSubmitSticker:function(u,v){this._logCommentStatus(u,o.INIT,{text:0,photo:0,stickerID:v});this._logCommentStatus(u,o.SUBMIT,{text:0,photo:0,stickerID:v});},clear:function(u){if(u in s)delete s[u];}};f.exports=t;},null);
__d('MLoadingIndicator.react',['IndicatorType','MJSAnimator','MJSEnvironment','React','ReactDOM','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=j.IS_APPLE_WEBKIT_IOS,p=j.IS_ANDROID&&j.OS_VERSION<4,q=k.createClass({displayName:'MLoadingIndicator',propTypes:{background:n.oneOf(['light','dark']),size:n.oneOf(['small','large'])},componentDidMount:function(){if(p){this._animator=new i(l.findDOMNode(this.refs.spinner),h.ANDROID_NONROTATING,false);this._animator.start();}},componentWillUnmount:function(){if(this._animator){this._animator.cleanup();this._animator=null;}},getClassName:function(){return (this.props.className||'')+' '+((!p?"_55on":'')+(' '+"_2so")+(this.props.background==='dark'?' '+"_2st":'')+(this.props.background==='light'?' '+"_2ss":'')+(this.props.size==='large'?' '+"_2sq":'')+(this.props.size==='small'?' '+"_2sp":'')+(!p&&!o?' '+"_50cg":'')+(o?' '+"_50ch":'')+(p?' '+"_2su":''));},getDefaultProps:function(){return {background:'light',size:'large'};},render:function(){return (k.createElement('div',{ref:'spinner',className:this.getClassName()},this.renderGradientIfNeeded()));},renderGradientIfNeeded:function(){if(p||!o)return null;return (k.createElement('div',{className:"_2sr _55on"}));}});f.exports=q;},null);
__d('MProgressBar.react',['MAnimator','React','joinClasses','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MProgressBar',propTypes:{initialValue:l.number.isRequired,min:l.number,max:l.number},getDefaultProps:function(){return {min:0,max:100};},getInitialState:function(){return {value:this.props.initialValue};},_calculatePercentage:function(n){var o=this.props,p=Math.min(Math.max((n-o.min)/(o.max-o.min)*100,0),100);return p;},_getFillArea:function(){var n=this._calculatePercentage(this.state.value),o=Math.round(n),p="fill"+(o===0?' '+"empty":'')+(o===100?' '+"full":'');return (i.createElement('div',{className:p,style:{width:n+'%'}}));},animate:function(n,o){var p=this._calculatePercentage(this.state.value),q=this._calculatePercentage(n);h.play(p,q,o,this.setValue);},setValue:function(n){if(this.isMounted())this.setState({value:n});},render:function(){return (i.createElement('div',{className:j(this.props.className,"_lbu")},this._getFillArea()));}});f.exports=m;},null);
__d('escapeRegex',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return i.replace(/([.?*+\^$\[\]\\(){}|\-])/g,'\\$1');}f.exports=h;},null);
__d('Grid.react',['React','ReactChildren','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'Grid',propTypes:{cols:l.number.isRequired,fixed:l.bool,alignv:l.oneOf(['top','middle','bottom']),alignh:l.oneOf(['left','center','right']),spacing:l.string},render:function(){var o=this.props,p=o.alignh,q=o.alignv,r=o.children,s=o.cols,t=o.fixed,u=o.spacing,v=i.count(r),w=[],x=[],y=0;i.forEach(r,function(z,aa){if(z===null||z===undefined)return;var ba=z.type===n;y+=ba?Math.max(z.props.colSpan||0,1):1;var ca=y===s?"_51mw":'';if(!ba){z=h.createElement(n,{alignh:p,alignv:q,className:k(u,ca),key:z.key||aa},z);}else z=h.cloneElement(z,{key:z.key||aa,alignh:z.props.alignh||p,alignv:z.props.alignv||q,className:k(z.props.className,u,ca)});x.push(z);if(y%s===0||aa+1===v){if(t&&y<s){for(var da=y;da<s;da++)x.push(h.createElement(n,{key:aa+da}));y=s;}w.push(h.createElement('tr',{className:"_51mx",key:aa},x));x=[];y=0;}});return (h.createElement('table',babelHelpers._extends({},this.props,{className:k(this.props.className,"uiGrid"+(' '+"_51mz")+(t?' '+"_5f0n":'')),cellSpacing:'0',cellPadding:'0'}),h.createElement('tbody',null,w)));}}),n=h.createClass({displayName:'GridItem',propTypes:{alignv:l.oneOf(['top','middle','bottom']),alignh:l.oneOf(['left','center','right'])},render:function(){var o=k(this.props.className,"_51m-"+(this.props.alignv==='top'?' '+"vTop":'')+(this.props.alignv==='middle'?' '+"vMid":'')+(this.props.alignv==='bottom'?' '+"vBot":'')+(this.props.alignh==='left'?' '+"hLeft":'')+(this.props.alignh==='center'?' '+"hCent":'')+(this.props.alignh==='right'?' '+"hRght":''));return (h.createElement('td',babelHelpers._extends({},this.props,{className:o})));}});m.GridItem=n;f.exports=m;},null);
__d('DataViewPolyfill',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){if(j===undefined){this.$DataViewPolyfill1=new Uint8Array(i);}else if(k===undefined){this.$DataViewPolyfill1=new Uint8Array(i,j);}else this.$DataViewPolyfill1=new Uint8Array(i,j,k);this.byteLength=this.$DataViewPolyfill1.byteLength;}h.prototype.getUint8=function(i){if(i>=this.$DataViewPolyfill1.length)throw new Error('Trying to read beyond bounds of DataViewPolyfill');return this.$DataViewPolyfill1[i];};h.prototype.getUint16=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1);return j?l*256+k:k*256+l;};h.prototype.getUint32=function(i,j){var k=this.getUint8(i),l=this.getUint8(i+1),m=this.getUint8(i+2),n=this.getUint8(i+3);return j?((n*256+m)*256+l)*256+k:((k*256+l)*256+m)*256+n;};h.isSupported=function(){return !!b.Uint8Array;};f.exports=h;},null);
__d('URLMatcher',['URLMatcherConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',j='\u2000-\u206F\u00ab\u00bb\uff08\uff09',k='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',l='(?:(?:ht|f)tps?)://',m='(?:(?:'+k+'[.]){3}'+k+')',n='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',o='(?:\\b)www\\d{0,3}[.]',p='[^\\s'+i+j+']',q='(?:(?:(?:[.:\\-_%@]|'+p+')*'+p+')|'+n+')',r='(?::\\d+){0,1}',s='(?=[/?#])',t=h.tlds,u='(?:'+'(?:'+l+q+r+')|'+'(?:'+m+r+')|'+'(?:'+n+r+')|'+'(?:'+o+q+t+r+')|'+'(?:'+q+t+r+s+')'+')',v='[/#?]',w='\\([^\\s()<>]+\\)',x='[^\\s()<>?#]+',y=new RegExp(u,'im'),z='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',aa=new RegExp(z,'im'),ba='(?:'+'(?:'+v+')'+'(?:'+'(?:'+w+'|'+x+')*'+')*'+')*',ca=new RegExp('('+'(?:'+u+')'+'(?:'+ba+')'+')','im'),da=new RegExp('('+'(?:'+l+q+r+')|'+'(?:'+o+q+t+r+')'+')'),ea=/[\s'";]/,fa=new RegExp(v,'im'),ga=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),ha=new RegExp('[\\s()<>?#]','im'),ia=new RegExp('\\s()<>'),ja=function(qa){if(qa&&qa.indexOf('@')!=-1){return da.exec(qa)?qa:null;}else return qa;},ka=function(qa){return la(qa,ca);},la=function(qa,ra){var sa=(ra.exec(qa)||[])[1]||null;return ja(sa);},ma=function(qa){return y.exec(qa);},na=function(qa){return !ea.test(qa.charAt(qa.length-1));},oa=function(qa){do{var ra=y.exec(qa);if(!ra)return null;var sa=false;if(ra[0][0]==='['&&ra.index>0&&qa[ra.index-1]==='@'){var ta=aa.exec(ra[0]);if(ta){sa=true;qa=qa.substr(ra.index+ta[0].length);}}}while(sa);var ua=qa.substr(ra.index+ra[0].length);if(ua.length===0||!fa.test(ua[0]))return ja(ra[0]);var va=0,wa=0,xa=1,ya=0,za=wa;for(var ab=1;ab<ua.length;ab++){var bb=ua[ab];if(za===wa){if(bb==='('){ya=ya+1;za=xa;}else if(fa.test(bb)||!ga.test(bb)){va=ab;}else if(ha.test(bb))break;}else if(bb==='('){ya=ya+1;}else if(bb===')'){ya=ya-1;if(ya===0){za=wa;va=ab;}}else if(ia.test(bb))break;}return ja(ra[0]+ua.substring(0,va+1));},pa={};pa.permissiveMatch=ka;pa.matchToPattern=la;pa.matchHost=ma;pa.trigger=na;pa.match=oa;f.exports=pa;},null);
__d('getHashtagRegexString',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){var i='\xc0-\xd6'+'\xd8-\xf6'+'\xf8-\xff'+'\u0100-\u024f'+'\u0253-\u0254'+'\u0256-\u0257'+'\u0259'+'\u025b'+'\u0263'+'\u0268'+'\u026f'+'\u0272'+'\u0289'+'\u028b'+'\u02bb'+'\u0300-\u036f'+'\u1e00-\u1eff',j='\u0400-\u04ff'+'\u0500-\u0527'+'\u2de0-\u2dff'+'\ua640-\ua69f'+'\u0591-\u05bf'+'\u05c1-\u05c2'+'\u05c4-\u05c5'+'\u05c7'+'\u05d0-\u05ea'+'\u05f0-\u05f4'+'\ufb12-\ufb28'+'\ufb2a-\ufb36'+'\ufb38-\ufb3c'+'\ufb3e'+'\ufb40-\ufb41'+'\ufb43-\ufb44'+'\ufb46-\ufb4f'+'\u0610-\u061a'+'\u0620-\u065f'+'\u066e-\u06d3'+'\u06d5-\u06dc'+'\u06de-\u06e8'+'\u06ea-\u06ef'+'\u06fa-\u06fc'+'\u06ff'+'\u0750-\u077f'+'\u08a0'+'\u08a2-\u08ac'+'\u08e4-\u08fe'+'\ufb50-\ufbb1'+'\ufbd3-\ufd3d'+'\ufd50-\ufd8f'+'\ufd92-\ufdc7'+'\ufdf0-\ufdfb'+'\ufe70-\ufe74'+'\ufe76-\ufefc'+'\u200c-\u200c'+'\u0e01-\u0e3a'+'\u0e40-\u0e4e'+'\u1100-\u11ff'+'\u3130-\u3185'+'\uA960-\uA97F'+'\uAC00-\uD7AF'+'\uD7B0-\uD7FF'+'\uFFA1-\uFFDC',k=String.fromCharCode,l='\u30A1-\u30FA\u30FC-\u30FE'+'\uFF66-\uFF9F'+'\uFF10-\uFF19\uFF21-\uFF3A'+'\uFF41-\uFF5A'+'\u3041-\u3096\u3099-\u309E'+'\u3400-\u4DBF'+'\u4E00-\u9FFF'+k(173824)+'-'+k(177983)+k(177984)+'-'+k(178207)+k(194560)+'-'+k(195103)+'\u3003\u3005\u303B',m=i+j+l,n='\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6'+'\u00F8-\u0241\u0250-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EE\u037A\u0386'+'\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03CE\u03D0-\u03F5\u03F7-\u0481'+'\u048A-\u04CE\u04D0-\u04F9\u0500-\u050F\u0531-\u0556\u0559\u0561-\u0587'+'\u05D0-\u05EA\u05F0-\u05F2\u0621-\u063A\u0640-\u064A\u066E-\u066F'+'\u0671-\u06D3\u06D5\u06E5-\u06E6\u06EE-\u06EF\u06FA-\u06FC\u06FF\u0710'+'\u0712-\u072F\u074D-\u076D\u0780-\u07A5\u07B1\u0904-\u0939\u093D\u0950'+'\u0958-\u0961\u097D\u0985-\u098C\u098F-\u0990\u0993-\u09A8\u09AA-\u09B0'+'\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC-\u09DD\u09DF-\u09E1\u09F0-\u09F1'+'\u0A05-\u0A0A\u0A0F-\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32-\u0A33'+'\u0A35-\u0A36\u0A38-\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D'+'\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2-\u0AB3\u0AB5-\u0AB9\u0ABD'+'\u0AD0\u0AE0-\u0AE1\u0B05-\u0B0C\u0B0F-\u0B10\u0B13-\u0B28\u0B2A-\u0B30'+'\u0B32-\u0B33\u0B35-\u0B39\u0B3D\u0B5C-\u0B5D\u0B5F-\u0B61\u0B71\u0B83'+'\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99-\u0B9A\u0B9C\u0B9E-\u0B9F'+'\u0BA3-\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0C05-\u0C0C\u0C0E-\u0C10'+'\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C60-\u0C61\u0C85-\u0C8C'+'\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE'+'\u0CE0-\u0CE1\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D28\u0D2A-\u0D39'+'\u0D60-\u0D61\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6'+'\u0E01-\u0E30\u0E32-\u0E33\u0E40-\u0E46\u0E81-\u0E82\u0E84\u0E87-\u0E88'+'\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7'+'\u0EAA-\u0EAB\u0EAD-\u0EB0\u0EB2-\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6'+'\u0EDC-\u0EDD\u0F00\u0F40-\u0F47\u0F49-\u0F6A\u0F88-\u0F8B\u1000-\u1021'+'\u1023-\u1027\u1029-\u102A\u1050-\u1055\u10A0-\u10C5\u10D0-\u10FA\u10FC'+'\u1100-\u1159\u115F-\u11A2\u11A8-\u11F9\u1200-\u1248\u124A-\u124D'+'\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0'+'\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310'+'\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C'+'\u166F-\u1676\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711'+'\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7'+'\u17DC\u1820-\u1877\u1880-\u18A8\u1900-\u191C\u1950-\u196D\u1970-\u1974'+'\u1980-\u19A9\u19C1-\u19C7\u1A00-\u1A16\u1D00-\u1DBF\u1E00-\u1E9B'+'\u1EA0-\u1EF9\u1F00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D'+'\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC'+'\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC'+'\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u2094\u2102\u2107'+'\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D'+'\u212F-\u2131\u2133-\u2139\u213C-\u213F\u2145-\u2149\u2C00-\u2C2E'+'\u2C30-\u2C5E\u2C80-\u2CE4\u2D00-\u2D25\u2D30-\u2D65\u2D6F\u2D80-\u2D96'+'\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6'+'\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3006\u3031-\u3035'+'\u303B-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF'+'\u3105-\u312C\u3131-\u318E\u31A0-\u31B7\u31F0-\u31FF\u3400-\u4DB5'+'\u4E00-\u9FBB\uA000-\uA48C\uA800-\uA801\uA803-\uA805\uA807-\uA80A'+'\uA80C-\uA822\uAC00-\uD7A3\uF900-\uFA2D\uFA30-\uFA6A\uFA70-\uFAD9'+'\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C'+'\uFB3E\uFB40-\uFB41\uFB43-\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F'+'\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A'+'\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7'+'\uFFDA-\uFFDC',o='\u0300-\u036F\u0483-\u0486\u0591-\u05B9\u05BB-\u05BD\u05BF'+'\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u0615\u064B-\u065E\u0670'+'\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\u0711\u0730-\u074A'+'\u07A6-\u07B0\u0901-\u0903\u093C\u093E-\u094D\u0951-\u0954\u0962-\u0963'+'\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7-\u09C8\u09CB-\u09CD\u09D7'+'\u09E2-\u09E3\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47-\u0A48\u0A4B-\u0A4D'+'\u0A70-\u0A71\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD'+'\u0AE2-\u0AE3\u0B01-\u0B03\u0B3C\u0B3E-\u0B43\u0B47-\u0B48\u0B4B-\u0B4D'+'\u0B56-\u0B57\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7'+'\u0C01-\u0C03\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55-\u0C56'+'\u0C82-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5-\u0CD6'+'\u0D02-\u0D03\u0D3E-\u0D43\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D82-\u0D83'+'\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2-\u0DF3\u0E31\u0E34-\u0E3A'+'\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB-\u0EBC\u0EC8-\u0ECD\u0F18-\u0F19'+'\u0F35\u0F37\u0F39\u0F3E-\u0F3F\u0F71-\u0F84\u0F86-\u0F87\u0F90-\u0F97'+'\u0F99-\u0FBC\u0FC6\u102C-\u1032\u1036-\u1039\u1056-\u1059\u135F'+'\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17B6-\u17D3\u17DD'+'\u180B-\u180D\u18A9\u1920-\u192B\u1930-\u193B\u19B0-\u19C0\u19C8-\u19C9'+'\u1A17-\u1A1B\u1DC0-\u1DC3\u20D0-\u20DC\u20E1\u20E5-\u20EB\u302A-\u302F'+'\u3099-\u309A\uA802\uA806\uA80B\uA823-\uA827\uFB1E\uFE00-\uFE0F'+'\uFE20-\uFE23',p='\u0030-\u0039\u0660-\u0669\u06F0-\u06F9\u0966-\u096F\u09E6-\u09EF'+'\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0BE6-\u0BEF\u0C66-\u0C6F'+'\u0CE6-\u0CEF\u0D66-\u0D6F\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F29'+'\u1040-\u1049\u17E0-\u17E9\u1810-\u1819\u1946-\u194F\u19D0-\u19D9'+'\uFF10-\uFF19',q=n+o+m,r=p+'_',s=q+r,t='['+q+']',u='['+s+']',v='^|$|[^&/'+s+']',w='[#\\uFF03]',x='('+v+')('+w+')('+u+'*'+t+u+'*)';return x;}f.exports=h;},null);
__d('getHashtagRegex',['getHashtagRegexString'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){return new RegExp(h(),'ig');}f.exports=i;},null);
__d('HashtagParser',['URLMatcher','getHashtagRegex'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=100,k=30,l=/@\[([0-9]+):([0-9]+):((?:[^\\\]]*(?:\\.)*)*)\]/g;function m(ea){var fa=z(ea),ga=0,ha=0;return o(ea).map(function(ia){while(ga<fa.length){var ja=fa[ga],ka=ja.offset-ha;if(ka<ia.offset){ha+=ja.token.length-ja.name.length;ga++;}else break;}return {marker:ia.marker,tag:ia.hashtag,rawOffset:ia.offset+ha,offset:ia.offset};});}function n(ea){return p(ea,u(ea));}function o(ea){var fa=ba(ea);return p(fa,q(ea,fa));}function p(ea,fa){return s(ea).slice(0,k).filter(function(ga){var ha=w(ga.offset,ga.hashtag.length,fa);return !ha&&ga.hashtag.length<=j;});}function q(ea,fa){return v(t(ea),u(fa));}var r=i();function s(ea){var fa=[];ea.replace(r,function(ga,ha,ia,ja,ka){fa.push({marker:ia,hashtag:ja,offset:ka+ha.length});});return fa;}function t(ea){return ca(ea).map(function(fa){return [fa.offset,fa.name.length];});}function u(ea){var fa=[],ga,ha=0;while(ga=h.permissiveMatch(ea)){var ia=ea.indexOf(ga);fa.push([ha+ia,ga.length]);ea=ea.substring(ia+ga.length);ha+=ia+ga.length;}return fa;}function v(ea,fa){var ga=[],ha=0,ia=0,ja=0;while(ha<ea.length&&ia<fa.length)if(ea[ha][0]>fa[ia][0]){ga[ja++]=fa[ia++];}else ga[ja++]=ea[ha++];return ga.concat(ea.slice(ha),fa.slice(ia));}function w(ea,fa,ga){if(!ga)return false;var ha=y(ga,ea);return x(ea,fa,ga,ha)||x(ea,fa,ga,ha+1);}function x(ea,fa,ga,ha){if(!ga[ha])return false;var ia=ga[ha][0],ja=ga[ha][1];return !(ea+fa-1<ia||ea>ia+ja-1);}function y(ea,fa){var ga=0,ha=ea.length-1;while(ga<=ha){var ia=Math.floor((ga+ha)/2),ja=ea[ia][0];if(ja==fa){return ia;}else if(ja<fa){ga=ia+1;}else ha=ia-1;}return ha;}function z(ea){var fa=[];ea.replace(l,function(ga,ha,ia,ja,ka){fa.push({token:ga,id:ha,type:ia,name:ja,offset:ka});});return fa;}function aa(ea){return ea?ea.replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;}function ba(ea){return ea.replace(l,function(fa,ga,ha,ia,ja){return aa(ia);});}function ca(ea){var fa=0,ga=0;return z(ea).map(function(ha){var ia=ea.indexOf(ha.token,ga);ga=ia+1;ia-=fa;var ja=aa(ha.name);fa+=ha.token.length-ja.length;if(ia>=0)return {id:ha.id,name:ja,type:ha.type,offset:ia};});}var da={};da.parse=m;da.parseWithoutMentions=n;f.exports=da;},null);
__d('intlNumUtils',['NumberFormatConfig','NumberParsingConfig','escapeRegex'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=/(\d)(\d\d\d)($|\D)/,l={'\u060C':'.','\u0660':'0','\u0661':'1','\u0662':'2','\u0663':'3','\u0664':'4','\u0665':'5','\u0666':'6','\u0667':'7','\u0668':'8','\u0669':'9','\u066B':'.','\u06F0':'0','\u06F1':'1','\u06F2':'2','\u06F3':'3','\u06F4':'4','\u06F5':'5','\u06F6':'6','\u06F7':'7','\u06F8':'8','\u06F9':'9'};function m(da,ea,fa,ga,ha){fa=fa||'';ga=ga||'.';ha=ha||0;if(ea===undefined||ea===null){da=da.toString();}else if(typeof da==='string'){da=s(da,ea);}else da=q(da,ea);var ia=da.split('.'),ja=ia[0],ka=ia[1];if(Math.abs(parseInt(ja,10)).toString().length>=ha){var la='',ma='$1'+fa+'$2$3';while((la=ja.replace(k,ma))!=ja)ja=la;}var na=ja;if(ka)na+=ga+ka;return na;}function n(da,ea){return m(da,ea,'',h.decimalSeparator,h.minDigitsForThousandsSeparator);}function o(da,ea){return m(da,ea,h.numberDelimiter,h.decimalSeparator,h.minDigitsForThousandsSeparator);}function p(da,ea,fa){var ga=Math.floor(Math.log(da)/Math.LN10),ha=da;if(ga<fa)ha=da*Math.pow(10,-ga+fa);var ia=Math.pow(10,Math.floor(Math.log(ha)/Math.LN10)-fa+1),ja=Math.round(ha/ia)*ia;if(ga<fa)ja/=Math.pow(10,-ga+fa);return o(ja,ea);}function q(da,ea){var fa=ea==null?0:ea,ga=Math.pow(10,fa),ha=da;ha=Math.round(ha*ga)/ga;ha=ha+'';if(!fa)return ha;var ia=ha.indexOf('.'),ja=0;if(ia==-1){ha+='.';ja=fa;}else ja=fa-(ha.length-ia-1);for(var ka=0,la=ja;ka<la;ka++)ha+='0';return ha;}var r=function(da,ea){for(var fa=0;fa<ea;fa++)da+='0';return da;};function s(da,ea){var fa=da.indexOf('.'),ga=fa===-1?da:da.slice(0,fa),ha=fa===-1?'':da.slice(fa+1);return ea?ga+'.'+r(ha.slice(0,ea),ea-ha.length):ga;}var t={},u=function(da){if(!t[da])t[da]=new RegExp('([^\\/p]|^)'+j(da)+'(\\d*).*','i');return t[da];};function v(da,ea,fa){da=da.split('').map(function(ga){return (l.hasOwnProperty(ga)?l[ga]:ga);}).join('').trim();da=da.replace(/^[^\d]*\-/,'\u0002');if(i.useLegacyAlgorithm)return w(da,ea,fa);return aa(da,ea,i.acceptNumberDelimiter?fa||'':'');}function w(da,ea,fa){var ga=u(ea);if(!ga.test(da)&&!/(.*\.){2,}/.test(da))ga=u('.');da=da.replace(ga,'$1\u0001$2');da=da.replace(/(.)[A-Z][A-Z][A-Z].*/g,'$1');return x(da);}function x(da){da=da.replace(/[^0-9\u0001\u0002]/g,'').replace('\u0001','.').replace('\u0002','-');var ea=Number(da);return da===''||isNaN(ea)?null:ea;}var y={};function z(da){if(!y[da])y[da]=new RegExp(da,'i');return y[da];}function aa(da,ea,fa){var ga=j(ea),ha=j(fa),ia=z('^[^\\d]*\\d.*'+ga+'.*\\d[^\\d]*$');if(!ia.test(da)){var ja=z('(^[^\\d]*)'+ga+'(\\d*[^\\d]*$)');if(ja.test(da)){da=da.replace(ja,'$1\u0001$2');return x(da);}var ka=z('^[^\\d]*[\\d '+j(ha)+']*[^\\d]*$');if(!ka.test(da))da='';return x(da);}var la=z('(^[^\\d]*[\\d '+ha+']*)'+ga+'(\\d*[^\\d]*$)');da=la.test(da)?da.replace(la,'$1\u0001$2'):'';return x(da);}function ba(da){return v(da,h.decimalSeparator||'.',h.numberDelimiter);}var ca={formatNumber:n,formatNumberRaw:m,formatNumberWithThousandDelimiters:o,formatNumberWithLimitedSigFig:p,parseNumber:ba,parseNumberRaw:v,getFloatString:function(da,ea,fa){var ga=String(da),ha=ga.split('.'),ia=ca.getIntegerString(ha[0],ea);if(ha.length===1)return ia;return ia+fa+ha[1];},getIntegerString:function(da,ea){var fa=String(da),ga=/(\d+)(\d{3})/;while(ga.test(fa))fa=fa.replace(ga,'$1'+ea+'$2');return fa;}};f.exports=ca;},null);
__d('PhotosUploadWaterfallXMixin',['AsyncSignal','Banzai','Map','PhotosUploadWaterfallXConfig','Set','invariant','randomInt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=new j();function p(r,s){var t={};r.client_time=Math.round(Date.now()/1000);if(k.retryBanzai){t.retry=true;r.nonce=n(4294967296);}i.post(k.banzaiRoute,r,t);if(s)setTimeout(s,0);}function q(r,s){if(k.useBanzai){p(r,s);}else{var t=new h(k.loggingEndpoint,{data:JSON.stringify(r)}).setHandler(s);if(k.timeout)t.setTimeout(10*1000);t.send();}}f.exports={logStep:function(r,s,t){var u=this.getWaterfallID&&this.getWaterfallID(),v=this.getWaterfallAppName&&this.getWaterfallAppName();if(!u||!v)return;q(babelHelpers._extends({step:r,qn:u,uploader:v,ref:this.getWaterfallSource&&this.getWaterfallSource()},s),t);},logPUWStep:function(r,s,t,u,v,w,x){if(w&&w.logOncePerSession){if(!o.has(s))o.set(s,new l());if(o.get(s).has(r))return;o.get(s).add(r);}q(Object.assign({step:r,qn:s,uploader:t,ref:u},v),x);}};},null);
__d('Tokenizer',['setTimeoutAcrossTransitions','CSS','DataStore','DOM','MAdsUtils','Stratcom','createDeprecatedProperties','destroyOnUnload','eventsMixinDeprecated'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();function q(r){'use strict';this._containerNode=r;this._listeners=[];o((function(){while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;}).bind(this));}q.prototype.start=function(){'use strict';this._orig=k.find(this._containerNode,'input','tokenizer-input');this._tokens=[];this._tokenMap={};var r=this.buildInput(this._orig.value);this._focus=r;var s=k.scry(this._containerNode,'div','tokenizer-input-container');s=s[0]||this._containerNode;this._listeners.push(k.listen(r,['click','focus','blur','keydown','keypress'],null,this.handleEvent.bind(this)),k.listen(s,'click',null,(function(y){if(y.getNode('remove')){this._remove(j.get(y.getNode('token')).key);}else if(y.getTarget()==this._root)this.focus();}).bind(this)));var t=k.create('div');t.id=this._orig.id;i.conditionClass(t,'jx-tokenizer',true);t.style.cursor='text';this._root=t;t.appendChild(r);var u=this._typeahead;u.setInputNode(this._focus);u.start();var v=this._orig.parentNode;k.setContent(v,t);var w=this._initialValue||{};for(var x in w)this.addToken(x,w[x],v);k.appendContent(t,k.create('div',{style:{clear:'both'}}));this._redraw();};q.prototype.setInitialValue=function(r){'use strict';this._initialValue=r;return this;};q.prototype.setTypeahead=function(r){'use strict';r.setAllowNullSelection(false);r.removeListener();r.listen('show',(function(s){if(this._tokenMap){var t=s.show,u=[];for(var v=0;v<t.length;++v){var w=t[v],x=k.scry(w,'a','typeahead-result')[0];if(x)x.removeAttribute('href');if(!(t[v].rel in this._tokenMap))u.push(t[v]);}t.length=0;t.push.apply(t,u);}}).bind(this));r.listen('choose',(function(s){m.context().prevent();var event=m.invoke('Tokenizer-addedtoken',null,s);if(event.getPrevented())return;var t=JSON.parse(s.getAttribute('data-extra'));if(this.addToken(s.rel,s.name,s,t)){if(this.shouldHideResultsOnChoose())this._typeahead.hide();this._typeahead.clear();this._redraw();this.focus();}}).bind(this));r.listen('query',(function(s){if(s.length)m.context().prevent();}).bind(this));this._typeahead=r;o(this._typeahead.removeListener.bind(this._typeahead));return this;};q.prototype.shouldHideResultsOnChoose=function(){'use strict';return true;};q.prototype.handleEvent=function(r){'use strict';this._typeahead.handleEvent(r);if(r.getPrevented())return;if(r.getType()=='click'){if(r.getTarget()==this._root){this.focus();r.prevent();return;}}else if(r.getType()=='keydown'){this._onkeydown(r);}else if(r.getType()=='blur')this._redraw();};q.prototype.refresh=function(){'use strict';this._redraw(true);return this;};q.prototype._redraw=function(r){'use strict';var s=this._focus;if(s.value===this._lastvalue&&!r)return;this._lastvalue=s.value;var t=k.textMetrics(this._focus,'jx-tokenizer-metrics');t.y=null;t.x+=24;t.setDim(s);s.value=s.value;if(this._typeahead)this._typeahead.refresh();};q.prototype.addToken=function(r,s,t,u){'use strict';if(r in this._tokenMap)return false;var v=this._focus,w=this._root,x=this.buildToken(r,s,t);this._tokenMap[r]={value:s,key:r,node:x};if(u)Object.keys(u).forEach((function(y){if(!(y in this._tokenMap[r]))this._tokenMap[r][y]=u[y];}).bind(this));this._tokens.push(r);w.insertBefore(x,v);this.invoke('added',r);return true;};q.prototype.clearTokens=function(){'use strict';for(var r in this._tokenMap){k.remove(this._tokenMap[r].node);delete this._tokenMap[r];}this.refresh();};q.prototype.removeToken=function(r){'use strict';if(r in this._tokenMap){var s=this._tokenMap[r].node;delete this._tokenMap[r];k.remove(s);this._redraw(true);return true;}return false;};q.prototype.buildInput=function(r){'use strict';return k.create('input',{className:'jx-tokenizer-input',type:'text',autocomplete:'off',value:r});};q.prototype.buildToken=function(r,s,t){'use strict';var u=k.create('input',{type:'hidden',value:r,name:this._orig.name+'['+this._seq+++']'}),v=k.create('a',{className:'jx-tokenizer-x',sigil:'remove'},'\u00d7');return k.create('a',{className:'jx-tokenizer-token',sigil:'token',meta:{key:r}},[s,u,v]);};q.prototype.getTokens=function(){'use strict';var r={};for(var s in this._tokenMap)r[s]=this._tokenMap[s].value;return r;};q.prototype.getTokensWithData=function(){'use strict';return l.clone(this._tokenMap,'node');};q.prototype._onkeydown=function(r){'use strict';switch(r.getSpecialKey()){case 'tab':var s=this._typeahead.submit();if(this.getNextInput()){if(!s)this._focus.value='';h((function(){this.getNextInput().focus();}).bind(this),0);}break;case 'delete':if(!this._focus.value.length){var t;while(t=this._tokens.pop())if(this._remove(t))break;}break;case 'return':break;default:if(this.getLimit()&&Object.keys(this._tokenMap).length==this.getLimit())r.prevent();h(this._redraw.bind(this),0);break;}};q.prototype._remove=function(r){'use strict';var s=this.removeToken(r);if(s){this.focus();this.invoke('removed',r);}return s;};q.prototype.focus=function(){'use strict';var r=this._focus;k.show(r);h(function(){r.focus();},0);};p(q,['added','removed']);n(q,{limit:null,nextInput:null});Object.assign(q.prototype,{_containerNode:null,_root:null,_focus:null,_orig:null,_typeahead:null,_tokenid:0,_tokens:null,_tokenMap:null,_initialValue:null,_seq:0,_lastvalue:null});f.exports=q;},null);
__d('MFeedbackMarauderLogger',['setTimeoutAcrossTransitions','MarauderLogger','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=10*60*1000,l,m,n,o,p,q;function r(v,w){i.log(v,undefined,w);}function s(){q=null;p=false;u();}function t(){l++;s();}function u(){if(m){window.clearTimeout(m);m=null;}}j.listen('click','marauder-like',function(){r('like',{is_like:1});});j.listen('click','marauder-unlike',function(){r('like',{is_like:0});});j.listen('submit','marauder-composer-submit',function(){r('comment');});j.listen('marauder-fb-composer-init',null,function(event){var v=event.getData()||{};o=v.parent_fbid||-1;l=0;n=Date.now();s();});j.listen('marauder-feedback-posted',null,function(){if(o){r('comment_posted',{parent_fbid:o,written_time:q,clearcounter:l,loaded_time:n});t();}});j.listen('marauder-feedback-input',null,function(event){if(o){var v=event.getData()||{},w=v.draft.replace(" ","");if(w.length>=5&&!p){r('comment_written',{parent_fbid:o,clearcounter:l,loaded_time:n});q=Date.now();p=true;m=h(function(){t();},k);}}});},null);
__d("XStickerPackImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null,{});
__d("XStickerQueryImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true},sticker_interface:{type:"String"}});},null,{});
__d('MStickerPack.react',['MRequest','MURI','MStickersInitialData','MStickersWebDriverIDs','React','Grid.react','Image.react','ReactComponentWithPureRenderMixin','StickerInterfaces','XStickerPackImagesController','XStickerQueryImagesController','cx','ix','fbt','debounceCore'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=m.GridItem,x=j.MRU_STICKER_PACK,y={},z=l.createClass({displayName:'MStickerPack',mixins:[o],getInitialState:function(){return {input:'',loading:false,searching:false,stickers:[]};},getDefaultProps:function(){return {isComments:false};},componentWillMount:function(){this.getStickers(this.props.pack.id);},componentWillReceiveProps:function(aa){this.getStickers(aa.pack.id);},updateRecentlyUsed:function(aa){var ba=y[x]||[];for(var ca=0;ca<ba.length;++ca)if(ba[ca].id===aa.id){ba.splice(ca,1);break;}ba.unshift(aa);if(!y[x]){y[x]=ba;j.packs.unshift(j.mru);}},getStickers:function(aa){if(!aa||aa==j.SEARCH_PACK)return;if(aa in y){this.setState({input:'',loading:false,stickers:y[aa],searching:false});return;}var ba=q.getURIBuilder().setInt('pack_id',aa).getURI(),ca=new h(new i(ba));ca.listen('done',(function(da){y[aa]=da.payload;this.isMounted()&&this.setState({input:'',loading:false,stickers:da.payload,searching:false});}).bind(this));this.setState({loading:true});ca.send();},getStickersForQuery:function(aa,ba){if(aa.length===0){this.setState({loading:false,searching:false});return;}if(aa!=this.state.input&&!ba)return;var ca=r.getURIBuilder().setString('query',aa).setString('sticker_interface',this.props.isComments?p.COMMENTS:p.MESSAGES).getURI(),da=new h(new i(ca));da.listen('done',(function(ea){var fa=ea.payload||[];if(this.isMounted()&&aa==this.state.input)this.setState({loading:false,stickers:fa,searching:true});}).bind(this));this.setState({loading:true});da.send();},selectSticker:function(aa){this.updateRecentlyUsed(aa);this.props.onSelect&&this.props.onSelect(aa.id);},renderSticker:function(aa,ba){var ca=null;if(this.props.isComments&&!aa.isCommentsCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return;}else if(!this.props.isComments&&!aa.isMessengerCapable){if(this.props.pack.id==j.MRU_STICKER_PACK)return;}else ca=this.selectSticker.bind(this,aa);return (l.createElement('div',{className:"_5asg",key:'sticker-'+ba,onClick:ca,'data-testid':k.STICKER_PACK_ITEM},l.createElement('img',{src:aa.uri})));},render:function(){if(this.props.pack.id==j.SEARCH_PACK)return (l.createElement('div',{className:"_5ash"},l.createElement('div',{className:"_5ef_"},this._renderSearch(),this._renderTags(),this._renderStickerSearchResults()),this._renderLoading()));if(this.state.loading)return (l.createElement('div',{className:"_5ash"},this._renderLoading()));return (l.createElement('div',{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?' '+"_5jkg":''),onScroll:this.props.onScroll},l.createElement('div',{className:"_5ef_",onScroll:this._onScroll},this.state.stickers.map(this.renderSticker)),this.renderMask()));},_renderLoading:function(){if(!this.state.loading)return null;return (l.createElement('span',{className:"_5asi"},u._("Loading...")));},_renderStickerSearchResults:function(){if(!this.state.searching||this.state.loading)return null;if(this.state.stickers.length===0)return (l.createElement('div',{className:"_4op9"},l.createElement(n,{src:t("/images/messaging/stickers/icons/sad_face.png")}),l.createElement('p',null,u._("No Stickers to Show"))));return (l.createElement('div',{className:"_5ash"+(this.props.isComments&&!this.props.pack.isCommentsCapable?' '+"_5jkg":''),onScroll:this.props.onScroll},l.createElement('div',{className:"_5ef_"},this.state.stickers.map(this.renderSticker)),this.renderMask()));},renderMask:function(){if(!(this.props.isComments&&!this.props.pack.isCommentsCapable))return null;return (l.createElement('div',{className:"_5jkh"},l.createElement('div',{className:"_5jki"},u._("This pack is only available in messages"))));},_renderSearch:function(){return (l.createElement('div',{className:"_2j-l"},l.createElement('span',{className:"_2j-m"}),this._renderCloseButton(),l.createElement('div',{className:"_4opa"},l.createElement('input',{className:"_2j-n",onChange:this._inputChanged,onFocus:this.props.onInputFocus,onBlur:this.props.onInputBlur,ref:'stickerQuery',value:this.state.input,placeholder:u._("Search stickers"),type:'text'}))));},_renderCloseButton:function(){if(this.state.input.length>0)return (l.createElement('span',{className:"_4opb",onClick:this._clearInput}));},_renderTags:function(){if(this.state.searching||this.state.loading)return null;var aa=j.tags.filter(function(ba){return ba.sourceURI!==null;}).sort(function(ba,ca){return ba.order-ca.order;}).map((function(ba,ca){return (l.createElement(w,{className:"_2j-o",key:ca},l.createElement('div',{className:"_2j-p"},l.createElement('div',{className:"_2j-q",onClick:this._selectTag.bind(this,ba),style:{background:'#'+ba.color_code}},l.createElement(n,{src:ba.sourceURI}),l.createElement('span',null,ba.name)))));}).bind(this));return (l.createElement(m,{className:"_2j-r",cols:2,fixed:true,ref:'grid'},aa));},_inputChanged:function(event){this.setState({input:event.target.value});v(this.getStickersForQuery.bind(this,event.target.value,false),500)();},_clearInput:function(){this.setState({input:'',loading:false,searching:false});},_selectTag:function(aa){this.setState({input:aa.name});this.getStickersForQuery(aa.name,true);}});f.exports=z;},null);
__d('MStickerPackButton.react',['Image.react','MStickersInitialData','MStickersWebDriverIDs','React','ReactComponentWithPureRenderMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.createClass({displayName:'MStickerPackButton',mixins:[l],onClick:function(){this.props.onclick&&this.props.onclick(this.props.pack);},render:function(){var o="_5arz"+(' '+"_5cni")+(this.props.selected?' '+"_5ar-":'')+(this.props.disabled?' '+"_4f39":''),p=this.props.pack,q;if(p.id==i.MRU_STICKER_PACK){q=k.createElement('span',{className:"_3rsg"});}else if(p.id==i.SEARCH_PACK){q=k.createElement('span',{className:"_cmr"});}else q=k.createElement(h,{src:p.icon,alt:p.name});var r=p.id==i.SEARCH_PACK?null:j.STICKER_NONSEARCH_PACK_BUTTON;return (k.createElement('a',{className:o,onClick:this.onClick,rel:'ignore','data-testid':r},q));}});f.exports=n;},null);
__d("XStickerStorePermalinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/",{tab:{type:"String"},redirect_uri:{type:"String"},is_comments:{type:"Bool",defaultValue:false}});},null,{});
__d('MStickerSelector.react',['BanzaiLogger','MPageController','MStickerPack.react','MStickerPackButton.react','MStickersInitialData','MStickersWebDriverIDs','MViewport','React','ReactDOM','UserAgent','XStickerStorePermalinkController','getActiveElement','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=o.PropTypes,w=o.createClass({displayName:'MStickerSelector',propTypes:{callback:v.func.isRequired,isComments:v.bool.isRequired,isOpen:v.bool,onClose:v.func,showStore:v.bool.isRequired},getInitialState:function(){var x=null;if(l.packs&&l.packs.length)for(var y=0;y<l.packs.length;y++)if(!this.props.isComments&&l.packs[y].isMessengerCapable||this.props.isComments&&l.packs[y].isCommentsCapable){x=l.packs[y];break;}return {selectedPack:x,prevDisabled:true,nextDisabled:false,scrollLeft:0};},getDefaultProps:function(){return {isComments:true,showStore:true};},onPackSelect:function(x){h.log('MTouchStickersLoggerConfig',{event:'select_pack',packid:x.id});this.setState({selectedPack:x});},onPackScroll:function(){if(this.state.selectedPack&&this.state.selectedPack.id!=this._lastScrolledPackID){this._lastScrolledPackID=this.state.selectedPack.id;h.log('MTouchStickersLoggerConfig',{event:'scroll_pack',packid:this.state.selectedPack.id});}},onInputFocus:function(){this.setState({inputFocused:true});},onInputBlur:function(){this.setState({inputFocused:false});},scrollPrev:function(){if(!this.state.prevDisabled){var x=Math.max(this.state.scrollLeft-200,0);this.setState({scrollLeft:x,prevDisabled:x===0,nextDisabled:false});}},scrollNext:function(){if(!this.state.nextDisabled){var x=p.findDOMNode(this.refs.selectorRow),y=x.scrollWidth-x.parentNode.clientWidth,z=Math.min(this.state.scrollLeft+200,y);this.setState({scrollLeft:z,prevDisabled:false,nextDisabled:this._checkDisableNext(z)});}},_checkDisableNext:function(x){var y=p.findDOMNode(this.refs.selectorRow),z=y.scrollWidth-y.parentNode.clientWidth;return x>=z;},renderPack:function(x,y){return (o.createElement(k,{disabled:this.props.isComments&&!x.isCommentsCapable||!this.props.isComments&&!x.isMessengerCapable,key:'pack-'+y,onclick:this.onPackSelect,pack:x,selected:x.id==this.state.selectedPack.id}));},renderIndicator:function(){if(!l.storeIndicator)return null;return o.createElement('div',{className:"_5e-s"});},render:function(){if(!this.props.isOpen)return null;var x=l.packs.length===0?o.createElement('div',{className:"_5ar_"},u._("No stickers available")):o.createElement(j,{pack:this.state.selectedPack,onSelect:this.props.callback,onScroll:this.onPackScroll,onInputFocus:this.onInputFocus,onInputBlur:this.onInputBlur,isComments:this.props.isComments}),y=l.packs,z=[];for(var aa=0;aa<y.length;aa++)if(y[aa])if(this.props.isComments&&y[aa].isCommentsCapable){z.push(y[aa]);}else if(y[aa].isMessengerCapable)z.push(y[aa]);y=z;y=y.map(this.renderPack,this);var ba=r.getURIBuilder().setString('redirect_uri',i.getRenderedPath()).setBool('is_comments',this.props.isComments).getURI(),ca=null;if(this.props.showStore)ca=o.createElement('a',{className:"_5cni _5b3_",href:ba.toString()},o.createElement('span',{className:"_5b40"}),this.renderIndicator());var da=q.isPlatform('Android <2.4');return (o.createElement('div',{className:this.props.className,'data-testid':m.STICKER_SELECTOR_CONTENT},o.createElement('div',{className:"_5as0"+(da?' '+"_2-n8":''),ref:'selector'},o.createElement('div',{className:"_5as1",onScroll:this.state.inputFocused?this._onPackViewScroll:null},x),o.createElement('div',{className:"_5as2",ref:'selectorRow',style:{marginLeft:-this.state.scrollLeft}},o.createElement('div',{className:"_5as5"},y)),this._renderPrevButton(),this._renderNextButton(),ca)));},_renderPrevButton:function(){return (o.createElement('a',{className:"_5cni _5abu",disabled:this.state.prevDisabled,href:'#',onClick:this.scrollPrev,ref:'prevButton',rel:'ignore'},o.createElement('span',{className:"_5abw"})));},_renderNextButton:function(){return (o.createElement('a',{className:"_5cni _5abx",disabled:this.state.nextDisabled,href:'#',onClick:this.scrollNext,ref:'nextButton',rel:'ignore'},o.createElement('span',{className:"_5aby"})));},_setInitialNextButtonState:function(){this.setState({nextDisabled:this._checkDisableNext(this.state.scrollLeft)});},_onPackViewScroll:function(event){s().blur();},componentDidMount:function(){if(this.props.isOpen)this._setInitialNextButtonState();},componentDidUpdate:function(x,y){if(this.props.isOpen){if(this.state.selectedPack!=y.selectedPack||this.props.isOpen!=x.isOpen)n.scrollToNode(p.findDOMNode(this.refs.selector));if(this.props.isOpen!=x.isOpen){this._setInitialNextButtonState();h.log('MTouchStickersLoggerConfig',{event:'open_tray'});}}}});f.exports=w;},null);
__d('MStickerSelectorButton.react',['Image.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MStickerSelectorButton',propTypes:{onToggle:l.func,isSelected:l.bool},getDefaultProps:function(){return {isSelected:false};},getInitialState:function(){return {isSelected:this.props.isSelected};},componentWillUpdate:function(n,o){if(n!==this.props)this.setState({isSelected:n.isSelected});if(this.props.onToggle&&o!==this.state)this.props.onToggle(o.isSelected);},onClick:function(event){this.setState({isSelected:!this.state.isSelected});this.props.onClick&&this.props.onClick(event);},render:function(){var n;if(!this.state.isSelected){n=k('/images/mobile/messages/stickers/smile_icon.png');}else n=k('/images/mobile/messages/stickers/smile_icon_active.png');return (i.createElement('button',{type:'button',className:"_5ecn _1n29",onClick:this.onClick},i.createElement(h,{src:n})));}});f.exports=m;},null);
__d('MStickerMount',['ClientIDs','DOM','MAjaxify','MCommentStatusLogger','MRequest','MStickerSelector.react','MStickerSelectorButton.react','MTextarea','ReactComponentRenderer','Stratcom','SubscriptionsHandler','$'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=function(w,x,y,z,aa,ba){var ca,da=new p(m,x);da.setProps({callback:z,isComments:aa,onClose:function(){da&&da.setProps({isOpen:false});ca&&ca.setProps({isSelected:false});},showStore:ba});ca=new p(n,w);ca.setProps({onToggle:function(fa){da.setProps({isOpen:fa});}});var ea=new r();ea.addSubscriptions(i.listen(y,'focus',null,function(){ca.setProps({isSelected:false});}),q.listen('m:ufi:sticker-comment',null,function(){ca.setProps({isSelected:false});}),q.listen('m:page:unload',null,function(){ea.release();}));};function u(w){var x=new r();x.addSubscriptions(q.listen('m:ufi:live-comments:render',null,function(event){var y=event.getData()||{},z=y.logKeys;z&&z.forEach(function(aa){if(aa===w){k.logRender(w);x.release();}});}),q.listen('m:ufi:iui:comment-added',null,function(event){var y=event.getData().loggingInteractionKey;if(y===w){k.logRender(w);x.release();}}),q.listen('m:page:unload',null,function(){x.release();}));return x;}var v={initMessages:function(w,x,y,z){var aa=s(y),ba=function(ca){var da=aa.form,ea=i.convertFormToDictionary(da);ea.sticker_id=ca;z.sendRequest(da.action,ea);};t(w,x,aa,ba,false,true);},initComments:function(w,x,y,z){var aa=arguments.length<=4||arguments[4]===undefined?false:arguments[4],ba=z instanceof o?z.getTextareaNode():s(y),ca=ba.form,da=function(ea){var fa=new l(ca.action);fa.setMethod('POST');fa.addData({client_id:h.getNewClientID(),sticker_id:ea});if(aa){var ga=k.newInteractionKey();k.logInitAndSubmitSticker(ga,ea);fa.addData({logging_interaction_key:ga});u(ga);}j.ajaxify(null,ca,fa,'async_composer');q.invoke('m:ufi:sticker-comment');};t(w,x,ba,da,true,true);},initNewMessage:function(w,x,y,z){var aa=function(ba){z.sendSticker(ba);};t(w,x,y,aa,false,false);}};f.exports=v;},null);
__d("prefetchImage",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=new Image();k.onload=j;k.src=i;}f.exports=h;},null);
__d('MPhotoStage',['setTimeoutAcrossTransitions','CSS','cx','DOM','Stratcom','Vector','DataStore','MURI','MRequest','MViewport','MInputFocus','MJSEnvironment','prefetchImage'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=false,v='photo-stage',w='photo-image',x='facebox',y='new-tag-placeholder',z='photos-input-tag',aa='photo-tag-loading',ba='popup-nub',ca='tokenizer-input',da='transfer-focus-container',ea=2000,fa=200,ga=null,ha=null,ia=null,ja=null;function ka(sa,ta,ua){var va=0,wa=q.getUseableWidth();if(ua>wa){va=ua-wa;}else if(ta<0)va=ta;if(va===0)return sa;return new m(sa.x-va,sa.y);}function la(sa){if(!sa)return;i.conditionClass(sa,"_57-n",!!ia);if(ia){clearTimeout(ia);ia=null;}else ia=h(function(){la(sa);},ea);}function ma(){ga=null;while(ja.length)ja.pop().remove();u=false;if(ia){clearTimeout(ia);ia=null;}}function na(sa){var ta=m.getPos(sa),ua=m.getDim(sa),va=m.getPos(ga),wa=new m(ta.x+ua.x/2,ta.y+ua.x-va.y),xa=k.find(ga,'*',aa);wa.setPos(xa);k.show(xa);}function oa(sa,ta,ua){var va=new o(sa.write_tag_uri);va.addQueryData('id',sa.owner_id);va.addQueryData('facebox_id',ta.facebox_id);va.addQueryData('replace_id',y);va.addQueryData('sd_source',sa.source);va.addQueryData('sd_set',sa.set);var wa={};wa['ids['+ua+']']=ua;wa['x['+ua+']']=ta.facebox_center.x;wa['y['+ua+']']=ta.facebox_center.y;var xa=new p(va.normalize().toString()).addData(wa);return xa;}function pa(sa,ta){ha=sa;var ua=k.find(ga,'*',z),va=m.getPos(ga),wa=m.getPos(sa),xa=m.getDim(sa),ya=new m(wa.x+xa.x/2,wa.y+xa.y-va.y),za=ka(ya,ya.x-fa/2,ya.x+fa/2),ab=k.find(ua,'*',ba);ab.style.left=ya.x-za.x+"px";var bb=n.get(ha);if(bb.suggestions)ta.tokenizer.updateSuggestionsIds(bb.suggestions);za.setPos(ua);k.show(ua);var cb=k.find(ua,'*',ca);cb.focus();r.scrollTo(cb,wa.y);if(ia){clearTimeout(ia);ia=null;}}function qa(sa){var ta=k.find(ga,'*',z);if(ha){var ua=n.get(ha),va=n.get(ga),wa=oa(va,ua,sa);na(ha);wa.listen('finally',function(){var xa=k.find(ga,'*',aa);k.hide(xa);la(ga);});wa.send();k.hide(ha);k.hide(ta);k.find(ta,'*',ca).blur();ha=null;}ia=h(function(){la(ga);},ea);}var ra=function(sa,ta){if(u)return;ga=sa;u=true;var ua='touchend';if(s.IS_ANDROID)ua='click';if(ta&&ta.use_faceboxes){ja=[l.listen(ua,v,function(event){if(ha){var wa=k.find(ga,'*',z);k.find(wa,'*',ca).blur();k.hide(wa);ha=null;event.kill();}else la(event.getNode(v));}),l.listen(ua,x,function(event){var wa=k.find(ga,'*',da),xa=event.getNode(x);pa(xa,wa);event.kill();}),l.listen(ua,da,function(event){var wa=event.getNode(da),xa=k.find(wa,'*',ca);xa.focus();if(ha)r.scrollTo(xa,m.getPos(ha).y);event.kill();}),l.listen('Tokenizer-addedtoken',null,function(event){qa(event.getData().rel);})];}else ja=[l.listen('touchend',v,function(event){la(event.getNode(v));})];ja.push(l.listen('m:page:unload',null,ma));var va=k.scry(ga,'*',w);if(va.length>0&&n.get(va[0]).imgsrc){t(n.get(va[0]).imgsrc,function(){return la(ga);});}else la(ga);};g.main=ra;},null);
__d("XMobilePhotosSaveUnpublishedController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/_mupload_\/photo\/x\/saveunpublished\/",{thumbnail_width:{type:"Int"},thumbnail_height:{type:"Int"},waterfall_app_name:{type:"String"},waterfall_id:{type:"String"},waterfall_source:{type:"String"},filter_type:{type:"Int"},use_autoenhance:{type:"Exists",defaultValue:false},upload_id:{type:"String"},target_id:{type:"Int"},csid:{type:"String"},js_request_module_name:{type:"String"}});},null,{});
__d('supportsXHR2',['memoize'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){if(!window.FormData||!window.XMLHttpRequest)return false;var j=new XMLHttpRequest();return 'upload' in j&&'withCredentials' in j;}f.exports=h(i);},null);
__d("base64toUint8Array",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=atob(i),k=j.length,l=new Uint8Array(k);for(var m=0;m<k;m++)l[m]=j.charCodeAt(m);return l;}f.exports=h;},null);
__d("getExifOrientation",["DataViewPolyfill"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=b.DataView||h;function j(k,l){var m=new FileReader();m.onload=function(n){var o="Exif\0\0",p=0,q,r=new i(n.target.result);for(var s=0;s<250;s++)if(r.getUint8(s)===o.charCodeAt(p)){p+=1;q=s+1;if(p===o.length)break;}else p=0;if(!p){l(null);return;}var t;if(r.getUint8(q)==77&&r.getUint8(q+1)==77){t=false;}else if(r.getUint8(q)==73&&r.getUint8(q+1)==73){t=true;}else{l(null);return;}q+=2;q+=2;var u,v,w,x;u=r.getUint32(q,t);q+=u-8+4;v=r.getUint16(q,t);q+=2;for(var y=0;y<Math.min(25,v);y++){w=r.getUint16(q,t);q+=8;if(w==274){x=r.getUint16(q,t);l(x);return;}q+=4;}l(null);};m.readAsArrayBuffer(k);}f.exports=j;},null);
/**
 * Mega pixel image rendering library for iOS6 Safari
 *
 * @providesModule MegaPixImage
 * @preserve-header
 *
 * Fixes iOS6 Safari's image file rendering issue for large size image (over mega-pixel),
 * which causes unexpected subsampling when drawing it in canvas.
 * By using this library, you can safely render the image with proper stretching.
 *
 * Copyright (c) 2012 Shinichi Tomita <shinichi.tomita@gmail.com>
 * Released under the MIT license
 */__d("MegaPixImage",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();function h(o){var p=o.naturalWidth,q=o.naturalHeight;if(p*q>1024*1024){var r=document.createElement('canvas');r.width=r.height=1;var s=r.getContext('2d');s.drawImage(o,-p+1,0);return s.getImageData(0,0,1,1).data[3]===0;}else return false;}function i(o,p,q){var r=document.createElement('canvas');r.width=1;r.height=q;var s=r.getContext('2d');s.drawImage(o,0,0);var t=s.getImageData(0,0,1,q).data,u=0,v=q,w=q;while(w>u){var x=t[(w-1)*4+3];if(x===0){v=w;}else u=w;w=(v+u)>>1;}var y=(w/q);return (y===0)?1:y;}function j(o,p,q){var r=document.createElement('canvas');k(o,r,p,q);return r.toDataURL("image/jpeg",p.quality||.8);}function k(o,p,q,r){var s=o.naturalWidth,t=o.naturalHeight,u=q.width,v=q.height,w=p.getContext('2d');w.save();l(p,u,v,q.orientation);var x=h(o);if(x){s/=2;t/=2;}var y=1024,z=document.createElement('canvas');z.width=z.height=y;var aa=z.getContext('2d'),ba=r?i(o,s,t):1,ca=Math.ceil(y*u/s),da=Math.ceil(y*v/t/ba),ea=0,fa=0;while(ea<t){var ga=0,ha=0;while(ga<s){aa.clearRect(0,0,y,y);aa.drawImage(o,-ga,-ea);w.drawImage(z,0,0,y,y,ha,fa,ca,da);ga+=y;ha+=ca;}ea+=y;fa+=da;}w.restore();z=aa=null;}function l(o,p,q,r){switch(r){case 5:case 6:case 7:case 8:o.width=q;o.height=p;break;default:o.width=p;o.height=q;}var s=o.getContext('2d');switch(r){case 2:s.translate(p,0);s.scale(-1,1);break;case 3:s.translate(p,q);s.rotate(Math.PI);break;case 4:s.translate(0,q);s.scale(1,-1);break;case 5:s.rotate(.5*Math.PI);s.scale(1,-1);break;case 6:s.rotate(.5*Math.PI);s.translate(0,-q);break;case 7:s.rotate(.5*Math.PI);s.translate(p,-q);s.scale(-1,1);break;case 8:s.rotate(-.5*Math.PI);s.translate(-p,0);break;default:break;}}var m=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;function n(o){if(o instanceof Blob){var p=new Image();if(!m)throw Error("No createObjectURL function found to create blob url");p.src=m.createObjectURL(o);this.blob=o;o=p;}if(!o.naturalWidth&&!o.naturalHeight){var q=this;o.onload=function(){var r=q.imageLoadListeners;if(r){q.imageLoadListeners=null;for(var s=0,t=r.length;s<t;s++)r[s]();}};this.imageLoadListeners=[];}this.srcImage=o;}n.isSupported=!!m;n.prototype.render=function(o,p){if(this.imageLoadListeners){var q=this;this.imageLoadListeners.push(function(){q.render(o,p);});return;}p=p||{};var r=this.srcImage.naturalWidth,s=this.srcImage.naturalHeight,t=p.width,u=p.height,v=p.maxWidth,w=p.maxHeight,x=!this.blob||this.blob.type==='image/jpeg';if(t&&!u){u=(s*t/r)<<0;}else if(u&&!t){t=(r*u/s)<<0;}else{t=r;u=s;}if(v&&t>v){t=v;u=(s*t/r)<<0;}if(w&&u>w){u=w;t=(r*u/s)<<0;}var y={width:t,height:u};for(var z in p)y[z]=p[z];var aa=o.tagName.toLowerCase();if(aa==='img'){o.src=j(this.srcImage,y,x);}else if(aa==='canvas')k(this.srcImage,o,y,x);if(typeof this.onrender==='function')this.onrender(o);};f.exports=n;},null,{});
__d('MPhotoResizer',['base64toUint8Array','getExifOrientation','invariant','mixin','performanceNow','requestAnimationFrame','PhotosUploadWaterfallXMixin','PUWSteps','MegaPixImage','Vector'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t='data:image/jpeg;base64,';r=babelHelpers.inherits(u,k(n));s=r&&r.prototype;function u(){'use strict';s.constructor.call(this);this.$MPhotoResizer1=new q(960,960);this.$MPhotoResizer2=.85;}u.prototype.setFile=function(v){'use strict';this.$MPhotoResizer3=v;return this;};u.prototype.setDimensions=function(v){'use strict';this.$MPhotoResizer1=v;return this;};u.prototype.setQuality=function(v){'use strict';this.$MPhotoResizer2=v;return this;};u.prototype.setHandler=function(v){'use strict';this.$MPhotoResizer4=v;return this;};u.prototype.setWaterfall=function(v,w,x){'use strict';this.$MPhotoResizer5=v;this.$MPhotoResizer6=w;this.$MPhotoResizer7=x;return this;};u.prototype.resize=function(){'use strict';!this.$MPhotoResizer3?j(0):undefined;!this.$MPhotoResizer1?j(0):undefined;!this.$MPhotoResizer2?j(0):undefined;!this.$MPhotoResizer4?j(0):undefined;!this.$MPhotoResizer5?j(0):undefined;!this.$MPhotoResizer6?j(0):undefined;if(!p.isSupported){this.logStep(o.CLIENT_PROCESS_UNAVAILABLE,{error:'canvas_not_supported'});this.$MPhotoResizer4(this.$MPhotoResizer3);return;}if(!this.$MPhotoResizer8()){this.logStep(o.CLIENT_PROCESS_UNAVAILABLE,{error:'no_jpeg_output'});this.$MPhotoResizer4(this.$MPhotoResizer3);return;}this.logStep(o.CLIENT_PROCESS_BEGIN);var v=l();i(this.$MPhotoResizer3,(function(w){m((function(){var x=document.createElement('canvas'),y=new p(this.$MPhotoResizer3);y.onrender=(function(){m((function(){var z=x.toDataURL('image/jpeg',this.$MPhotoResizer2);x=null;z=z.substr(t.length);m((function(){var aa=h(z);z=null;var ba=new Blob([aa.buffer],{type:'image/jpeg'});this.logStep(o.CLIENT_PROCESS_SUCCESS,{timeResizing:l()-v,originalSize:this.$MPhotoResizer3&&this.$MPhotoResizer3.size,resizedSize:ba&&ba.size});this.$MPhotoResizer4(ba);}).bind(this));}).bind(this));}).bind(this);y.render(x,{maxWidth:this.$MPhotoResizer1.x,maxHeight:this.$MPhotoResizer1.y,orientation:w});}).bind(this));}).bind(this));};u.prototype.$MPhotoResizer8=function(){'use strict';var v=document.createElement('canvas');v.width=1;v.height=1;var w=v.toDataURL('image/jpeg');return w.substr(0,t.length)===t;};u.prototype.getWaterfallID=function(){'use strict';return this.$MPhotoResizer5;};u.prototype.getWaterfallAppName=function(){'use strict';return this.$MPhotoResizer6;};u.prototype.getWaterfallSource=function(){'use strict';return this.$MPhotoResizer7;};f.exports=u;},null);
__d('MPhotoUploadRequest',['ActorURI','CurrentUser','DOM','MRequest','PhotosUploadWaterfallXMixin','PUWSteps','XMobilePhotosSaveUnpublishedController','invariant','mixin','performanceNow','supportsXHR2','MPhotoResizer'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t,u;t=babelHelpers.inherits(v,p(l));u=t&&t.prototype;function v(){'use strict';u.constructor.call(this);this.$MPhotoUploadRequest1=0;}v.prototype.setClonedFileInput=function(y){'use strict';this.$MPhotoUploadRequest2=y;return this;};v.prototype.setAttachedFile=function(y){'use strict';this.$MPhotoUploadRequest3=y;return this;};v.prototype.setDTSG=function(y){'use strict';this.$MPhotoUploadRequest4=y;return this;};v.prototype.setUploadDomain=function(y){'use strict';this.$MPhotoUploadRequest5=y;return this;};v.prototype.setWaterfall=function(y,z,aa){'use strict';this.$MPhotoUploadRequest6=y;this.$MPhotoUploadRequest7=z;this.$MPhotoUploadRequest8=aa;return this;};v.prototype.setHandler=function(y){'use strict';this.$MPhotoUploadRequest9=y;return this;};v.prototype.setProgressHandler=function(y){'use strict';this.$MPhotoUploadRequest10=y;return this;};v.prototype.setErrorHandler=function(y){'use strict';this.$MPhotoUploadRequest11=y;return this;};v.prototype.setThumbnailDimensions=function(y){'use strict';this.$MPhotoUploadRequest12=y;return this;};v.prototype.setShouldResize=function(y){'use strict';this.$MPhotoUploadRequest13=y;return this;};v.prototype.setTargetID=function(y){'use strict';this.$MPhotoUploadRequest14=y;return this;};v.prototype.setActorID=function(y){'use strict';this.$MPhotoUploadRequest15=y;return this;};v.prototype.setJpegResizer=function(y){'use strict';return this;};v.prototype.send=function(){'use strict';!this.$MPhotoUploadRequest2?o(0):undefined;!this.$MPhotoUploadRequest5?o(0):undefined;!this.$MPhotoUploadRequest4?o(0):undefined;!this.$MPhotoUploadRequest6?o(0):undefined;!this.$MPhotoUploadRequest7?o(0):undefined;!this.$MPhotoUploadRequest8?o(0):undefined;!this.$MPhotoUploadRequest9?o(0):undefined;!this.$MPhotoUploadRequest12?o(0):undefined;!(!this.$MPhotoUploadRequest16&&!this.$MPhotoUploadRequest17)?o(0):undefined;if(!r()){this.$MPhotoUploadRequest18();}else this.$MPhotoUploadRequest19();return this;};v.prototype.$MPhotoUploadRequest20=function(y,z){'use strict';this.logStep(y,babelHelpers._extends({retriesNeeded:this.$MPhotoUploadRequest1},z||{}));};v.prototype.abort=function(y){'use strict';if(!this.$MPhotoUploadRequest2)return;this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_CANCEL,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,progress:y});if(r()){this.$MPhotoUploadRequest21();}else this.$MPhotoUploadRequest22();};v.prototype.retry=function(){'use strict';this.$MPhotoUploadRequest1++;this.abort();this.send();};v.prototype.$MPhotoUploadRequest23=function(){'use strict';var y=this.$MPhotoUploadRequest2.files;return (y&&y.item&&y.item(0)&&y.item(0).size);};v.prototype.$MPhotoUploadRequest24=function(){'use strict';var y=n.getURIBuilder().setInt('thumbnail_width',this.$MPhotoUploadRequest12.x).setInt('thumbnail_height',this.$MPhotoUploadRequest12.y).setString('waterfall_id',this.$MPhotoUploadRequest6).setString('waterfall_app_name',this.$MPhotoUploadRequest7).setString('waterfall_source',this.$MPhotoUploadRequest8).setInt('target_id',this.$MPhotoUploadRequest14).getURI().setProtocol(this.$MPhotoUploadRequest5.getProtocol()).setDomain(this.$MPhotoUploadRequest5.getDomain());return h.create(y,this.$MPhotoUploadRequest15);};v.prototype.$MPhotoUploadRequest19=function(){'use strict';var y=this.$MPhotoUploadRequest3,z=this.$MPhotoUploadRequest13||'no_resize';if(y&&z=='canvas_resize'){new s().setFile(y).setWaterfall(this.$MPhotoUploadRequest6,this.$MPhotoUploadRequest7,this.$MPhotoUploadRequest8).setHandler((function(aa){this.$MPhotoUploadRequest25(aa);}).bind(this)).resize();}else this.$MPhotoUploadRequest25(y);};v.prototype.$MPhotoUploadRequest25=function(y){'use strict';var z=new FormData();z.append(this.$MPhotoUploadRequest2.name,y);this.fileSize=y.size;this.transferStartTime=q();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var aa=this.$MPhotoUploadRequest16=new k(this.$MPhotoUploadRequest24()).setCORS(true).setData({fb_dtsg:this.$MPhotoUploadRequest4}).setRawData(z);aa.listen('open',function(ba){var ca=ba.getTransport();ca.withCredentials=true;});aa.listen('done',(function(ba){this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ba.fbid});this.$MPhotoUploadRequest9(ba);}).bind(this));aa.listen('error',(function(ba){this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_FAIL,{error_type:'mrequest_fail',elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11(ba);}).bind(this));aa.listen('uploadprogress',(function(ba){this.$MPhotoUploadRequest10&&this.$MPhotoUploadRequest10(ba);}).bind(this));aa.send();};v.prototype.$MPhotoUploadRequest21=function(){'use strict';this.$MPhotoUploadRequest16&&this.$MPhotoUploadRequest16.abort();this.$MPhotoUploadRequest16=null;};v.prototype.$MPhotoUploadRequest26=function(y,z){'use strict';return j.create('input',{type:'hidden',name:y,value:z});};v.prototype.$MPhotoUploadRequest18=function(){'use strict';var y='MPhotoUpload'+w++,z=this.$MPhotoUploadRequest17=j.create('iframe',{name:y,id:y});z.style.display='none';var aa=this.$MPhotoUploadRequest27=j.create('form',{target:y,action:this.$MPhotoUploadRequest24().toString(),method:'POST',enctype:'multipart/form-data'});aa.style.display='none';var ba={fb_dtsg:this.$MPhotoUploadRequest4,__a:1,__user:i.getID(),upload_id:y};for(var ca in ba)j.appendContent(aa,this.$MPhotoUploadRequest26(ca,ba[ca]));j.appendContent(document.body,z);j.appendContent(document.body,aa);j.appendContent(aa,this.$MPhotoUploadRequest2);this.fileSize=this.$MPhotoUploadRequest23();x[y]=(function(ea){if(!ea){this.$MPhotoUploadRequest28('no_payload');return;}delete x[y];this.$MPhotoUploadRequest22();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_SUCCESS,{elapsed_time:q()-this.transferStartTime,bytes:this.fileSize,fbid:ea.fbid});this.$MPhotoUploadRequest9(ea);}).bind(this);z.onerror=this.$MPhotoUploadRequest28.bind('iframe_onerror');this.transferStartTime=q();this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_BEGIN,{bytes:this.fileSize});var da=window.location.hostname.match(/\.(facebook\.sg|facebookcorewwwi\.onion)$/);document.domain=da?da[1]:'facebook.com';aa.submit();};v.prototype.$MPhotoUploadRequest28=function(y){'use strict';this.$MPhotoUploadRequest20(m.CLIENT_TRANSFER_FAIL,{error_type:y,elapsed_time:q()-this.transferStartTime,bytes:this.fileSize});this.$MPhotoUploadRequest11&&this.$MPhotoUploadRequest11();this.$MPhotoUploadRequest22();};v.prototype.$MPhotoUploadRequest22=function(){'use strict';this.$MPhotoUploadRequest17&&j.remove(this.$MPhotoUploadRequest17);this.$MPhotoUploadRequest17=null;this.$MPhotoUploadRequest27&&j.remove(this.$MPhotoUploadRequest27);this.$MPhotoUploadRequest27=null;};v.prototype.getWaterfallID=function(){'use strict';return this.$MPhotoUploadRequest6;};v.prototype.getWaterfallAppName=function(){'use strict';return this.$MPhotoUploadRequest7;};v.prototype.getWaterfallSource=function(){'use strict';return this.$MPhotoUploadRequest8;};v.handleResponse=function(y,z){'use strict';x[y](z);};var w=0,x={};f.exports=v;},null);
__d('MMultiPhotoUploaderAttachment.react',['MMultiPhotoUploaderAttachmentState','MLoadingIndicator.react','MProgressBar.react','React','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=2,p=.7,q=500,r=10000,s=250,t=k.createClass({displayName:'Attachment',getInitialState:function(){return {previewLoaded:false};},componentDidMount:function(){if(this.props.state===h.UPLOADED&&!this.state.previewLoaded)this.loadPreview();},componentDidUpdate:function(u,v){if(this.refs.progressBar)if(this.props.state===h.SENDING&&this.props.loaded&&this.props.totalSize)if(this.props.loaded===this.props.totalSize){this.refs.progressBar.animate(100,r);}else{var w=100*p*this.props.loaded/this.props.totalSize;this.refs.progressBar.animate(w,q);}if(u.state!==h.UPLOADED&&this.props.state===h.UPLOADED)this.loadPreview();if(!v.previewLoaded&&this.state.previewLoaded&&this.props.onPreviewLoaded)this.props.onPreviewLoaded();},getLoadingIndicator:function(){if(this.props.loaded>0){if(!this.state.previewLoaded){return this.getProgressBar();}else return this.getSpinner();}else return this.getSpinner();},getProgressBar:function(){if(this.props.state!==h.SENDING&&this.props.state!==h.UPLOADED)return null;if(this.state.previewLoaded)return null;return (k.createElement('div',{className:"_r6h"},k.createElement(j,{initialValue:0,ref:'progressBar'})));},getSpinner:function(){if(this.props.state!==h.SENDING&&!this.props.isPollingTagSuggestions)return null;return (k.createElement('div',{className:this.props.isPollingTagSuggestions?"_2d1s":''},k.createElement(i,{className:"_5r-2"})));},loadPreview:function(){if(this.refs.progressBar)this.refs.progressBar.animate(100,r);var u=new Image();u.onload=(function(){if(this.refs.progressBar){this.refs.progressBar.animate(100,s);setTimeout((function(){this.setState({previewLoaded:true});}).bind(this),s);}else this.setState({previewLoaded:true});}).bind(this);u.src=this.props.imageURI;if(u.complete||u.width+u.height>0){u.onload=null;this.setState({previewLoaded:true});}},getPreview:function(u,v){if(this.props.state!==h.UPLOADED)return null;if(!this.state.previewLoaded)return null;return (k.createElement('img',{className:"_5r-3",src:this.props.imageURI,width:u,height:v}));},getError:function(){if(this.props.state!==h.ERROR)return null;return k.createElement('div',{className:"_5r-4"});},getAbortButton:function(){var u=this.props.shouldShowWhiteDesign?"_3lx9":"_5r-6",v=this.props.shouldShowWhiteDesign?"_3lxa":"_5r-5";return (k.createElement('div',{'aria-label':m._("Remove photo"),className:v,'data-sigil':'touchable',onClick:this.props.onRemoveClick,role:'button',tabIndex:'0'},k.createElement('div',{className:u})));},getTagCountIndicator:function(){if(this.props.state!==h.UPLOADED)return null;if(!this.state.previewLoaded)return null;var u=this.props.tagCount;if(!u)return null;var v="_5pt"+(u===1?' '+"_5pu":'')+(u===2?' '+"_5pv":'')+(u>2?' '+"_5pw":'');return (k.createElement('div',{className:v}));},getPhotoBorder:function(){var u=null;if(this.props.shouldShowWhiteDesign)u=k.createElement('div',{className:"_23rn"});return u;},render:function(){var u;if(this.props.shouldShowWhiteDesign){u="_s50";}else if(this.props.shouldShowLargeThumbnails){u="_3vnj";}else u="_51s2";var v=this.props.previewSize-o,w=v;if(this.props.state===h.UPLOADED&&this.state.previewLoaded&&this.props.shouldShowLargeThumbnails)w=Math.floor(this.props.thumbnail_width*v/this.props.thumbnail_height);var x={width:w};return (k.createElement('div',{className:n(this.props.className,u),style:x},k.createElement('div',{onClick:this.props.onThumbnailClicked,'data-sigil':'touchable'},this.getLoadingIndicator(),this.getPreview(w,v),this.getError(),this.getTagCountIndicator(),this.getPhotoBorder()),this.getAbortButton()));}});f.exports=t;},null);
__d('MPhotoUploadDisable',['DOM','Stratcom','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE:j._("Sorry, photo uploading isn't available for Safari in iOS 8.0 and 8.0.1. Apple has fixed this in the latest version of iOS. Please upgrade to iOS 8.0.2 and try again."),alertIOS8FileUploadDisabled:function(event){alert(this.IOS_8_PHOTO_UPLOAD_DISABLE_MESSAGE);event.kill();},disableIOS8FileUpload:function(l){this._listeners=[h.listen(l,'click',null,this.alertIOS8FileUploadDisabled.bind(this)),i.listen('m:page:unload',null,this._cleanup.bind(this))];},_cleanup:function(){this._listeners.forEach(function(l){l.remove();});}};f.exports=k;},null);
__d('MPhotoUploadFileInput',['DOM','MTouchClick','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this.$MPhotoUploadFileInput1=l;j.listen('m:page:unload',null,(function(){if(this.$MPhotoUploadFileInput2)this.$MPhotoUploadFileInput2.remove();if(this.$MPhotoUploadFileInput3)this.$MPhotoUploadFileInput3.remove();}).bind(this));}k.prototype.setChangeHandler=function(l){'use strict';if(this.$MPhotoUploadFileInput4)this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput4=l;this.$MPhotoUploadFileInput2=h.listen(this.$MPhotoUploadFileInput1,'change',null,l);};k.prototype.setClickHandler=function(l){'use strict';if(this.$MPhotoUploadFileInput5)this.$MPhotoUploadFileInput3.remove();this.$MPhotoUploadFileInput5=l;this.$MPhotoUploadFileInput3=h.listen(this.$MPhotoUploadFileInput1,'click',null,l);};k.prototype.getDOMElement=function(){'use strict';return this.$MPhotoUploadFileInput1;};k.prototype.cloneDOMNode=function(){'use strict';var l=this.$MPhotoUploadFileInput1;this.$MPhotoUploadFileInput1=l.cloneNode(true);this.$MPhotoUploadFileInput1.value='';h.replace(l,this.$MPhotoUploadFileInput1);if(this.$MPhotoUploadFileInput4){this.$MPhotoUploadFileInput2.remove();this.$MPhotoUploadFileInput2=h.listen(this.$MPhotoUploadFileInput1,'change',null,this.$MPhotoUploadFileInput4);}if(this.$MPhotoUploadFileInput5){this.$MPhotoUploadFileInput3.remove();this.$MPhotoUploadFileInput3=h.listen(this.$MPhotoUploadFileInput1,'click',null,this.$MPhotoUploadFileInput5);}return l;};k.prototype.click=function(l){'use strict';i.click(this.$MPhotoUploadFileInput1,{getRawEvent:function(){return l.nativeEvent;}});};f.exports=k;},null);
__d('MMultiPhotoUploaderPlusAttachment.react',['MXUILayout.react','MXUILayoutFillColumn.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=j.createClass({displayName:'PlusAttachment',getAttachmentChildContainer:function(){if(!this.props.shouldShowWhiteDesign)return null;var n=this.props.shouldShowAddPhotoLabel?j.createElement('div',{className:"_vbw"},l._("photo")):null;return (j.createElement(h,null,j.createElement(i,{alignself:'center',className:"_2-24"},j.createElement('div',{className:"_vbx"},j.createElement('div',{className:"_vby"}),n))));},getAttachmentClass:function(){var n,o=this.props.largeThumbnails;if(this.props.shouldShowWhiteDesign){n="_vbz";}else n=(o?"_3vnj":'')+(!o?' '+"_51s2":'')+(o?' '+"_14y0":'')+(!o?' '+"_5e0r":'');return n;},render:function(){var n=this.getAttachmentClass(),o=this.getAttachmentChildContainer();return (j.createElement('div',{'aria-label':l._("Add photo"),className:n,'data-sigil':'touchable',onClick:this.props.onClick,role:'button',tabIndex:'0'},o));}});f.exports=m;},null);
__d("MMultiPhotoUploaderHiddenInputs.react",["React"],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.PropTypes,j=h.createClass({displayName:"HiddenInputs",propTypes:{fbids:i.array.isRequired,waterfallSource:i.string},render:function(){var k=null;if(this.props.waterfallSource)k=h.createElement("input",{name:"waterfall_source",type:"hidden",value:this.props.waterfallSource});return (h.createElement("div",null,k,this.props.fbids.map(function(l){return (h.createElement("input",{key:l,type:"hidden",name:'photo_ids['+l+']',value:l}));})));}});f.exports=j;},null);
__d('MMultiPhotoUploader.react',['cx','fbt','intlNumUtils','Bootloader','MPhotoUploadRequest','PhotosUploadWaterfallXMixin','PUWSteps','React','ReactDOM','Stratcom','Vector','MMultiPhotoUploaderAttachment.react','MMultiPhotoUploaderAttachmentState','MPhotoUploadDisable','MPhotoUploadFileInput','MMultiPhotoUploaderPlusAttachment.react','MMultiPhotoUploaderHiddenInputs.react','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z=o.PropTypes,aa=0,ba=80,ca=56,da,ea=o.createClass({displayName:'MMultiPhotoUploader',propTypes:{dtsg:z.string.isRequired,fileInput:z.instanceOf(v).isRequired,formHiddenInputs:z.instanceOf(HTMLElement).isRequired,uploadDomain:z.instanceOf(y).isRequired,waterfallID:z.string.isRequired,waterfallAppName:z.string.isRequired,waterfallSource:z.string.isRequired,actorID:z.string,targetID:z.string,singlePhoto:z.bool,maxPhotosAllowed:z.number,initCollapsed:z.bool,logFlowBeginOnClick:z.bool,shouldScroll:z.bool,shouldShowLargeThumbnails:z.bool,shouldShowWhiteDesign:z.bool,shouldShowAddPhotoLabel:z.bool,showDropShadow:z.bool,disableIOS8SafariAlert:z.bool,onUploadSuccess:z.func,onRemove:z.func,onThumbnailClicked:z.func,onUploadStarted:z.func,initialPhotos:z.array},mixins:[m],setCollapsed:function(fa){this.setState({collapsed:fa});},isCollapsed:function(){return this.state.collapsed;},getAttachmentCount:function(){return this.attachments.length;},hasAttachments:function(){return this.attachments.length>0;},clearAttachments:function(){this.setAttachments(this.attachments.filter(function(fa){if(fa.state===t.SENDING)fa.request.abort();return false;}));},getInitialState:function(){var fa=this.props.initialPhotos;if(fa!==null){for(var ga=0;ga<fa.length;ga++){fa[ga].id=aa++;fa[ga].state=t.UPLOADED;}var ha={};ha[t.UPLOADED]=fa.length;q.invoke('MMultiPhotoUploader:attachments:change',null,ha);}this.attachments=fa?fa:[];return {attachments:this.attachments,collapsed:this.props.initCollapsed};},numAttachmentsWithState:function(fa){return this.attachments.filter(function(ga){return ga.state===fa;}).length;},_numPollingAttachments:function(){return this.attachments.filter(function(fa){return fa.isPollingTagSuggestions;}).length;},isMaxAttachmentReached:function(){return this.attachments.length>=this.props.maxPhotosAllowed;},setAttachments:function(fa){q.invoke('multi-photos-attachment-change',null,{attachments:fa,multiPhotoUploader:this});this.setAttachmentsSilent(fa);},setAttachmentsSilent:function(fa){this.attachments=fa;this.setState({attachments:fa});var ga=this.props.fileInput.getDOMElement();ga.disabled=this.isMaxAttachmentReached();q.invoke('multi-photos-change',null,{input_id:ga.id});var ha={input_id:ga.id};for(var ia in t){if(!t.hasOwnProperty(ia)||typeof t[ia]!=='string')continue;var ja=t[ia];ha[ja]=this.numAttachmentsWithState(ja);}ha.polling=this._numPollingAttachments();q.invoke('MMultiPhotoUploader:attachments:change',null,ha);},addAttachment:function(fa){q.invoke('MMultiPhotoUploader:attachments:add',null,{photo_count:fa.length||1});this.setAttachments(this.attachments.concat([fa]));},removeAttachment:function(fa){q.invoke('MMultiPhotoUploader:attachments:remove',null,{photo_count:1});this.setAttachments(this.attachments.filter((function(ga){if(ga.id===fa){if(ga.state===t.SENDING){var ha=0;if(ga.totalSize)ha=Math.floor(100*(ga.loaded/ga.totalSize));ga.request.abort(ha);}else this.logStep(n.CLIENT_UPLOAD_REMOVE,{fbid:ga.fbid});if(ga.fbid)this.props.onRemove&&this.props.onRemove(ga.fbid);return false;}return true;}).bind(this)));},updateAttachment:function(fa){this.setAttachments(this.attachments.map(function(ga){if(ga.id===fa.id)return fa;return ga;}));},getAttachment:function(fa){return this.attachments.filter(function(ga){return ga.id===fa;})[0];},setAttachmentProps:function(fa,ga){var ha=this.getAttachment(fa),ia={};for(var ja in ha)ia[ja]=ha[ja];for(ja in ga)ia[ja]=ga[ja];this.updateAttachment(ia);},retryAttachment:function(fa){var ga=this.getAttachment(fa);this.logStep(n.CLIENT_ATTEMPT_RETRY,{fbid:ga.fbid});ga.request.retry();this.updateAttachment({id:fa,state:'sending',request:ga.request});},setAttachmentTagCounts:function(fa){this.setAttachmentsSilent(this.attachments.map(function(ga){ga.tagCount=fa[ga.id];return ga;}));},componentDidMount:function(){this.props.fileInput.setChangeHandler(this.onFileInputChange);this.props.fileInput.setClickHandler(this.onFileInputClick);if(!this.hasAttachments()&&!this.props.logFlowBeginOnClick)this.logStep(n.CLIENT_FLOW_BEGIN);this.renderHiddenInputs();this.resizeAndScroll();},onFileInputChange:function(){var fa=this.props.fileInput.getDOMElement();q.invoke('MMultiPhotoUploader:input:change',null,{input:fa});this.uploadPhotos(fa.files);},onFileInputClick:function(event){if(this.props.disableIOS8SafariAlert===true)u.alertIOS8FileUploadDisabled(event);if(!this.hasAttachments()&&this.props.logFlowBeginOnClick)this.logStep(n.CLIENT_FLOW_BEGIN);this.logStep(n.CLIENT_SELECT_BEGIN);},uploadPhotos:function(fa){if(fa.length===0){this.logStep(n.CLIENT_SELECT_FAIL);return;}var ga=this.props.fileInput.cloneDOMNode();for(var ha=0;ha<fa.length;ha++){var ia=fa[ha];if(ia.name===''&&ia.fileName===''&&ia.size===0&&ia.fileSize===0){this.logStep(n.CLIENT_SELECT_FAIL);continue;}this.logStep(n.CLIENT_SELECT_SUCCESS);var ja=aa++,ka=this.props.shouldShowLargeThumbnails?ba:ca,la=this.props,ma=la.targetID,na=la.actorID,oa=new l().setClonedFileInput(ga).setAttachedFile(ia).setUploadDomain(this.props.uploadDomain).setThumbnailDimensions(new r(ka,ka)).setDTSG(this.props.dtsg).setWaterfall(this.props.waterfallID,this.props.waterfallAppName,this.props.waterfallSource).setHandler(this.handleUploadSuccess.bind(this,ja)).setErrorHandler(this.handleUploadError.bind(this,ja)).setProgressHandler(this.handleUploadProgress.bind(this,ja)).setTargetID(ma&&j.parseNumber(ma)).setActorID(na&&j.parseNumber(na)).send();this.props.onUploadStarted&&this.props.onUploadStarted();if(this.props.singlePhoto)this.clearAttachments();this.addAttachment({id:ja,state:'sending',request:oa});this.setCollapsed(false);}},handleUploadError:function(fa){var ga=this.getAttachment(fa);this.updateAttachment({id:fa,state:'error',request:ga.request});},handleUploadProgress:function(fa,ga){var ha=this.getAttachment(fa);this.updateAttachment({id:fa,state:ha.state,request:ha.request,loaded:ga.loaded,totalSize:ga.totalSize});},handleUploadSuccess:function(fa,ga){if(!ga.fbid){this.handleUploadError(fa);return;}var ha=this.getAttachment(fa);this.updateAttachment({id:fa,state:'uploaded',fbid:ga.fbid,imageURI:ga.thumbnail_uri,thumbnail_width:ga.thumbnail_width,thumbnail_height:ga.thumbnail_height,loaded:ha.loaded,totalSize:ha.totalSize,previewURI:ga.preview_uri});this.props.onUploadSuccess&&this.props.onUploadSuccess(ga.fbid,fa);},onPlusClick:function(event){this.props.fileInput.click(event);},onRemoveClick:function(fa){var ga=this.getAttachment(fa),ha=false;if(ga.state===t.SENDING||ga.state===t.ERROR)ha=confirm(i._("This photo didn't upload. Do you want to try again?"));if(ha){this.retryAttachment(fa);}else this.removeAttachment(fa);},componentWillUpdate:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller)this.refs.scroller.checkShouldScrollToEnd();},componentDidUpdate:function(){this.renderHiddenInputs();this.resizeAndScroll();},renderHiddenInputs:function(){var fa=this.state.attachments.filter(function(ga){return ga.state===t.UPLOADED;}).map(function(ga){return ga.fbid;});p.render(o.createElement(x,babelHelpers._extends({},this.props,{fbids:fa})),this.props.formHiddenInputs);},resizeAndScroll:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},getPlusAttachment:function(){if(this.props.singlePhoto&&this.state.collapsed)return null;if(this.isMaxAttachmentReached())return null;return (o.createElement(w,{onClick:this.onPlusClick,largeThumbnails:this.props.shouldShowLargeThumbnails,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,shouldShowAddPhotoLabel:this.props.shouldShowAddPhotoLabel}));},adjustScroller:function(){if(this.props.shouldScroll&&this.refs&&this.refs.scroller){this.refs.scroller.checkShouldScrollToEnd();this.refs.scroller.resizeScroller();this.refs.scroller.scrollHorizontallyToEnd();}},render:function(){if(this.state.collapsed)return o.createElement('div',null);var fa=this.state.attachments.map((function(ha){var ia=this.props.shouldShowLargeThumbnails?ba:ca;return (o.createElement(s,babelHelpers._extends({},ha,{key:ha.id,shouldShowLargeThumbnails:this.props.shouldShowLargeThumbnails,previewSize:ia,shouldShowWhiteDesign:this.props.shouldShowWhiteDesign,onRemoveClick:(function(){this.onRemoveClick(ha.id);}).bind(this),onPreviewLoaded:(function(){this.adjustScroller();}).bind(this),loaded:ha.loaded,totalSize:ha.totalSize,onThumbnailClicked:(function(){this.props.onThumbnailClicked&&this.props.onThumbnailClicked(ha);}).bind(this)})));}).bind(this)),ga=this.props.shouldScroll&&this.state.attachments.length>1;if(ga)if(!da){k.loadModules(["MMultiPhotoUploaderSimpleScroller"],(function(ha){da=ha;this.forceUpdate();}).bind(this));}else return (o.createElement(da,{options:{scrollingY:false},className:(!this.props.shouldShowLargeThumbnails?"_1upb":'')+(' '+"_xy")+(this.props.showDropShadow?' '+"_bgx":''),thumbnailSize:ba,ref:'scroller'},fa,this.getPlusAttachment()));return (o.createElement('div',{className:"_5cqb"+(ga?' '+"_2nym":'')},fa,this.getPlusAttachment()));},getWaterfallID:function(){return this.props.waterfallID;},getWaterfallAppName:function(){return this.props.waterfallAppName;},getWaterfallSource:function(){return this.props.waterfallSource;}});f.exports=ea;},null);
__d('MMultiPhotoUploaderInitReact',['$','MMultiPhotoUploaderAttachmentState','DOM','ReactComponentRenderer','Stratcom','StratcomManager','MMultiPhotoUploader.react','MPhotoUploadFileInput','URI','PUWSteps'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();function r(s,t){'use strict';var u=s.previewGridElem||h(s.previewGridId),v=s.targetFormElem||h(s.targetFormId),w=s.inputElem||h(s.inputId),x=document.createElement('div');j.insertBefore(u,x);var y=document.createElement('div');j.appendContent(v,y);this.$MMultiPhotoUploaderInitReact1=new k(n,x);this.$MMultiPhotoUploaderInitReact1.setProps({fileInput:new o(w),formHiddenInputs:y,uploadDomain:new p(s.uploadDomain),dtsg:s.dtsg,shouldResize:s.shouldResize,singlePhoto:+s.maxPhotosAllowed===1,maxPhotosAllowed:s.maxPhotosAllowed,waterfallID:s.waterfallID,waterfallAppName:s.waterfallAppName,waterfallSource:s.waterfallSource,initCollapsed:s.initCollapsed,logFlowBeginOnClick:s.logFlowBeginOnClick,targetID:s.targetID,actorID:s.actorID,shouldScroll:s.horizontalScrolling,shouldShowLargeThumbnails:s.largeThumbnails,shouldShowWhiteDesign:s.useWhiteDesign,shouldShowAddPhotoLabel:s.showPhotoLabel,showDropShadow:s.composerDropShadow,disableIOS8SafariAlert:s.disableIOS8SafariAlert,initialPhotos:t});m.enableDispatch(window,'reset');l.listen('reset',['id:'+s.targetFormId],(function(){this.resetState();}).bind(this));l.listen('MActorSelector-actorChange',null,(function(event){if(event.getData().targetID===s.targetID){this.resetState();this.$MMultiPhotoUploaderInitReact1.setProps({actorID:event.getData().actorID,maxPhotosAllowed:event.getData().maxPhotosAllowed,singlePhoto:event.getData().maxPhotosAllowed===1});}}).bind(this));l.listen('MStructuredComposer-canceled',null,(function(){if(!this.$MMultiPhotoUploaderInitReact1.component.isCollapsed())this.$MMultiPhotoUploaderInitReact1.component.logStep(q.CLIENT_FLOW_CANCEL,{volume:this.$MMultiPhotoUploaderInitReact1.component.getAttachmentCount()});}).bind(this));}r.prototype.logClientPost=function(s){'use strict';this.$MMultiPhotoUploaderInitReact1.component.logStep(q.CLIENT_FLOW_POST,{volume:this.$MMultiPhotoUploaderInitReact1.component.getAttachmentCount()},s);};r.prototype.alterPreviewGrid=function(s){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.setCollapsed(!s);};r.prototype.getUploader=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1;};r.prototype.resetState=function(){'use strict';this.$MMultiPhotoUploaderInitReact1.component.clearAttachments();return this.alterPreviewGrid(false);};r.prototype.hasPhotos=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.numAttachmentsWithState(i.UPLOADED)>0;};r.prototype.getPhotosCount=function(){'use strict';return this.$MMultiPhotoUploaderInitReact1.component.numAttachmentsWithState(i.UPLOADED);};r.prototype.uploadPhotos=function(s){'use strict';this.$MMultiPhotoUploaderInitReact1.component.uploadPhotos(s);};f.exports=r;},null);
__d('MTouchTransferFocus',['CSS','DOM','Stratcom','MViewport','DataStore'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='transfer-focus-container',n='focus-provider',o='focus-receiver',p='focused';j.listen(['click','touchend'],[m,n],function(q){var r=q.getNode(n),s=l.get(r);if(s.onclickIsSet)return;var t=q.getNode(m);r.onclick=function(){h.conditionClass(t,p,true);var u=i.scry(t,'input',o)[0];if(u){u.focus();var v=l.get(t);if(v.hideaddressbar)setTimeout(function(){if(k.getScrollTop()<1)k.scrollTo(0,1);},0);}};s.onclickIsSet=true;});j.listen('blur',[m,o],function(q){h.conditionClass(q.getNode(m),p,false);});},null);
__d("MImagePreloader",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){for(var j=0;j<i.length;j++){var k=new Image();k.src=i[j];}}g.init=h;},null);
__d('MJSPlaceholder',['DOM','Stratcom','StratcomManager','Parent'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={init:function(m,n){var o=m.getElementsByTagName('textarea')[0];function p(event){if(!o.value){h.show(n);}else h.hide(n);}var q=i.listen('MJSPlaceholder',null,p),r=('oninput' in o),s=h.listen(o,r?'input':'change',null,p),t=k.byTag(o,'form');if(t){j.enableDispatch(t,'reset');var u=h.listen(t,'reset',null,p);}var v=r?null:h.listen(o,'keyup',null,p);i.listen('m:page:unload',null,function(){i.removeCurrentListener();s.remove();u&&u.remove();v&&v.remove();q.remove();});}};f.exports=l;},null);
__d('MMentions',['DataStore','DOM','HashtagParser','HTML','MJSEnvironment','MParent','MTouchHelper','MTypeaheadGKs','MViewport','Scroll','Stratcom','StratcomManager','Style','Vector','debounceCore','eventsMixinDeprecated','getActiveElement','fbt','setIntervalAcrossTransitions','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){if(c.__markCompiled)c.__markCompiled();var ba={},ca=o.mentions_code_cleanup;function da(fa){var ga=ba[fa];if(!ga){ga='<br>\n'.repeat(fa.length);ba[fa]=ga;}return ga;}function ea(fa,ga,ha){'use strict';this._onBeforeEdit=this._onBeforeEdit.bind(this);this._onEdit=this._onEdit.bind(this);this._onFocusChange=this._onFocusChange.bind(this);this._onQueryResult=this._onQueryResult.bind(this);this._onSuggestionClick=this._onSuggestionClick.bind(this);this._onSuggestionTouch=this._onSuggestionTouch.bind(this);this._onBodyTouch=this._onBodyTouch.bind(this);this._processInput=this._processInput.bind(this);this._sync=this._sync.bind(this);this._syncAndParse=this._syncAndParse.bind(this);this._syncShadow=this._syncShadow.bind(this);this._updatePosition=this._updatePosition.bind(this);this._hideSuggestion=this._hideSuggestion.bind(this);this._hideSuggestionInternal=this._hideSuggestionInternal.bind(this);this._forceInputPosition=this._forceInputPosition.bind(this);this._parse=this._parse.bind(this);this._renderHashtags=this._renderHashtags.bind(this);this._mentionId=fa.id;this._bottomMargin=null;var ia=fa.getElementsByTagName('textarea')[0];this.minDistance=ea._MIN_DISTANCE;this._listeners=[];this._editListeners=[];this._query=null;this._queryResult=null;this._focused=false;this._disabled=false;this._hasHashtags=false;this._ignoreFocusChange=false;this._ignoreFocusChangeTimeout=null;this.shouldShowHashtags=false;this._enforceStringMatch=true;this._typeObjects=null;this._typeObjectsOrder=null;this._uids={};this._weakReferences={};this._source=ga;this._element=fa;this._input=ia;this._queryStringMatcher=/[^\s]+$/;var ja=h.get(this._input);this._initialWeakReferences=ja.initial_weak_references?ja.initial_weak_references:{};this._eventData={input:this._input,hasTags:false};this._shadow=i.create('div',{className:'mentions-shadow','aria-hidden':true},'');if(!ca)this._measurer=i.create('div',{className:'mentions-measurer','aria-hidden':true});ea._suggestion=ea._suggestion||i.create('div',{className:'mentions-suggest'});this._hiddenInput=i.create('input',{type:'hidden',name:ia.name,sigil:'mentionsHiddenInput'});ia.removeAttribute('name');i.uniqID(ia);this._syncStyles(this._shadow);if(!ca)this._syncStyles(this._measurer);s.enableDispatch(ia,'cut');s.enableDispatch(ia,'paste');s.enableDispatch(ia,'scroll');this._listeners.push(i.listen(ia,'blur',null,this._onFocusChange),i.listen(ia,'focus',null,this._onFocusChange),i.listen(this._input,'scroll',null,this._syncShadow));this._listeners.push(r.listen('MMentions:update',null,this._sync),r.listen('MMentions:reset',null,this._syncAndParse),r.listen('MMentions:removeHiddenInput',null,this._removeHiddenInput.bind(this)),r.listen('MMentions:disable',null,this._disable.bind(this)),r.listen('MMentions:enable',null,this._enable.bind(this)));if(this._input.form){s.enableDispatch(this._input.form,'reset');this._onSubmit=this._onSubmit.bind(this);this._listeners.push(i.listen(this._input.form,'submit',null,this._onSubmit),i.listen(this._input.form,'reset',null,this._onEdit));}this._listeners.push(r.listen('MMentions:decorations:hide',null,(function(event){i.hide(this._shadow);if(!ca)i.hide(this._measurer);}).bind(this)));this._listeners.push(r.listen('MMentions:decorations:show',null,(function(event){i.show(this._shadow);if(!ca)i.show(this._measurer);}).bind(this)));var ka=document.createDocumentFragment();ka.appendChild(this._hiddenInput);ka.appendChild(this._shadow);if(!ca)ka.appendChild(this._measurer);fa.appendChild(ka);ha=ha||t.getScrollParent(fa);if(ha===window){p.appendNode(ea._suggestion);}else i.appendContent(ha,ea._suggestion);if(this._input.value)this._parse(this._input.value);}ea.prototype.dispose=function(){'use strict';if(!this._disposed){while(this._listeners.length)this._listeners.pop().remove();while(this._editListeners.length)this._editListeners.pop().remove();clearTimeout(this._inputTimer);clearTimeout(this._hideSuggestionTimer);clearTimeout(this._forceInputPositionTimer);this._releaseSuggestion();i.remove(this._hiddenInput);i.remove(this._shadow);if(!ca)i.remove(this._measurer);i.remove(ea._suggestion);for(var fa in this)delete this[fa];this._allowScrollEvents();this._disposed=true;}};ea.prototype.setTypeObjects=function(fa){'use strict';this._typeObjects=fa;};ea.prototype.setTypeObjectsOrder=function(fa){'use strict';this._typeObjectsOrder=fa;};ea.prototype.disableStringMatch=function(){'use strict';this._enforceStringMatch=false;};ea.prototype.insertMention=function(fa){'use strict';var ga=fa.name+this._NAME_SUFFIX,ha=this._uids[ga],ia=this._input,ja=ia.value;if(!ha)ha=this._uids[ga]=[];if(ha.indexOf(fa.uid)===-1){ha.push(fa.uid);}else{ia.focus();this._ignoreScrollEvent();return;}var ka=ia.selectionStart,la=ia.selectionEnd,ma=ja.substring(0,ka),na=ja.substr(la+1);ia.value=ma+ga+' '+na;var oa=ia.value.length-na.length;if(l.IS_APPLE_WEBKIT_IOS){this.setIgnoreFocusChange(true);ia.blur();ia.focus();this.setIgnoreFocusChange(false);}ia.setSelectionRange(oa,oa);r.invoke('MJSPlaceholder');ia.focus();this._ignoreScrollEvent();this._tagsUpdated();this._sync();};ea.prototype._getExpandElement=function(){'use strict';return m.bySigil(this._element,'m-mentions-expand')||this._element;};ea.prototype._onSubmit=function(){'use strict';var fa=this._input.value,ga=z((function(){if(this._disposed){clearInterval(ga);}else if(this._input.value!==fa){this._sync();clearInterval(ga);}}).bind(this),100);aa(function(){clearInterval(ga);},10000);};ea.prototype._onFocusChange=function(fa){'use strict';if(this._suggestionShown&&this._ignoreFocusChange)return;switch(fa.getType()){case 'focus':if(fa.getTarget()===this._input){this._focus();}else this._blur();break;default:this._blur();break;}};ea.prototype._focus=function(){'use strict';if(this._focused)return;this._focused=true;if(!this._editListeners.length){var fa=ea._suggestion,ga=this._SUGGESTION_SIGIL,ha=this._updatePosition.bind(this);if(ca)ha=v(ha,200);this._editListeners.push(r.listen('scroll',null,(function(event){var ia=event.getTarget();if(ca&&ia===this._shadow)return;ha(event);if(!this._ignoreScroll)this.setIgnoreFocusChange(false);}).bind(this)),this._source.listen('waiting',this._hideSuggestion),this._source.listen('resultsready',this._onQueryResult),i.listen(this._input,'touchmove',null,this._syncShadow),i.listen(this._input,'keydown',null,this._onBeforeEdit),i.listen(this._input,'keyup',null,this._onEdit),i.listen(this._input,'input',null,this._onEdit),i.listen(this._input,'cut',null,this._onEdit),i.listen(this._input,'paste',null,this._onEdit),i.listen(document.body,n.EVT_TOUCHSTART,null,this._onBodyTouch),i.listen(this._input,n.EVT_TOUCHSTART,null,this._hideSuggestion),i.listen(fa,n.EVT_TOUCHEND,ga,this._onSuggestionTouch),i.listen(fa,n.EVT_TOUCHSTART,ga,this._onSuggestionTouch),i.listen(fa,'click',ga,this._onSuggestionClick));}if(!this._source._startedByMentions){this._source._startedByMentions=true;this._source.didChange('');this._source.didStart();}this._hideSuggestion();clearTimeout(this._forceInputPositionTimer);this._forceInputPositionTimer=aa(this._forceInputPosition,100);this._sync();};ea.prototype._blur=function(){'use strict';if(!this._focused||x()===this._input)return;delete this._focused;while(this._editListeners.length)this._editListeners.pop().remove();clearTimeout(this._forceInputPositionTimer);clearTimeout(this._inputTimer);delete this._forceInputPositionTimer;this._clearBottomMargin();this._hideSuggestion(true);this._sync();};ea.prototype._forceInputPosition=function(){'use strict';var fa=this._input.getBoundingClientRect(),ga=p.getHeight();if(fa.top<0||fa.top>ga){this._forceInputPositionTimer=aa(this._forceInputPosition,16);return;}if(x()!==this._input){this._blur();return;}};ea.prototype.setIgnoreFocusChange=function(fa){'use strict';this._ignoreFocusChange=fa;};ea.prototype._onSuggestionTouch=function(event){'use strict';if(!this._suggestionShown){event.prevent();return;}if(ca){var fa=p.getScroll(),ga=window;ga.scrollTo(fa.x,fa.y);this._ignoreScrollEvent();}this.setIgnoreFocusChange(true);};ea.prototype._onSuggestionClick=function(event){'use strict';if(!this._suggestionShown){event.prevent();return;}this.setIgnoreFocusChange(false);var fa=event.getNode(this._SUGGESTION_SIGIL);this._onSuggestionSelect(this._queryResult[fa.queryIndex]);this._hideSuggestion(true);this._input.focus();this._ignoreScrollEvent();};ea.prototype._onBodyTouch=function(event){'use strict';var fa=event.getTarget();if(ea._suggestion===fa||this._element===fa||this._element.contains(fa)||ea._suggestion.contains(fa))return;this._blur();};ea.prototype._onSuggestionSelect=function(fa){'use strict';var ga=this._input,ha=ga.selectionStart;if(ha!==ga.selectionEnd)return;var ia=ga.value,ja=this._query,ka=fa.display,la=this._createRegex(ka,'i'),ma=this._createRegex(ja,'i'),na=ka+this._NAME_SUFFIX,oa,pa,qa=ia.substring(ha-ja.length,ha);if(!ma.test(qa))return;if(la.test(ia.substring(ha-ka.length,ha))){oa=ia.substring(0,ha-ka.length);}else if(ma.test(ia)){var ra=qa.substr(-ja.length);if(ra===ja){oa=ia.substring(0,ha-ja.length);var sa='';for(var ta=0,ua=na.length;ta<ua;ta++){sa+=na.charAt(ta);if(oa.endsWith(sa))break;}if(oa.endsWith(' '+sa)||oa===sa)oa=oa.substr(0,oa.lastIndexOf(sa));}else return;}else return;if(oa&&oa.charAt(oa.length-1)==='@')oa=oa.slice(0,-1);pa=oa+na+ia.substring(ha);ga.value=pa;ha+=pa.length-ia.length;if(l.IS_APPLE_WEBKIT_IOS){this.setIgnoreFocusChange(true);ga.blur();ga.focus();this._ignoreScrollEvent();this.setIgnoreFocusChange(false);}ga.setSelectionRange(ha,ha);var va=this._uids[na];if(!va)va=this._uids[na]=[];if(va.indexOf(fa.uid)===-1){va.push(fa.uid);this._tagsUpdated();}if(fa.getAttribute('weak_reference'))this._weakReferences[fa.uid]=true;this._sync();};ea.prototype._hideSuggestion=function(fa){'use strict';if(this._suggestionShown){delete this._suggestionShown;clearTimeout(this._hideSuggestionTimer);if(fa===true){delete this._hideSuggestionTimer;this._hideSuggestionInternal();}else this._hideSuggestionTimer=aa(this._hideSuggestionInternal,350);}};ea.prototype._hideSuggestionInternal=function(){'use strict';delete this._hideSuggestionTimer;if(this._isInstanceSuggestion()){this._releaseSuggestion();i.hide(ea._suggestion);i.setContent(ea._suggestion,'');}this._input.removeAttribute('spellcheck');this._input.removeAttribute('autocapitalize');this._input.removeAttribute('autocorrect');this._clearBottomMargin(true);};ea.prototype._clearBottomMargin=function(fa){'use strict';clearTimeout(this._clearBottomMarginTimer);if(!ca||fa){this._clearBottomMarginInternal();return;}this._clearBottomMarginTimer=setTimeout(this._clearBottomMarginInternal.bind(this),500);};ea.prototype._clearBottomMarginInternal=function(){'use strict';var fa=this._getExpandElement();fa.style.marginBottom=this._bottomMargin||'';};ea.prototype._assignSuggestion=function(){'use strict';h.get(ea._suggestion).mentionId=this._mentionId;};ea.prototype._releaseSuggestion=function(){'use strict';h.get(ea._suggestion).mentionId=null;};ea.prototype._isInstanceSuggestion=function(){'use strict';return h.get(ea._suggestion).mentionId===this._mentionId;};ea.prototype._showSuggestion=function(){'use strict';this._assignSuggestion();if(this._suggestionShown)return;this._suggestionShown=true;var fa=this._input,ga=ea._suggestion;t.apply(ga,{display:'block',width:fa.offsetWidth+'px'});fa.setAttribute('spellcheck','false');fa.setAttribute('autocapitalize','off');fa.setAttribute('autocorrect','off');clearTimeout(this._clearBottomMarginTimer);if(this._bottomMargin===undefined)this._bottomMargin=this._getExpandElement().style.marginBottom;var ha=this.minDistance,ia=fa.getBoundingClientRect(),ja=document.elementFromPoint(1,ia.bottom+ha);if(!ja||ca&&ja===document.documentElement){var ka=p.getScroll();this._getExpandElement().style.marginBottom=ha+'px';p.scrollTo(ka.x,Math.max(ka.y,ka.y+ia.top-30));this._ignoreScrollEvent();}if(this._hideSuggestionTimer){clearTimeout(this._hideSuggestionTimer);delete this._hideSuggestionTimer;}};ea.prototype._allowScrollEvents=function(){'use strict';clearTimeout(this._ignoreScroll);delete this._ignoreScroll;};ea.prototype._ignoreScrollEvent=function(){'use strict';if(!ca)return;clearTimeout(this._ignoreScroll);this._ignoreScroll=setTimeout(this._allowScrollEvents.bind(this),200);};ea.prototype._updatePosition=function(){'use strict';if(!this._suggestionShown)return;var fa=ea._suggestion,ga=fa.offsetHeight,ha=this._input,ia=ha.offsetHeight,ja=u.getElementPosition(ha),ka=ha.getBoundingClientRect(),la=fa.offsetParent,ma;if(la===document.documentElement){ma=new u(0,0);}else ma=u.getElementPosition(la);var na=ka.left-ma.x,oa=ja.y-ma.y,pa=p.getHeight()/2,qa=na,ra=oa+ia,sa=ka.bottom+ga>pa&&ka.top-ga>=0;if(sa)ra=oa-ga;t.apply(fa,{left:qa+'px',top:ra+'px'});};ea.prototype._onBeforeEdit=function(event){'use strict';if(!this._focused)return;if(this._inputTimer)clearTimeout(this._inputTimer);switch(event.getRawEvent().keyCode){case 8:this._onBackSpaceKey(event);break;}};ea.prototype._onEdit=function(event){'use strict';if(this._inputTimer)clearTimeout(this._inputTimer);switch(event.getRawEvent().keyCode){case 13:this._hideSuggestion();this._syncShadow();return;default:this._sync();this._inputTimer=aa(this._processInput,160);}};ea.prototype._onBackSpaceKey=function(event){'use strict';var fa=this._input,ga=fa.selectionStart;if(ga!==fa.selectionEnd)return;var ha=fa.value,ia=this._getTokenByCursorPosition(ga-1);if(ia){var ja=ha.substring(0,ga),ka=ia.name;if(ja.indexOf(ka)===ja.length-ka.length){var la;if(ea._CJK_ALTER_NAME.test(ka)){la=this._trim(ka.replace(ea._CJK_ALTER_NAME,''));}else if(ea._LATIN_ALTER_NAME.test(ka)){la=this._trim(ka.replace(ea._LATIN_ALTER_NAME,''));}else{var ma=ka.split(/\s+/g);if(ma.length>1){ma.pop();la=ma.join(' ');}}if(la){la+=this._NAME_SUFFIX;this._uids[ka].splice(this._uids[ka].indexOf(ia.uid),1);this._uids[la]=this._uids[la]||[];this._uids[la].push(ia.uid);ha=ha.substr(0,ga-ka.length)+la+ha.substr(ga);ga-=ka.length-la.length;fa.value=ha;fa.setSelectionRange(ga,ga);event.prevent();this._sync();return;}}}var na;while(true){var oa=ha.charAt(ga-1);if(oa==='\u200B'){ha=ha.substring(0,ga-2)+ha.substr(ga);ga-=1;na=true;}else break;}if(na){event.prevent();ha=ha.substring(0,ga-2)+ha.substr(ga);fa.value=ha;}};ea.prototype._processInput=function(){'use strict';if(this._disabled)return;this._sync();this._onQueryResult(null,null);this._hideSuggestion();this._query=null;this._inputTimer=null;var fa=this._input,ga=fa.value,ha=fa.selectionStart;if(ha!==fa.selectionEnd)return;var ia=ga.charAt(ha);if(ia&&!/\s/.test(ia))return;var ja=fa.value.substr(0,ha),ka=ja.match(this._queryStringMatcher);if(!ka)return;var la=ka[0],ma;if(la.charAt(0)==='@'){la=la.slice(1);ma=la.length>0;}else ma=la.length>2&&(ea._EN_NAMES.test(la)||ea._JP_SYLLABARY_CHARS.test(la)||ea._CJK_CHARS.test(la));var na=ja.lastIndexOf('@');if(na>-1){la=ja.substr(na+1);ma=true;}ma=ma&&!this._getTokenByCursorPosition(ha);if(ma){this._query=la;this._source.didChange(la);this._source.didStart();}};ea.prototype._onQueryResult=function(fa){'use strict';var ga=fa&&fa.length>0,ha=this._query&&this._input.value.indexOf(this._query)>=0;if(!ha||!ga||this._disposed)return;this._hideSuggestion();this._queryResult=null;if(this._enforceStringMatch&&!this._createRegex(this._query,'ig').test(fa[0].display))return;var ia=[],ja=document.createDocumentFragment(),ka=0,la={};for(var ma in this._uids){var na=this._uids[ma];for(var oa=0,pa=na.length;oa<pa;oa++)la[na[oa]]=true;}var qa=function(ya){if(!la[ya.uid]){ya.htmlFor=this._input.id;r.addSigil(ya,this._SUGGESTION_SIGIL);r.addSigil(ya,'touchable');h.set(ya,{nativeClick:true});ya.queryIndex=ka;ja.appendChild(ya);ia[ka]=ya;ka++;if(ka>5)return true;}};if(this._typeObjects&&this._typeObjectsOrder){var ra={};for(var sa=0;sa<fa.length;sa++){var ta=fa[sa].getAttribute('renderType');if(!ta)continue;if(!(ta in ra))ra[ta]=[];ra[ta].push(fa[sa]);}for(var ua=0;ua<this._typeObjectsOrder.length;ua++){ta=this._typeObjectsOrder[ua];var va=this._typeObjects[ta],wa=ra[ta],xa=wa?wa.filter(function(ya){return !la[ya.uid];}):[];if(xa.length>0){ja.appendChild(this._buildSectionHeader(va));xa.some(qa,this);}else if(va.show_always){ja.appendChild(this._buildSectionHeader(va));ja.appendChild(this._buildNoResultEntry());}}}else fa.some(qa,this);if(ka){i.setContent(ea._suggestion,'');this._queryResult=ia;ea._suggestion.appendChild(ja);this._showSuggestion();this._updatePosition();}};ea.prototype._buildSectionHeader=function(fa){'use strict';if(fa==null)return null;return new k(fa.xhp).getFragment().firstChild;};ea.prototype._buildNoResultEntry=function(){'use strict';var fa=i.create('i',{className:'mentions-suggest-item-img noResultsIcon'}),ga=i.create('span',{className:'no-results'},y._("No Results")),ha=i.create('label',{className:'mentions-suggest-item'},fa,ga);ha.appendChild(fa);ha.appendChild(ga);return ha;};ea.prototype._syncAndParse=function(){'use strict';if(!this._disposed&&!this._disabled){if(this._input&&this._input.value)this._parse(this._input.value);this._sync();}};ea.prototype._sync=function(){'use strict';if(!this._disposed&&!this._disabled){this._syncMentionedUIDs();this._syncHashtags();this._syncShadow();if(!ca)this._syncMeasurer();this._syncValue();}};ea.prototype._disable=function(fa){'use strict';this._disabled=true;};ea.prototype._enable=function(){'use strict';this._disabled=false;};ea.prototype._parse=function(fa){'use strict';this._uids={};var ga=/[0-9]+/,ha=/^@\[(?:[0-9]+:){2}(.+)\]/,ia=fa.match(ea._MENTIONS_REGEX);if(ia){for(var ja=0;ja<ia.length;ja++){var ka=ia[ja].match(ga),la=ia[ja].match(ha);la=la?la[1].replace(/\\([^\\])/g,'$1').replace(/\\\\/g,'\\'):null;if(!la)continue;if(!this._uids[la])this._uids[la]=[];this._uids[la].push(ka);fa=fa.replace(ia[ja],la);}this._input.value=fa;}this._sync();};ea.prototype._syncMentionedUIDs=function(){'use strict';var fa=this._input.value;if(!fa){this._uids={};return;}var ga=false;for(var ha in this._uids){var ia=this._createRegex(ha,'g'),ja=fa.match(ia);if(!ja||!ja.length){delete this._uids[ha];ga=true;continue;}var ka=this._uids[ha];if(!ka.length){delete this._uids[ha];}else if(ka.length>ja.length)ka.length=ja.length;}if(ga)this._tagsUpdated();};ea.prototype._syncHashtags=function(){'use strict';var fa=this._input.value;if(this.shouldShowHashtags)this._hasHashtags=ea._HASHTAG_TRIGGER.test(fa);};ea.prototype._renderHashtags=function(fa){'use strict';if(!this._hasHashtags)return i.htmlize(fa);var ga=j.parseWithoutMentions(fa),ha=[],ia=0;for(var ja=0;ja<ga.length;ja++){ha.push(i.htmlize(fa.substring(ia,ga[ja].offset)),'<span class="mentions-highlight">',fa.charAt(ga[ja].offset),ga[ja].hashtag,'</span>');ia=ga[ja].offset+ga[ja].hashtag.length+1;}ha.push(i.htmlize(fa.substring(ia)));return ha.join('');};ea.prototype._syncShadow=function(fa){'use strict';var ga=this._input,ha=ga.value,ia=this._shadow;if(!ha){i.setContent(ia,'');this._syncSelectionRange();return;}if(fa&&(fa.getType()==='scroll'||fa.getType()==='touchmove')){q.setTop(ia,q.getTop(ga));q.setLeft(ia,q.getLeft(ga));this._syncSelectionRange();return;}var ja='\u200B{\u200B',ka='\u200B}',la='\u200B{\u200B\u200B}',ma,na=function(ua,va){var wa=this._uids[ua][ma],xa=this._weakReferences[wa]||this._initialWeakReferences[wa];ma++;return ((xa?la:ja)+va+ja);};for(var oa in this._uids){var pa=this._createRegex(oa,'g');ma=0;ha=ha.replace(pa,na.bind(this,oa));}var qa=ha.split(ja),ra=[],sa=false;for(var ta=0;ta<qa.length;ta++){if(sa){if(qa[ta].startsWith(ka)){ra.push('<span class="mentions-highlight-weak-reference">',i.htmlize(qa[ta].substr(ka.length)),'</span>');}else ra.push('<span class="mentions-highlight">',i.htmlize(qa[ta]),'</span>');}else ra.push(this._renderHashtags(qa[ta]));sa=!sa;}ha=ra.join('');ha=ha.replace(/\n+$/,da);if(this._shadowHTML!==ha){this._shadowHTML=ha;ia.innerHTML=ha;}q.setTop(ia,q.getTop(ga));q.setLeft(ia,q.getLeft(ga));this._syncSelectionRange();};ea.prototype._syncSelectionRange=function(){'use strict';if(!ca||x()!==this._input)return;var fa=this._input.selectionStart,ga=this._input.selectionEnd;this._input.setSelectionRange(Math.abs(fa-1),Math.abs(ga-1));this._input.setSelectionRange(fa,ga);};ea.prototype._syncMeasurer=function(){'use strict';if(ca)return;var fa=this._input,ga=fa.value;if(!ga){i.setContent(this._measurer,'');return;}var ha=fa.selectionStart,ia=fa.selectionEnd;if(ha!==ia)return;var ja=i.create('div',{},fa.value.substr(0,ha));this._measurer.innerHTML=ja.innerHTML+'<br><div></div>';};ea.prototype._syncValue=function(){'use strict';var fa=this._input.value;for(var ga in this._uids){var ha=this._createRegex(ga,'g'),ia=this._uids[ga],ja=0;fa=fa.replace(ha,function(ka){var la=parseInt(ia[ja++],10);if(la){return '@['+la+':'+ka+']';}else return ka;});}fa=fa.replace(/\u200B/g,'');if(this._hiddenInput.value!==fa)this.invoke('change',fa);this._hiddenInput.value=fa;};ea.prototype._syncStyles=function(fa){'use strict';var ga=getComputedStyle(this._input,null),ha=fa.style,ia=['fontSize','fontFamily','letterSpacing','lineHeight','paddingTop','paddingLeft','paddingRight','paddingBottom','textIndent','wordSpacing'];while(ia.length){var ja=ia.pop();ha[ja]=ga[ja];}};ea.prototype._getTokenByCursorPosition=function(fa){'use strict';var ga=this._input.value,ha=null,ia=this._uids;for(var ja in ia){if(ha)break;var ka=ga.indexOf(ja);if(ka<0)continue;var la=this._createRegex(ja,'g'),ma=0;ga.replace(la,function(na,oa){if(!ha&&fa>oa&&fa<oa+na.length)ha={name:ja,uid:ia[ja][ma]};ma++;});}return ha;};ea.prototype._trim=function(fa){'use strict';return fa.trim?fa.trim():fa.replace(/(^\s*)|(\s*$)/g,'');};ea.prototype._createRegex=function(fa,ga){'use strict';fa=fa.replace(ea._REGEX_SPECIAL_CHARS,'\\$&');return new RegExp(fa,ga);};ea.prototype._tagsUpdated=function(){'use strict';this._eventData.hasTags=Object.keys(this._uids).length>0;this._eventData.numTags=Object.keys(this._uids).length;r.invoke('MMentions:change',null,this._eventData);};ea.prototype._removeHiddenInput=function(){'use strict';i.remove(this._hiddenInput);};Object.assign(ea,{_MENTIONS_REGEX:/@\[([0-9]+)\:(([^\\\]]*(?:\\.)*)*)\]/g,_EN_NAMES:/^[A-Z][a-z]{1}/,_CJK_ALTER_NAME:/\uff08[^\uff09]+\uff09(\u200B\u200B)?$/g,_LATIN_ALTER_NAME:/\([^\)]+\)(\u200B\u200B)?$/g,_JP_SYLLABARY_CHARS:/(^[\u3040-\u309F]{3,3})|(^[\u30A0-\u30FF]{3,3})/g,_CJK_CHARS:/^[\u4E00-\u9FFF\uF900-\uFAFF\u3400-\u4DBF]{2,2}/g,_REGEX_SPECIAL_CHARS:/[\/\.\*\+\?\}\(\)\[\]\{\}\\]/g,_HASHTAG_TRIGGER:/[#\uFF03]/,_MIN_DISTANCE:ca?200:130});Object.assign(ea.prototype,{_NAME_SUFFIX:'\u200B\u200B',_SUGGESTION_SIGIL:'mentionsSuggestionItem',_COMPOSER_SIGIL:'composer-textarea'});w(ea,['change']);f.exports=ea;},null);
__d('MMentionsRenderer',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={createSuggestionNode:function(j){var k=h.create('img',{src:j.photo,className:'mentions-suggest-item-img'}),l=h.create('div',{className:'mentions-suggest-item-text'});l.appendChild(h.create('span',{className:'mentions-suggest-item-name'},j.display));if(j.subtext){var m=j.subtext;if(j.type&&j.type!='user')m=m?j.type+' \u00b7 '+m:j.type;l.appendChild(h.create('span',{className:'mentions-suggest-item-subtext'},m));}var n=h.create('label',{className:'mentions-suggest-item',display:j.display,uid:j.id,rel:j.id,photo:j.photo,subtext:j.subtext},k,l);n.appendChild(k);n.appendChild(l);if(j.weak_reference)n.setAttribute('weak_reference','y');if(j.renderType)n.setAttribute('renderType',j.renderType);return n;}};f.exports=i;},null);
__d('MTypeaheadTouchSourceShowOnFocus',['MRequest','MTypeaheadTouchSource','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o);this.uri=n;this._bootstrapData=[];this._query=null;this._isFocused=false;this.maximumResultCount=p||5;if(o==='work_position_inference'){var q=j.listen('MProfileEditWork:dataChanged',null,(function(r){var s=r.getData().existing_fields;if(s)this.updateBootstrapData(s);}).bind(this));j.listen('m:page:unload',null,function(){q.remove();j.removeCurrentListener();});}}m.prototype.updateBootstrapData=function(n){'use strict';var o=new h(this.uri);o.addData({existing_fields_json:JSON.stringify(n)});o.setMethod('POST');o.listen('done',(function(p){this._bootstrapData=[];if(p.payload!==undefined)this.ondata(p.payload);}).bind(this));o.send();};m.prototype.showOnFocus=function(){'use strict';if(this._isFocused&&this._query===''){var n=this.renderNodes(null,this._bootstrapData);this.invoke('resultsready',n);this.invoke('complete');}};m.prototype.ondata=function(n){'use strict';i.prototype.ondata.call(this,n);var o=Math.min(n.length,this.getMaximumResultCount());for(var p=0;p<o;++p)if(n[p].uid)this._bootstrapData.push(n[p].uid);this.showOnFocus();};m.prototype.setQuery=function(n){'use strict';this._query=n;};m.prototype.setIsFocused=function(n){'use strict';this._isFocused=n;};m.prototype.didChange=function(n){'use strict';this._query=n;};m.prototype.getMaximumResultCount=function(){'use strict';return this.maximumResultCount;};f.exports=m;},null);
__d('MMentionsBootstrapDataSource',['MMentionsRenderer','MTypeaheadTouchSourceShowOnFocus'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(m,n){'use strict';k.constructor.call(this,m,n);}l.prototype.createNode=function(m){'use strict';return h.createSuggestionNode(m);};f.exports=l;},null);
__d('MMentionsOnDemandDataSource',['MMentionsRenderer','MTypeaheadOnDemandSource'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;j=babelHelpers.inherits(l,i);k=j&&j.prototype;function l(m){'use strict';k.constructor.call(this,m);}l.prototype.createNode=function(m){'use strict';return h.createSuggestionNode(m);};f.exports=l;},null);
__d('InitMMentions',['MMentions','MMentionsBootstrapDataSource','MMentionsOnDemandDataSource','Stratcom','TypeaheadCompositeSource','DataStore'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={},o={},p={},q={main:function(r){var s=r.element;if(!s)return;if(!s.getBoundingClientRect)return;var t=[],u=r.sources.bootstrapped||[],v=r.sources.online||[],w=r.typeObjects,x=r.typeObjectsOrder,y=null,z='|',aa='',ba=[];u.forEach(function(da){y=new i(da.src,da.source_key);var ea=da.source_key+z+da.src;if(!n[ea])n[ea]=y;t.push(n[ea]);ba.push(ea);});v.forEach(function(da){var ea=z+da.src;if(!o[ea])o[ea]=new j(da.src);t.push(o[ea]);ba.push(ea);});if(!t.length)return;aa=ba.join(z);if(!(aa in p))p[aa]=new l(t);var ca=new h(s,p[aa]);ca.setTypeObjects(w);ca.setTypeObjectsOrder(x);ca.shouldShowHashtags=r.shouldShowHashtags;if(!r.enforceStringMatch)ca.disableStringMatch();m.set(s,{mentionsInstance:ca});k.listen('m:page:unload-complete',null,function(event){if(!document.documentElement.contains(s)){k.removeCurrentListener();ca.dispose();ca=null;s=null;}});}};f.exports=q;},null);
__d('MTypeaheadTouchSourceWithSuggestions',['setTimeoutAcrossTransitions','MTypeaheadTouchSource','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,i);l=k&&k.prototype;function m(n,o,p){'use strict';l.constructor.call(this,n,o);this.setSuggestions(p);var q=[];for(var r=0;r<p.length;++r)q.push(p[r].uid);this.setSuggestionsIds(q);this.setDefaultSuggestionsIds(q);}m.prototype.didStart=function(){'use strict';i.prototype.didStart.call(this);h((function(){var n=this.renderNodes(null,this.getSuggestionsIds());this.invoke('resultsready',n);this.invoke('complete');}).bind(this),0);};m.prototype.matchResults=function(n){'use strict';if(n.length===0){var o=this.getSuggestionsIds();if(this.getSuggestionsIds().length===0)o=this.getDefaultSuggestionsIds();var p=this.renderNodes(null,o);this.invoke('resultsready',p);this.invoke('complete');}else i.prototype.matchResults.call(this,n);};j(m,{suggestions:[],suggestionsIds:[],defaultSuggestionsIds:[]});f.exports=m;},null);
__d('InitMTokenizer',['$','MTypeaheadOnDemandSource','MTypeaheadSourceWithExclusions','MTypeaheadTouchSource','MTypeaheadTouchSourceWithSuggestions','Stratcom','Typeahead','TypeaheadCompositeSource'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=function(q,r){var s=null,t=r.element;if(r.id)t=document.getElementById(r.id);if(r.suggestions.length){s=new l(r.src,r.source_key,r.suggestions);}else if(s){q.setRemovableTokens(false);}else if(r.exclusions){s=new j(r.src,r.source_key,t.id);}else s=new k(r.src,r.source_key);if(r.ondemand_src){var u=new i(r.ondemand_src);if(r.maxresults)u.setMaximumResultCount(r.maxresults);var v=[s,u];s=new o(v);}if(r.excludeids)r.excludeids.forEach(function(z){s.addExcludeID(z);});if(r.maxresults)s.setMaximumResultCount(r.maxresults);if(s instanceof k||s instanceof i)s.setShowSecondaryAction(false);var w=r.textinput;if(typeof w==='string')w=h(w);var x=new n(t,w);x.setDatasource(s);x.setTypeObjects(r.typeObjects);x.setTypeObjectsOrder(r.typeObjectsOrder);q.setTypeahead(x);m.invoke('Tokenizer-setTypeahead',null,x);q.setInitialValue(r.initialtokens);q.setLabel(r.label);q.setPlaceholder(r.placeholder);q.setLimitWidth(r.limitwidth);q.setAddExtraData(r.addExtraData);if(r.limit)q.setLimit(r.limit);if(r.freeform){var y=new RegExp(r.freeform,'i');x.listen('change',function(z){if(y&&y.test(z)){s.lastChange=Date.now();var aa={uri:'#',name:z,id:z,display:z},ba=[s.createNode(aa)];x.showResults(ba);m.context().kill();}});}if(r.needs_template_data&&Object.keys(r.initialtokens).length>0)x.disable();q.start();};g.main=p;},null);
__d('MTokenizer',['DOM','Tokenizer','createDeprecatedProperties','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,i);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.buildInput=function(p){'use strict';var q=h.create('input',{type:'text',className:'jx-tokenizer-input',sigil:'tokenizer-input focus-receiver',placeholder:this.getPlaceholder(),value:p});q.setAttribute('autocomplete','off');q.setAttribute('autocapitalize','off');q.setAttribute('autocorrect','off');q.setAttribute('aria-label',l._("List of results will show up below"));if(this.getPlaceholder()){this.placeholderWidth=o.estimatePlaceholderWidth(q)+'px';q.style.minWidth=this.placeholderWidth;}return q;};o.prototype.setLimitWidth=function(p){'use strict';this.limitWidth=p;};o.prototype.getLimitWidth=function(){'use strict';return this.limitWidth;};o.prototype.setAddExtraData=function(p){'use strict';this.addExtraData=p;};o.prototype.start=function(){'use strict';this._containerNode.tokenizer=this;i.prototype.start.call(this);if(this.getLabel()){var p=h.create('span',{className:'mTokenizerLabel'},this.getLabel());h.prependContent(this._root,p);}this.listen('removed',this.removedToken.bind(this));};o.prototype.removedToken=function(){'use strict';if(Object.keys(this._tokenMap).length===0){this._focus.placeholder=this.getPlaceholder();this._focus.style.minWidth=this.placeholderWidth;}if(this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length<this.getLimit()){h.show(this._focus);this._typeahead._control.disabled=false;this._typeahead._stop=false;this._typeahead.refresh();this.hasMaxTokens=false;}};o.prototype.addToken=function(p,q,r,s){'use strict';if(this.hasMaxTokens)return false;var t=i.prototype.addToken.call(this,p,q,r,s);if(!this.hasMaxTokens&&this.getLimit()&&Object.keys(this._tokenMap).length>=this.getLimit()){this._typeahead.hide();this._typeahead.disable();h.hide(this._focus);this.hasMaxTokens=true;}return t;};o.prototype.removeToken=function(p){'use strict';var q=i.prototype.removeToken.call(this,p);q&&this.removedToken();return q;};o.prototype.buildToken=function(p,q,r){'use strict';var s=h.create('input',{sigil:'token-value',type:'hidden',value:p,name:this._orig.name+'['+this._seq+++']'}),t=null;if(r.getAttribute('weak_reference'))t=h.create('i',{className:'mWeakReferenceIcon'});var u=null;if(this.addExtraData&&r.getAttribute('data-extra'))u=h.create('input',{sigil:'token-extra-data',value:r.getAttribute('data-extra'),type:'hidden'});var v=this.getRemovableTokens()?h.create('span',{},'\u00a0\u00d7\u00a0'):null,w=h.create('a',{className:'touchable mCloseBtn',href:'#',sigil:'blocking-touchable remove'},v);w.setAttribute('aria-label',l._("Remove"));this._focus.placeholder='';this._focus.style.minWidth=0;var x="mToken"+(this.getLimitWidth()?' '+"mTokenLimitWidth":'')+(r.getAttribute('weak_reference')?' '+"mTokenWeakReference":'')+(p<0?' '+"mTokenWithNegativeKey":'');if(this.getLimitWidth())q=h.create('span',{className:'innerToken'},q);return h.create('span',{className:x,sigil:'token',meta:{key:p}},[t,q,s,w,u]);};o.prototype.getTypeahead=function(){'use strict';return this._typeahead;};o.prototype.focus=function(){'use strict';};o.estimatePlaceholderWidth=function(p){'use strict';var q=p.value;p.value=p.placeholder;var r=h.textMetrics(p,'jx-tokenizer-metrics');p.value=q;return r.x;};j(o,{label:null,placeholder:null,removableTokens:true});Object.assign(o.prototype,{placeholderWidth:null,hasMaxTokens:false});f.exports=o;},null);
__d('MTokenizerBehavior',['CSS','Stratcom','MViewport','Vector'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=false,m={addListener:function(n){if(l)return;l=true;i.listen('click',[['tokenizer','typeahead-result'],['remove']],function(o){o.prevent();});i.listen(['focus','blur'],'tokenizer-input',function(o){var p=o.getNode('tokenizer'),q=o.getType()=='blur';h.conditionClass(p,'blurred',q);if(q){if(n.clearvalueonblur||1)p.tokenizer&&p.tokenizer.getTypeahead().clear();}else if(n.shouldscroll)j.scrollTo(0,k.getPos(p).y);});}};f.exports=m;},null);
__d('MTokenizerWithSuggestions',['setTimeoutAcrossTransitions','CSS','DOM','MTokenizer','createDeprecatedProperties'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;m=babelHelpers.inherits(o,k);n=m&&m.prototype;function o(p){'use strict';n.constructor.call(this,p);}o.prototype.start=function(){'use strict';k.prototype.start.call(this);i.conditionClass(this._containerNode,'suggestions',true);var p=j.scry(this._containerNode,'div','tokenizer-suggestions-label');if(p.length){this.setLabel(p[0]);j.remove(p[0]);}this.listen('removed',(function(){h(this._typeahead.refresh.bind(this._typeahead),0);}).bind(this));};o.prototype.setTypeahead=function(p){'use strict';k.prototype.setTypeahead.call(this,p);p.setBlurDefer(o.blurDefer);p.listen('choose',(function(q){h((function(){this._typeahead.refresh();}).bind(this),0);}).bind(this));p.listen('show',(function(q){var r=q.show,s=[],t=o.maxSuggestions;for(var u=0;u<r.length;++u)if(!(r[u].rel in this._tokenMap)){s.push(r[u]);if(s.length>=t)break;}var v=this.getLabel();if(v&&v.length>0&&s.length&&p.getValue()==='')s.unshift(v);r.length=0;r.push.apply(r,s);}).bind(this));};o.prototype.shouldHideResultsOnChoose=function(){'use strict';return this.getFocused();};o.prototype.updateSuggestionsIds=function(p){'use strict';this._typeahead._datasource.setSuggestionsIds(p);this._typeahead.refresh();};o.prototype.handleEvent=function(p){'use strict';var q=p.getType();if(q=='focus'||q=='blur'){this.setFocused(q=='focus');h((function(){this._typeahead.refresh();}).bind(this),o.blurDefer);p.stop();}else k.prototype.handleEvent.call(this,p);};l(o,{focused:false,label:null});Object.assign(o,{maxSuggestions:50,blurDefer:500});f.exports=o;},null);
__d('MUFIComments',['Bootloader','MDeepCopy','MLiveData','MParent','MUFICommentsConfig','MViewport','Stratcom','SubscriptionsHandler','getActiveElement'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.MUFICommentTypingSubscriptionController;function r(){return !!q;}function s(u){return u+'_mufiseencomments';}function t(u,v,w){this.$MUFIComments1=u;this.$MUFIComments2=s(v);this.$MUFIComments3=j.get(v);this.$MUFIComments4=false;this.$MUFIComments5=w;this.$MUFIComments6=null;this.$MUFIComments7=new o();this.$MUFIComments7.addSubscriptions(this.$MUFIComments3.listen('change',this.onChange.bind(this)),n.listen('m:page:unload',null,this.onUnload.bind(this)));if(r())this.$MUFIComments7.addSubscriptions(new q(v,(function(x){this.$MUFIComments6=x;this.onLiveEventUpdate();}).bind(this)));}t.prototype.onChange=function(){var u=this.$MUFIComments3.getData();if(u.request_id===this.$MUFIComments5||u.comments===undefined)return;this.$MUFIComments8(u.logging_interaction_key);};t.prototype.onLiveEventUpdate=function(){if(r())this.$MUFIComments8();};t.prototype.$MUFIComments8=function(u){h.loadModules(["MReactComponentRenderer","MUFICommentList.react"],(function(v,w){var x=this.$MUFIComments3.getData();x.showPillOnMount=true;x.seenCommentsCacheID=this.$MUFIComments2;x.comments=x.comments?i(x.comments):[];if(r()){var y=this.$MUFIComments6||{},z=y.friendCount;x.liveTypingFriendCount=z||0;}if(n.hasSigil(p(),'mufi-composer')){var aa=this.$MUFIComments1.offsetHeight;x.onDone=(function(){m.scrollBy(0,this.$MUFIComments1.offsetHeight-aa);aa=this.$MUFIComments1.offsetHeight;}).bind(this);}v(w,this.$MUFIComments1,x);var ba=x.logging_interaction_key,ca=ba?[ba]:[];if(u&&u!==ba)ca.push(u);n.invoke('m:ufi:live-comments:render',null,{ufi:k.bySigil(this.$MUFIComments1,'m-ufi'),logKeys:ca});}).bind(this));if(!this.$MUFIComments4){this.$MUFIComments9();this.$MUFIComments4=true;}};t.prototype.$MUFIComments9=function(){this.$MUFIComments1.style.display='run-in';this.$MUFIComments1.offsetHeight;this.$MUFIComments1.style.display='block';};t.prototype.onUnload=function(){this.$MUFIComments7.release();this.$MUFIComments6=null;};f.exports=t;},null);