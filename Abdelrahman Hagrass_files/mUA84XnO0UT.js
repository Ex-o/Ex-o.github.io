/*!CK:3193559572!*//*1447774533,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Y2m6p"]); }

__d("MercuryAttachmentType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ERROR:"error",FILE:"file",PHOTO:"photo",STICKER:"sticker",SHARE:"share",UNKNOWN:"unknown",VIDEO:"video",ANIMATED_IMAGE:"animated_image"};},null,{});
__d("StoryAttachmentStyle",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",SAHELI_IMAGE:"saheli_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share",SMS_LOG:"sms_log",CENTERED_TEXT:"centered_text",GOODWILL_THROWBACK_FRIENDVERSARY_DATA_CARD:"goodwill_throwback_friendversary_data_card",GOODWILL_THROWBACK_FACEVERSARY_COLLAGE_CARD:"goodwill_throwback_faceversary_collage_card"};},null,{});
__d("XMessagingMarkReadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messaging\/mark_read\/",{});},null,{});
__d('MMessageUtils',['MRequest','fbt','XMessagingMarkReadController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(n){var o=null;switch(n){case 'source:chat:orca':case 'source:titan:orca':o=i._("Sent from Messenger");break;case 'source:mobile':case 'source:chat:iphone':case 'source:titan:api_mobile':case 'source:titan:m_ajax':case 'source:titan:m_basic':case 'source:titan:m_japan':case 'source:titan:m_mini':case 'source:titan:m_touch':case 'source:titan:m_app':case 'source:titan:m_tablet':case 'source:titan:m_zero':case 'source:titan:wap':o=i._("Sent from Mobile");break;case 'source:email':case 'source:titan:emailreply':o=i._("Sent from email");break;case 'source:titan:web':case 'source:chat:web':o=i._("Sent from Web");break;}return o;}function l(n,o,p,q){var r=Object.keys(o).length,s=n.length+(p!==q?1:0);if(r>3&&s>=r-1){return i._("Seen by everyone");}else if(n.length==1){return i._("Seen by {user}",[i.param('user',o[n[0]])]);}else if(n.length==2){return i._("Seen by {user1}, {user2}",[i.param('user1',o[n[0]]),i.param('user2',o[n[1]])]);}else if(n.length==3){return i._("Seen by {user1}, {user2}, {user3}",[i.param('user1',o[n[0]]),i.param('user2',o[n[1]]),i.param('user3',o[n[2]])]);}else if(n.length>3){var t=i._({"*":"{num} more"},[i.param('num',n.length-2,[0])]);return i._("Seen by {user1}, {user2}, {=num more link}",[i.param('user1',o[n[0]]),i.param('user2',o[n[1]]),i.param('=num more link',t)]);}}function m(n){var o=j.getURIBuilder().getURI(),p={thread_id:n},q=new h(o).setMethod('POST').addData(p);q.send();}g.getMessageSourceText=k;g.getSeenByParticipantsText=l;g.markRead=m;},null);
__d('EmoteTypes',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();g.TEXT='text';g.EMOTE='emote';g.EMOTE_FBID='emote_fbid';},null);
__d("EmoticonsList",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={emotes:{":)":"smile",":-)":"smile",":]":"smile","=)":"smile","(:":"smile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",":poop:":"poop",":putnam:":"putnam",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=D":"grin",":-D":"grin",":D":"grin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","B-)":"glasses","B|":"sunglasses","8-|":"sunglasses","8|":"sunglasses","B-|":"sunglasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry",":'-(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel",":*":"kiss",":-*":"kiss","<3":"heart","&lt;3":"heart","â™¥":"heart","^_^":"kiki","^~^":"kiki","-_-":"squint","o.O":"confused","O.o":"confused_rev",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"upset",">.<":"upset",":v":"pacman",":V":"pacman",":|]":"robot",":3":"colonthree","<(\")":"penguin","(^^^)":"shark","(y)":"like",":like:":"like","(Y)":"like"},symbols:{smile:":)",frown:":(",poop:":poop:",putnam:":putnam:",tongue:":P",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",sunglasses:"B|",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",heart:"<3",kiki:"^_^",squint:"-_-",confused:"o.O",confused_rev:"O.o",upset:">:o",pacman:":v",robot:":|]",colonthree:":3",penguin:"<(\")",shark:"(^^^)",like:"(y)"},regexp:/(^|[\s\'\".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\(\"\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))([\s\'\".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s\'\".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|:poop:|:putnam:|:P|:\-P|:\-p|:p|=P|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\||8\-\||8\||B\-\||>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:\'\(|:\'\-\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|:\*|:\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|o\.O|O\.o|>:o|>:O|>:\-O|>:\-o|>_<|>\.<|:v|:V|:\|\]|:3|<\(\"\)(?!\))|\(\^\^\^\)(?!\))|\(y\)(?!\))|:like:|\(Y\)(?!\)))(?:[\s\'\".,!?]|<br>|$)/};},null);
__d('createEmoteTokenizer',['EmoteTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=40;function j(k){return function(l){var m=l,n=[],o=i;while(o--){var p=k.regexp.exec(m);if(!p||!p.length)break;var q=p[2],r=p.index+p[1].length,s=m.substring(0,r);if(s)n.push({type:h.TEXT,text:s});var t=k.emotes[q];if(t){n.push({type:h.EMOTE,text:q,emote:t});}else n.push({type:h.TEXT,text:q});m=m.substring(r+q.length);}if(m)n.push({type:h.TEXT,text:m});return n;};}f.exports=j;},null);
__d('emoteFBIDTokenizer',['EmoteTypes'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/\[\[([a-z\d\.]+)\]\]/gi;function j(k){return k.split(i).map(function(l,m){if(m%2===0){return {type:h.TEXT,text:l};}else return {type:h.EMOTE_FBID,text:'[['+l+']]',value:l};});}f.exports=j;},null);
__d('MMessagingEmoticon',['DOM','EmoteTypes','EmoticonsList','createEmoteTokenizer','emoteFBIDTokenizer','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k(j),o=f.exports={};o.htmlEmoteWithoutFBID=function(p,q){if(typeof q!='function')q=function(s){return s;};var r=n(p).map(function(s){if(s.type==i.TEXT){return q(s.text);}else if(s.type==i.EMOTE){var t=m._("{emoticonName} emoticon",[m.param('emoticonName',s.emote)]);return [h.create('span',{className:'emoticon_text'},t),h.create('span',{className:'emoticon emoticon_'+s.emote,title:s.text})];}});return h.create('span',{},r);};o.htmlEmote=function(p,q){if(typeof q!='function')q=function(s){return s;};var r=l(p).map(function(s){if(s.type==i.TEXT){return o.htmlEmoteWithoutFBID(s.text,q);}else if(s.type==i.EMOTE_FBID)return [h.create('span',{className:'emoticon_text'},s.text),h.create('img',{className:'emoticon emoticon_custom',alt:s.value,src:window.location.protocol+'//graph.facebook.com/'+encodeURIComponent(s.value)+'/picture'})];});return h.create('span',{},r);};},null);
__d("Utf16",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={decode:function(i){switch(i.length){case 1:return i.charCodeAt(0);case 2:return 65536|(i.charCodeAt(0)-55296)*1024|i.charCodeAt(1)-56320;}},encode:function(i){if(i<65536){return String.fromCharCode(i);}else return String.fromCharCode(55296+(i-65536>>10))+String.fromCharCode(56320+i%1024);}};f.exports=h;},null);
__d('SupportedEmoji',['cx','Utf16'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=new RegExp("([\u203C\u2049\u2100-\u21FF\u2300-\u27FF"+"\u2900-\u29FF\u2B00-\u2BFF\u3000-\u30FF\u3200-\u32FF]|"+"\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDEFF])([\uFE00-\uFE0F])?"),k={126980:"_4_o0",127378:"_4_o1",127385:"_4_o2",127386:"_4_o3",127489:"_4_o4",127490:"_4_o5",127514:"_4_o6",127535:"_4_o7",127539:"_4_o8",127541:"_4_o9",127542:"_4_oa",127543:"_4_ob",127544:"_4_oc",127545:"_4_od",127546:"_4_oe",127568:"_4_of",127744:"_2b_",127746:"_2c0",127747:"_4_og",127748:"_4_oh",127749:"_4_oi",127750:"_4_oj",127751:"_4_ok",127752:"_4_ol",127754:"_2c1",127769:"_2c2",127775:"_2c3",127793:"_2c4",127796:"_2c5",127797:"_2c6",127799:"_2c7",127800:"_2c8",127801:"_2c9",127802:"_2ca",127803:"_2cb",127806:"_2cc",127808:"_2cd",127809:"_2ce",127810:"_2cf",127811:"_2cg",127813:"_4_om",127814:"_4_on",127817:"_4_oo",127818:"_2ch",127822:"_2ci",127827:"_2cj",127828:"_2ck",127832:"_4_op",127833:"_4_oq",127834:"_4_or",127835:"_4_os",127836:"_4_ot",127837:"_4_ou",127838:"_4_ov",127839:"_4_ow",127841:"_4_ox",127842:"_4_oy",127843:"_4_oz",127846:"_4_o-",127847:"_4_o_",127856:"_4_p0",127857:"_4_p1",127858:"_4_p2",127859:"_4_p3",127860:"_4_p4",127861:"_4_p5",127862:"_4_p6",127864:"_2cl",127866:"_2cm",127867:"_4_p7",127872:"_4_p8",127873:"_2cn",127875:"_2co",127876:"_2cp",127877:"_2cq",127880:"_2cr",127881:"_2cs",127884:"_4_p9",127885:"_2ct",127886:"_2cu",127887:"_2cv",127888:"_2cw",127890:"_4_pa",127891:"_2cx",127905:"_4_pb",127906:"_4_pc",127908:"_4_pd",127909:"_4_pe",127910:"_4_pf",127911:"_4_pg",127912:"_4_ph",127913:"_4_pi",127915:"_4_pj",127916:"_4_pk",127917:"_4_pl",127919:"_4_pm",127921:"_4_pn",127925:"_2cy",127926:"_2cz",127927:"_4_po",127928:"_4_pp",127930:"_4_pq",127932:"_2c-",127934:"_4_pr",127935:"_4_ps",127936:"_4_pt",127937:"_4_pu",127942:"_4_pv",127944:"_4_pw",127968:"_4_px",127969:"_4_py",127970:"_4_pz",127971:"_4_p-",127973:"_4_p_",127974:"_4_q0",127975:"_4_q1",127976:"_4_q2",127977:"_4_q3",127978:"_4_q4",127979:"_4_q5",127980:"_4_q6",127981:"_4_q7",127983:"_4_q8",127984:"_4_q9",128013:"_2c_",128014:"_2d0",128017:"_2d1",128018:"_2d2",128020:"_2d3",128023:"_2d4",128024:"_2d5",128025:"_2d6",128026:"_2d7",128027:"_2d8",128031:"_2d9",128032:"_2da",128033:"_2db",128037:"_2dc",128038:"_2dd",128039:"_2de",128040:"_2df",128041:"_2dg",128043:"_2dh",128044:"_2di",128045:"_2dj",128046:"_2dk",128047:"_2dl",128048:"_2dm",128049:"_2dn",128051:"_2do",128052:"_2dp",128053:"_2dq",128054:"_491",128055:"_2dr",128056:"_2ds",128057:"_2dt",128058:"_2du",128059:"_2dv",128062:"_2dw",128064:"_2dx",128066:"_2dy",128067:"_2dz",128068:"_2d-",128069:"_2d_",128070:"_2e0",128071:"_2e1",128072:"_2e2",128073:"_2e3",128074:"_2e4",128075:"_2e5",128076:"_2e6",128077:"_2e7",128078:"_2e8",128079:"_2e9",128080:"_2ea",128081:"_4_qa",128082:"_4_qb",128084:"_4_qc",128085:"_4_qd",128087:"_4_qe",128088:"_4_qf",128089:"_4_qg",128092:"_4_qh",128095:"_4_qi",128096:"_4_qj",128097:"_4_qk",128098:"_4_ql",128102:"_2eb",128103:"_2ec",128104:"_2ed",128105:"_2ee",128107:"_2ef",128110:"_2eg",128111:"_2eh",128113:"_2ei",128114:"_2ej",128115:"_2ek",128116:"_2el",128117:"_2em",128118:"_2en",128119:"_2eo",128120:"_2ep",128123:"_2eq",128124:"_2er",128125:"_2es",128126:"_2et",128127:"_2eu",128128:"_2ev",128130:"_2ew",128131:"_2ex",128132:"_4_qm",128133:"_2ey",128136:"_4_qn",128137:"_4_qo",128138:"_4_qp",128139:"_2ez",128140:"_4_qq",128141:"_4_qr",128142:"_4_qs",128143:"_2e-",128144:"_2e_",128145:"_2f0",128146:"_4_qt",128147:"_2f1",128148:"_2f2",128150:"_2f3",128151:"_2f4",128152:"_2f5",128153:"_2f6",128154:"_2f7",128155:"_2f8",128156:"_2f9",128157:"_2fa",128158:"_4_qu",128159:"_4_qv",128160:"_4_qw",128161:"_4_qx",128162:"_2fb",128163:"_4_qy",128164:"_2fc",128166:"_2fd",128167:"_4_qz",128168:"_2fe",128169:"_2ff",128170:"_2fg",128176:"_4_q-",128178:"_4_q_",128180:"_4_r0",128181:"_4_r1",128186:"_4_r2",128187:"_2fh",128188:"_4_r3",128189:"_2fi",128190:"_2fj",128191:"_2fk",128192:"_2fl",128214:"_4_r4",128221:"_4_r5",128222:"_2fm",128224:"_2fn",128225:"_4_r6",128226:"_4_r7",128227:"_4_r8",128232:"_4_r9",128233:"_4_ra",128234:"_4_rb",128235:"_4_rc",128236:"_4_rd",128237:"_4_re",128238:"_4_rf",128241:"_2fo",128242:"_2fp",128243:"_4_rg",128244:"_4_rh",128246:"_4_ri",128247:"_4_rj",128250:"_2fq",128251:"_4_rk",128252:"_4_rl",128264:"_4_rm",128269:"_4_rn",128270:"_4_ro",128271:"_4_rp",128272:"_4_rq",128273:"_4_rr",128274:"_4_rs",128275:"_4_rt",128276:"_2fr",128286:"_4_ru",128293:"_492",128296:"_4_rv",128299:"_4_rw",128304:"_4_rx",128305:"_4_ry",128306:"_4_rz",128307:"_4_r-",128308:"_4_r_",128309:"_4_s0",128310:"_4_s1",128311:"_4_s2",128312:"_4_s3",128313:"_4_s4",128507:"_4_s5",128508:"_4_s6",128509:"_4_s7",128513:"_2fs",128514:"_2ft",128515:"_2fu",128516:"_2fv",128518:"_2fw",128521:"_2fx",128522:"_1q3y",128524:"_2fz",128525:"_2f-",128527:"_2f_",128530:"_2g0",128531:"_2g1",128532:"_2g2",128534:"_2g3",128536:"_2g4",128538:"_2g5",128540:"_2g6",128541:"_2g7",128542:"_2g8",128544:"_2g9",128545:"_2ga",128546:"_2gb",128547:"_2gc",128548:"_2gd",128549:"_2ge",128552:"_2gf",128553:"_2gg",128554:"_2gh",128555:"_2gi",128557:"_2gj",128560:"_2gk",128561:"_2gl",128562:"_2gm",128563:"_2gn",128565:"_2go",128567:"_2gp",128568:"_2gq",128569:"_2gr",128570:"_2gs",128571:"_2gt",128572:"_2gu",128573:"_2gv",128575:"_2gw",128576:"_2gx",128587:"_2gy",128588:"_2gz",128589:"_2g-",128591:"_2g_",128640:"_4_s8",128643:"_4_s9",128644:"_4_sa",128645:"_4_sb",128649:"_4_sc",128652:"_4_sd",128655:"_4_se",128657:"_4_sf",128658:"_4_sg",128659:"_4_sh",128661:"_4_si",128663:"_4_sj",128665:"_4_sk",128666:"_4_sl",128674:"_4_sm",128676:"_4_sn",128677:"_4_so",128679:"_4_sp",128684:"_4_sq",128685:"_4_sr",128690:"_4_ss",128697:"_4_st",128698:"_4_su",128699:"_4_sv",128700:"_4_sw",128701:"_4_sx",128702:"_4_sy",128704:"_4_sz",9642:"_4_s-",9643:"_4_s_",9723:"_4_t0",9724:"_4_t1",9725:"_4_t2",9726:"_4_t3",9742:"_4_t4",9757:"_2h0",9786:"_2h1",9855:"_4_t5",9888:"_4_t6",9889:"_2h2",9898:"_4_t7",9899:"_4_t8",9917:"_4_t9",9918:"_4_ta",9924:"_2h3",9940:"_4_tb",9962:"_4_tc",9970:"_4_td",9971:"_4_te",9973:"_4_tf",9978:"_4_tg",9981:"_4_th",9994:"_2h4",9995:"_2h5",9996:"_2h6",10060:"_4_ti",10062:"_4_tj",10145:"_4_tk",10175:"_4_tl",11013:"_4_tm",11014:"_4_tn",11015:"_4_to",11035:"_4_tp",11036:"_4_tq",11088:"_4_tr",11093:"_4_ts",12349:"_4_tt",8598:"_4_tu",8599:"_4_tv",8600:"_4_tw",8601:"_4_tx",9728:"_2h7",9729:"_2h8",9748:"_2h9",9749:"_2ha",9824:"_4_ty",9827:"_4_tz",9829:"_4_t-",9830:"_4_t_",9832:"_4_u0",9986:"_4_u1",9992:"_4_u2",9993:"_4_u3",10006:"_4_u4",10024:"_2hb",10035:"_4_u5",10036:"_4_u6",10067:"_4_u7",10068:"_4_u8",10069:"_4_u9",10071:"_4_ua",10084:"_2hc",10548:"_4_ub",10549:"_4_uc",12951:"_4_ud",12953:"_4_ue"},l=function(m){var n=0;while(m.length>0){var o=j.exec(m);if(!o||!o.length)return false;var p=o[1],q=o.index,r=i.decode(p),s=k[r];if(!s){n+=q+1;m=m.substr(q+1);continue;}o.index+=n;o.emoji=s;return o;}return false;};f.exports={findEmoji:l,emoji:k,_utf16Regex:j};},null);
__d('MMessagingEmoji',['DOM','MMessagingEmoticon','SupportedEmoji','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=40;f.exports={htmlEmoji:function(m,n){if(typeof n!='function')n=function(x){return x;};var o=m,p=[],q=l;while(q--){var r=j.findEmoji(o);if(!r||!r.length)break;var s=r[0],t=o.indexOf(s),u=o.substring(0,t);if(u)p.push(n(u));var v=r.emoji,w=h.create('span',{className:"_1az _1a-"+' '+v});p.push(w);o=o.substring(t+s.length);}if(o)p.push(n(o));return h.create('span',{},p);},htmlEmojiAndEmote:function(m,n){return this.htmlEmoji(m,function(o){return i.htmlEmote(o,n);});}};},null);
__d("XMessagingDeferredAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/load_deferred_attachment\/",{dest_id:{type:"String",required:true},mid:{type:"String",required:true}});},null,{});
__d('MMessagesNewMessageBlockRenderer',['ActorURI','CSS','DOM','HTML','MDynaTemplate','MItemConstants','MMessagesThreadImageRenderer','MMessageUtils','MMessagingEmoji','MRequest','XMessagingDeferredAttachmentController','cx','MOrionAttachmentBody'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=c('MOrionAttachmentBody').module,u='\xb7',v='text',w='deferred';function x(ca,da){var ea={};ea.author_name=ca.getAuthorName();ea.author_href=da.author_href;ea.message=ca.getMessage();if(da.should_parse_emoticons){var fa=p.htmlEmojiAndEmote(ea.message);ea.message='';}var ga,ha=aa(ca);if(ha===w){var ia=ba(ca);ea.deferred_attachment_id=ia;ga=l.renderToHtml('@MDeferredAttachmentMessageTemplate',ea);var ja=r.getURIBuilder().setString('dest_id',ia).setString('mid',ca.getUUID()).getURI();ja=h.create(ja,da.page_id).toString();new q(ja).setMethod('GET').send();}else ga=l.renderToHtml('@MChatMessageTemplate',ea);var ka=new k(ga).getFragment().firstChild,la=j.find(ka,'*','profile_image');j.replace(la,n.participantImage(ca.getAuthorFBID(),m.SHORT_HEIGHT));if(da.should_parse_emoticons){var ma=j.find(ka,'div','message-text');ma.appendChild(fa);}if(ca.getAuthorFBID()!==da.user){var na=y(ca.getMessageSource(),da.download_link),oa=j.find(ka,'div','action-list');j.appendContent(oa,na);}return ka;}function y(ca,da){var ea=o.getMessageSourceText(ca);if(!ea)return '';var fa='';if(z(ca,da)){fa=l.renderToHtml('@MMessageSourceTextWithLinkTemplate',{text:ea,download_href:da});}else fa=l.renderToHtml('@MMessageSourceTextTemplate',{text:ea});var ga=j.create('span',new k(fa));j.prependContent(ga,new k(' '+u+' '));return ga;}function z(ca,da){if(!(ca==='source:chat:orca'||ca==='source:titan:orca'))return false;return !!da;}function aa(ca){if(ca.getAttachmentCount())return w;return v;}function ba(ca){return 'deferred_attachment:'+ca.getUUID();}f.exports=x;},null);
__d('MMessagesNewTextMessageRenderer',['JSXDOM','MMessagingEmoji'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){return (h.div({sigil:"message-text"},l.should_parse_emoticons?i.htmlEmojiAndEmote(k.getMessage()):h.span(null,k.getMessage())));}f.exports=j;},null);
__d('MDateString',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=86400;function j(aa){return aa instanceof Date?aa:new Date(aa*1000);}function k(aa,ba,ca){aa=aa.toString();ca=ca||'0';while(aa.length<ba)aa=ca+aa;return aa;}function l(aa,ba){aa=j(aa);ba=j(ba);return aa.getFullYear()===ba.getFullYear()&&aa.getMonth()===ba.getMonth()&&aa.getDate()===ba.getDate();}function m(aa){return aa.getFullYear()===new Date().getFullYear();}function n(aa){aa=j(aa);var ba=aa.getHours(),ca=ba>=12,da=ba;if(da===0){da=12;}else if(da>12)da-=12;var ea=k(aa.getMinutes(),2);return h._("{hours}:{minutes} {ampm}",[h.param('hours',da),h.param('minutes',ea),h.param('ampm',ca?'PM':'AM')]);}function o(aa,ba){aa=aa||new Date();ba=ba||{};var ca=ba.zero_padding?2:1;return h._("{date}\/{month}\/{year}",[h.param('month',k(aa.getMonth()+1,ca)),h.param('date',k(aa.getDate(),ca)),h.param('year',(aa.getFullYear()+'').substr(-2))]);}var p=[h._("Sun"),h._("Mon"),h._("Tues"),h._("Wed"),h._("Thurs"),h._("Fri"),h._("Sat")],q=[h._("Sunday"),h._("Monday"),h._("Tuesday"),h._("Wednesday"),h._("Thursday"),h._("Friday"),h._("Saturday")],r=[h._("Jan"),h._("Feb"),h._("Mar"),h._("Apr"),h._("May"),h._("Jun"),h._("Jul"),h._("Aug"),h._("Sept"),h._("Oct"),h._("Nov"),h._("Dec")],s=[h._("January"),h._("February"),h._("March"),h._("April"),h._("May"),h._("June"),h._("July"),h._("August"),h._("September"),h._("October"),h._("November"),h._("December")];function t(aa,ba){var ca=j(aa).getDay();return ba?p[ca]:q[ca];}function u(aa,ba){var ca=j(aa).getMonth();return ba?r[ca]:s[ca];}function v(){return Date.now()/1000|0;}function w(aa,ba){if(aa==-1){return h._("Just now");}else if(aa===0)return '';var ca=v(),da=new Date(aa*1000),ea=ca-aa|0,fa=ea/60|0,ga=fa/60|0,ha=ga/24|0,ia=ha/30.4|0,ja=ha/365|0;ba=ba||{};var ka=ba.compact||false,la=ba.relative!==undefined?ba.relative:ea<=i,ma=ba.show_cur_year!==undefined?ba.show_cur_year:true;if(la){var na={year:ja,month:ia,day:ha,hr:ga,min:fa,sec:ea},oa;for(var pa in na){oa=na[pa];if(oa!==0){var qa=Math.abs(oa);if(qa==1&&!ka)switch(pa){case 'year':return h._("over a year ago");case 'month':return h._("about a month ago");case 'day':return h._("about a day ago");case 'hr':return h._("about an hour ago");case 'min':return h._("about a minute ago");case 'sec':return h._("A few seconds ago");}if(ka){switch(pa){case 'year':return h._({"*":"{number} yr"},[h.param('number',qa,[0])]);case 'month':return h._({"*":"{number} mo"},[h.param('number',qa,[0])]);case 'day':return h._({"*":"{number} d"},[h.param('number',qa,[0])]);case 'hr':return h._({"*":"{number} hr"},[h.param('number',qa,[0])]);case 'min':return h._({"*":"{number} min"},[h.param('number',qa,[0])]);case 'sec':return h._({"*":"{number} sec"},[h.param('number',qa,[0])]);}}else switch(pa){case 'year':return h._({"*":"{number} years ago"},[h.param('number',qa,[0])]);case 'month':return h._({"*":"{number} months ago"},[h.param('number',qa,[0])]);case 'day':return h._({"*":"{number} days ago"},[h.param('number',qa,[0])]);case 'hr':return h._({"*":"{number} hours ago"},[h.param('number',qa,[0])]);case 'min':return h._({"*":"{number} minutes ago"},[h.param('number',qa,[0])]);case 'sec':return h._({"*":"{number} seconds ago"},[h.param('number',qa,[0])]);}}}return h._("Just now");}else{if(ka)if(l(ca,da)){return n(da);}else if(ca-i*7<aa){return t(da,true);}else return o(da);if(l(ca,da)){return h._("Today at {time}",[h.param('time',n(da))]);}else if(l(ca-i,da)){return h._("Yesterday at {time}",[h.param('time',n(da))]);}else if(l(ca-i*2,da)||l(ca-i*3,da)){return h._("{weekday} at {time}",[h.param('weekday',t(da)),h.param('time',n(da))]);}else if(ca-i*7<aa){return h._("{month} {date}",[h.param('month',u(da,true)),h.param('date',da.getDate())]);}else if(!ma&&m(da)){return h._("{month} {date}",[h.param('month',u(da,true)),h.param('date',da.getDate())]);}else return h._("{month} {date}, {year}",[h.param('month',u(da,true)),h.param('date',da.getDate()),h.param('year',da.getFullYear())]);}}function x(aa){return h._("{month} {date}, {year}",[h.param('month',u(aa,true)),h.param('date',aa.getDate()),h.param('year',aa.getFullYear())]);}function y(aa){aa=aa||new Date();return o(aa,{zero_padding:true})+' '+n(aa);}function z(aa){var ba=3600;return Math.floor(aa/ba/1000)*ba;}f.exports={displayTime:w,displayDate:x,displayExactTime:y,roundTimestampToHour:z};},null);
__d('MMessagesReadReceiptsDOM',['DOM','HTML','MDateString','MDynaTemplate','MMessageUtils','Stratcom','$','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p='\xb7';function q(){h.scry(n('messageGroup'),'div','read-receipt').forEach(function(t){h.remove(t);});h.scry(n('messageGroup'),'span','read-receipt').forEach(function(t){var u=t.parentNode.childNodes;for(var v=0;v<u.length;v+=1)if(u[v]===t){if(v>0&&u[v-1]&&u[v-1].data&&u[v-1].data.trim()===p){h.remove(u[v-1]);}else if(v>1&&'getAttribute' in u[v-2]&&u[v-2].getAttribute('role')==='separator'){h.remove(u[v-1]);h.remove(u[v-2]);h.remove(u[v-3]);}break;}h.remove(t);});}function r(t,u,v,w){var x=h.scry(t.parentNode,'div','message-text').pop(),y=false;if(x===t)y=true;var z=y?h.create('span'):h.create('div');m.addSigil(z,'read-receipt');var aa,ba=Object.keys(v);if(Object.keys(w.users_short_names).length<=2&&ba.length==1){aa=s(v[ba[0]]);}else aa=l.getSeenByParticipantsText(ba,w.users_short_names,u.author,w.user);var ca=k.renderToHtml('@MReadReceiptTextTemplate',{text:aa});h.appendContent(z,new i(ca).getFragment().firstChild);if(y){var da=t.parentNode;while(!m.hasSigil(da,'message-xhp'))da=da.parentNode;var ea=h.find(da,'div','action-list');h.appendContent(ea,new i(' '+p+' '));h.appendContent(ea,z);}else h.appendContent(t,z);}function s(t){t=t*.001;var u=j.displayTime(t,{compact:true,relative:false});return o._("Seen {timestamp}",[o.param('timestamp',u)]);}f.exports={clearAll:q,addNew:r};},null);
__d('MP2PNUXRendererUtils',['ImmutableObject','MercuryAttachmentType','StoryAttachmentStyle','MMercuryConstants'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('MMercuryConstants').MercurySupportedShareType,l={getTransferFromAttachments:function(m){if(!m||!m.length)return;var n=m[0],o;if(this.isShareAttachment(n)){o=n.share.target;}else if(n.share_data_type===k.FB_ORION)o=n.metadata;if(o)o=new h(o);return o;},isShareAttachment:function(m){return !!(typeof m!=='string'&&m.attach_type==i.SHARE&&m.share&&m.share.style_list&&m.share.style_list.indexOf(j.ORION)>=0);}};f.exports=l;},null);
__d('MMessages',['setTimeoutAcrossTransitions','CSS','DataStore','DOM','MMessageUtils','MMessagesNewMessageBlockRenderer','MMessagesNewTextMessageRenderer','MMessagesReadReceiptsDOM','MDateString','MP2PNUXRendererUtils','MViewport','Stratcom','$','MOrionAttachmentBody'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=c('MOrionAttachmentBody').module;function v(w){this._user=w.userID;this._pageID=w.pageID;this._messageSubject=w.messageSubject;this._messageThreadID=w.messageThreadID;this._messageOtherUserFBID=w.messageOtherUserFBID;this._messageThreadFBID=w.messageThreadFBID;if(w.singleUserThread)this._typingIndicator=t('typingIndicator');this._usersProfileUri=w.usersProfileUri;this._usersShortNames=w.usersShortNames;this._parseEmoticons=w.parseEmoticons;this._downloadLink=w.downloadLink;this._orcaPromotionBoxVisible=false;}v.prototype.handleUserTyping=function(event){var w=event.getData();if(this._typingIndicator&&w.from==this._messageSubject){k.show(this._typingIndicator);clearTimeout(this._deferredHide);this._deferredHide=h((function(){if(this._typingIndicator)k.hide(this._typingIndicator);}).bind(this),4000);}};v.prototype.handleMessageReceived=function(event){var w=event.getData(),x=w.parsedPayload;if(!x||!this._payloadIsForThisThread(x)||this._alreadyHasMessage(x.getUUID()))return;if(this._typingIndicator){clearTimeout(this._deferredHide);k.hide(this._typingIndicator);}o.clearAll();var y;y=this._addNewMessage(x);if(y){i.conditionClass(y,'chatHighlight',true);r.scrollToNode(t('composerInput'));}h((function(){s.invoke('m:messages:refreshreadreceipts',null,{threadID:this._getReadReceiptThreadID()});}).bind(this),0);};v.prototype._payloadIsForThisThread=function(w){if(this._messageOtherUserFBID!==null){return this._messageOtherUserFBID===w.getOtherUserFBID();}else if(this._messageThreadFBID!==null)return this._messageThreadFBID===w.getThreadFBID();return false;};v.prototype._addNewMessage=function(w){var x=null,y=k.scry(t('messageGroup'),'div','message-xhp').pop();if(this._shouldCreateNewMessageBlock(y,w)){var z={author_href:this._usersProfileUri[w.getAuthorFBID()],page_id:this._pageID,should_parse_emoticons:this._parseEmoticons,user:this._user,download_link:this._downloadLink},aa=m(w,z),ba={name:w.getAuthorName(),attachment_count:w.getAttachmentCount(),message_source:w.getMessageSource()};j.set(aa,ba);this._setTimestamp(aa);var ca=k.scry(aa,'img','attachment-image');ca.forEach(function(fa){fa.addEventListener('load',function(){r.scrollToNode(t('composerInput'));});});var da=k.find(aa,'div','message-text');j.set(da,this._getMessageTextData(w));k.appendContent(t('messageGroup'),aa);var ea=this._createSystemNewMessageBlock(w);if(ea)k.appendContent(t('messageGroup'),ea);if(!this._orcaPromotionBoxVisible&&this._orcaPromotionBox&&this._shouldDisplayOrcaPromotionBox(w)){k.show(this._orcaPromotionBox);this._orcaPromotionBoxVisible=true;}x=aa;}else x=this._addMessageToExisting(y,w);return x;};v.prototype._shouldDisplayOrcaPromotionBox=function(w){if((w.getMessageSource()==='source:chat:orca'||w.getMessageSource()==='source:titan:orca')&&w.getAuthorFBID()!==this._user)return true;return false;};v.prototype._shouldCreateNewMessageBlock=function(w,x){if(!w)return true;var y=j.get(w);if(l.getMessageSourceText(y.message_source)!=l.getMessageSourceText(x.getMessageSource()))return true;if(y.name==x.getAuthorName()&&!y.attachment_count&&!x.getAttachmentCount())return false;return true;};v.prototype.updateReadReceipts=function(event){var w=event.getData(),x=w.threadID,y=w.readReceiptsManager;if(x!==this._getReadReceiptThreadID())return;this._readReceipts(x,y);};v.prototype._readReceipts=function(w,x){o.clearAll();var y=k.scry(t('messageGroup'),'div','message-text').reverse(),z=y.map(function(ga){var ha=j.get(ga);ha.thread_id=w;return ha;}),aa={};for(var ba=0,ca;ca=z[ba];ba++){aa[ca.author]=true;var da=x.getSeenBy(z[ba],aa);for(var ea in da)aa[ea]=true;if(Object.keys(da).length){var fa={users_short_names:this._usersShortNames,user:this._user};o.addNew(y[ba],z[ba],da,fa);}}};v.prototype._alreadyHasMessage=function(w){if(w){var x=k.scry(t('messageGroup'),'div','message-text');for(var y=0,z;z=x[y];y+=1){var aa=j.get(z);if(aa.uuid==w)return true;}}return false;};v.prototype._getMessageTextData=function(w){return {author:w.getAuthorFBID(),timestamp:w.getTimestamp(),uuid:w.getUUID()};};v.prototype._addMessageToExisting=function(w,x){var y=k.find(w,'span','message-body').parentNode,z={should_parse_emoticons:this._parseEmoticons},aa=n(x,z);j.set(aa,this._getMessageTextData(x));k.appendContent(y,aa);return aa;};v.prototype._createSystemNewMessageBlock=function(w){var x=null;if(u){var y=q.getTransferFromAttachments(w.getAttachments());if(y){var z={transactionId:y.transfer_id,senderId:y.sender.id};x=u.createNUX(z,function(){return r.scrollToNode(t('composerInput'));});}}return x;};v.prototype._setTimestamp=function(w){var x=k.find(w,'abbr','timestamp');x.setAttribute('data-meta',null);var y=Math.floor(Date.now()/1000);j.set(x,{time:y});k.setContent(x,p.displayTime(y));};v.prototype._getReadReceiptThreadID=function(){return this._messageSubject?'user:'+this._messageSubject:this._messageThreadID;};Object.assign(v.prototype,{_user:null,_deferredHide:null,_messageSubject:null,_messageThreadID:null,_messageOtherUserFBID:null,_messageThreadFBID:null,_typingIndicator:null,_usersProfileUri:null,_usersShortNames:null});f.exports=v;},null);
__d('MChat',['ChannelEventType','MMessages','Stratcom','MTouchChannelManager'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=function(m){k.initialize();var n=new i(m),o=[j.listen([h.MESSAGE,h.PAGES_MESSAGE],null,n.handleMessageReceived.bind(n)),j.listen('typ',null,n.handleUserTyping.bind(n)),j.listen('m:messages:updatereadreceipts',null,n.updateReadReceipts.bind(n))];j.listen('m:page:unload',null,function(){n=null;for(var p=0;p<o.length;p++)o[p].remove();o=[];j.removeCurrentListener();});};g.main=l;},null);
__d('MReadReceiptsClass',['Stratcom'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(){'use strict';h.listen('m:messages:refreshreadreceipts',null,this.refreshDisplayedReadReceipts.bind(this));}i.prototype.getSeenBy=function(j,k){'use strict';if(!j)return [];k=k||{};var l={},m=i._readReceipts[j.thread_id];for(var n in m)if(m[n]>j.timestamp&&n!=j.author&&!(n in k))l[n]=m[n];return l;};i.prototype.refreshDisplayedReadReceipts=function(event){'use strict';var j=event.getData();j.readReceiptsManager=this;h.invoke('m:messages:updatereadreceipts',null,j);};i.prototype.updateRoger=function(j){'use strict';var k=i._readReceipts;for(var l in j){var m=false;if(!k[l])k[l]={};for(var n in j[l]){var o=k[l][n],p=j[l][n];if(!o||p>o){k[l][n]=p;m=true;}}if(m){var q={threadID:l,readReceiptsManager:this};h.invoke('m:messages:updatereadreceipts',null,q);}}};i.prototype.handleRoger=function(event){'use strict';var j=event.getData(),k=j.tid?j.tid:'user:'+j.reader;if(k){var l={};l[k]={};l[k][j.reader]=j.time;this.updateRoger(l);}};Object.assign(i,{_readReceipts:{}});f.exports=i;},null);
__d('MReadReceipts',['MReadReceiptsClass','Stratcom'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={},k=function(l){if(!j._readReceipts){j._readReceipts=new h();i.listen('m_read_receipt',null,j._readReceipts.handleRoger.bind(j._readReceipts));}var m={},n=l.single_thread_user?'user:'+l.single_thread_user:l.thread_id;m[n]={};for(var o=0;o<l.read_receipts;o++)m[n][o]=l.read_receipts[o];j._readReceipts.updateRoger(m);};g.main=k;},null);
__d('MMessagesReplyComposer',['MMultiPhotoUploaderAttachmentState','CSS','ChannelEventType','CurrentUser','DOM','fbt','MMessagesConfig','MRequest','Stratcom','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s='m-messaging-error-message',t='m-messaging-error-resend-btn',u=1000;function v(w,x,y,z,aa){'use strict';this.form=w;this.textbox=x;this.sendButton=y;this.likeButton=z;this.userID=k.getID();this.threadID=aa;this.state={isFocused:false,isTyping:false,hasPhotos:false};this.photosState=h.getDefaultState();this.prevSendRequest=null;this.pageListeners=new q();this.pageListeners.addSubscriptions(l.listen(this.textbox,'focus',null,this.$MMessagesReplyComposer1.bind(this)),l.listen(this.textbox,'blur',null,this.$MMessagesReplyComposer2.bind(this)),l.listen(this.textbox,['keyup','keydown','change'],null,this.$MMessagesReplyComposer3.bind(this)),l.listen(this.sendButton,'click',null,this.$MMessagesReplyComposer4.bind(this)),l.listen(this.likeButton,'click',null,this.$MMessagesReplyComposer5.bind(this)),p.listen('click',[t],this.$MMessagesReplyComposer6.bind(this)),p.listen('MMultiPhotoUploader:attachments:change',null,this.$MMessagesReplyComposer7.bind(this)));p.listen('m:page:unload',null,(function(){this.pageListeners.release();p.removeCurrentListener();}).bind(this));this.$MMessagesReplyComposer8();this.$MMessagesReplyComposer9();i.removeClass(this.form,"_3ci_");}v.prototype.$MMessagesReplyComposer7=function(event){'use strict';this.photosState=event.getData();this.$MMessagesReplyComposer10('hasPhotos',this.photosState[h.UPLOADED]>0||this.photosState[h.SENDING]>0);this.$MMessagesReplyComposer9();};v.prototype.$MMessagesReplyComposer1=function(){'use strict';this.$MMessagesReplyComposer10('isFocused',true);};v.prototype.$MMessagesReplyComposer2=function(){'use strict';this.$MMessagesReplyComposer10('isFocused',false);};v.prototype.$MMessagesReplyComposer3=function(){'use strict';this.$MMessagesReplyComposer10('isTyping',this.textbox.value!=='');this.$MMessagesReplyComposer9();};v.prototype.$MMessagesReplyComposer9=function(){'use strict';var w=this.photosState[h.SENDING]===0&&(!/^\s*$/.test(this.textbox.value)||this.photosState[h.UPLOADED]>0);if(!w){this.sendButton.setAttribute('disabled',true);}else this.sendButton.removeAttribute('disabled');};v.prototype.$MMessagesReplyComposer11=function(){'use strict';this.likeButton.setAttribute('disabled',true);setTimeout((function(){this.likeButton.removeAttribute('disabled');}).bind(this),u);};v.prototype.$MMessagesReplyComposer10=function(w,x){'use strict';this.state[w]=x;this.$MMessagesReplyComposer8();};v.prototype.$MMessagesReplyComposer8=function(){'use strict';i.conditionClass(this.form,"_3ciz",this.state.isFocused||this.state.isTyping);i.conditionClass(this.form,"_3cj0",this.state.hasPhotos);};v.prototype.$MMessagesReplyComposer6=function(){'use strict';this.sendRequest(this.prevSendRequest.url,this.prevSendRequest.data);l.hide(l.find(document,'div',s));};v.prototype.$MMessagesReplyComposer5=function(event){'use strict';this.$MMessagesReplyComposer12(event,true);};v.prototype.$MMessagesReplyComposer4=function(event){'use strict';this.$MMessagesReplyComposer12(event,false);};v.prototype.$MMessagesReplyComposer12=function(event,w){'use strict';var x=this.form,y=l.convertFormToDictionary(x),z=x.action;x.reset();this.$MMessagesReplyComposer3();if(event)event.prevent();if(w)y.sticker_id=227878347358915;this.sendRequest(z,y);this.$MMessagesReplyComposer11();};v.prototype.sendRequest=function(w,x){'use strict';var y={start:function(aa){l.hide(l.find(document,'div',s));},process:function(aa){},error:function(aa){l.show(l.find(document,'div',s));},fail:function(aa){y.error(aa);},postprocess:function(aa){p.invoke('m:ajax:complete');}};this.prevSendRequest={data:x,url:w};var z=this.$MMessagesReplyComposer13(x,w,y);z.send();};v.prototype.$MMessagesReplyComposer13=function(w,x,y){'use strict';var z=l.find(document,'*','m-messaging-composer-container'),aa='async_composer',ba=new o(x);ba.addData(w);ba.setMethod('POST');if(n.msgrRegion)ba.setRequestHeader('X-MSGR-Region',n.msgrRegion);var ca=aa+'_saving',da=function(fa){i.conditionClass(z,aa,!fa);i.conditionClass(z,ca,fa);};ba.listen('start',da.bind(null,true));ba.listen('finally',da.bind(null,false));for(var ea in y)ba.listen(ea,y[ea]);return ba;};v.handleSendError=function(){'use strict';l.show(l.find(document,'div',s));};v.handleRecipientUnavailableError=function(){'use strict';alert(m._("This person isn't receiving messages from you at the moment"));};f.exports=v;},null);
__d('MSelectLink',['setTimeoutAcrossTransitions','DataStore','Stratcom','MJSEnvironment','MPageController','MRequest'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.IS_APPLE_WEBKIT_IOS&&parseInt(k.OS_VERSION,10)>=6?'blur':'change';j.listen(n,'select-link',function(o){var p=o.getNode('tag:select'),q=i.get(o.getNode('select-link')),r=q.method==='POST'?'POST':'GET';h(function(){var s=p.options[p.selectedIndex].getAttribute('value'),t=p.options[p.selectedIndex].getAttribute('title');if(t==='mrequest'){var u=new m(s);u.setMethod(r).send();}else s&&l.load(s,{replace:true,method:r});},0);});},null);