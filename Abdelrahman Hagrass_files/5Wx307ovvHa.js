/*!CK:1321069949!*//*1447737506,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["zW4W5"]); }

__d('MAnimation',['CSS','DataStore','getVendorPrefixedName','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=j('animation-duration');function m(n,o,p){var q=i.get(n);clearTimeout(q.timerEnd);delete q.timerEnd;h.conditionClass(n,o,false);h.conditionClass(n,'accelerate',true);n.style[l]=p+'ms';q.timerStart=k(h.conditionClass.bind(null,n,o,true),0);q.timerEnd=k(function(){h.conditionClass.bind(null,n,o,false);n.style[l]='';h.conditionClass(n,'accelerate',false);var r=i.get(n);clearTimeout(r.timerStart);delete r.timerStart;},p);}f.exports={animate:m};},null);
__d('MExpandablePymk',['setTimeoutAcrossTransitions','CSS','DOM','DataStore','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='m-add-friend';function n(p,q,r){var s=[],t=0;if(p){var u=j.scry(p,'div','story-wrap');for(var v=0;v<u.length;v++){var w=j.find(u[v],'a',m),x=k.get(w);s.push(x.id);var y=k.get(u[v]);if(y.sent)t++;}r.pymk_group_id=q;}if(s)r.uw=s.join(',');if(t)r.pc=t;return s;}function o(p,event,q){if(!p)return;var r=p.getElementsByClassName("_4-ck");if(r.length>0)h(function(){p.style.height="";},800);var s=function(aa){return function(){i.conditionClass(aa,"_4-cl",true);};},t=function(aa){return function(){i.conditionClass(aa,"_4-ck",false);};},u=j.scry(p,'div','story-wrap'),v=0;for(var w=0;w<u.length;w++){var x=k.get(u[w]);if(x.transitionIn){k.set(u[w],{transitionIn:false});h(s(u[w]),800);h(t(u[w]),1200);}else if(x.sent){var y=u[w];if(r.length>0)p.style.height=(p.offsetHeight-r.length*r[0].offsetHeight).toString()+'px';i.conditionClass(y,"_4-cn",true);if(q){i.conditionClass(y,"_4-co",true);i.conditionClass(y,"_4-cp",false);}h(function(){j.remove(y);},600);v++;}}if(v<u.length){var z=event.getNode('story-wrap');k.set(z,{sent:true});if(q){i.conditionClass(z,"_4-cp",true);i.conditionClass(z,"_4-co",false);}}}f.exports={getExtraArgs:n,animateExpansion:o};},null);
__d('MFriendingState',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports={REQUEST_SENT:'m:friending-state:request-sent',REQUEST_CANCELED:'m:friending-state:request-canceled',UNFRIENDED:'m:friending-state:unfriended'};},null);
__d('MAddFriend',['DOM','DataStore','Stratcom','MAnimation','MExpandablePymk','MFriendingState','MPageCache','MPageControllerPath','MRequest','MRequestTypes','MURI','MFriendingActionError','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u='m-add-friend',v='m-cancel-request',w='m-unfriend-request',x='m-unfollow-request',y='m-follow-request',z='check',aa='friends',ba='add_friend_pymk_chain_placeholder',ca='/a/mobile/friends/add_friend.php',da='/a/friendrequest/cancel/index.php',ea='/a/friends/remove',fa='/a/subscriptions/remove',ga='/a/subscriptions/add',ha=86;function ia(sa){var ta=sa.querySelector('.touched_hide');ta&&k.animate(ta,"_4-ic",500);}function ja(){var sa=o.getRequestPath();n.removeCachedPage(sa);n.clearCachedIUIResponses(sa);}function ka(event){var sa=event.getNode(u),ta=i.get(sa),ua=event.getNode('m-add-friend-secondary'),va=i.get(ua),wa=ta.pymk_group_id||'pymk_suggestions_box',xa=event.getNode('id:'+wa),ya=document.getElementById(ba);i.set(ua,{one_click_adding:true,one_click_cancel_event:null});ja();var za={id:ta.id,hf:ta.hf,sc:ta.sc,so:ta.so,pl:ta.pl,at:ta.at,et:ta.et,ed:ta.ed,fref:ta.fref};if(ta.floc)za.floc=ta.floc;if(ta.frefs)za.frefs=ta.frefs;if(ta.el)za.el=ta.el;var ab=l.getExtraArgs(xa,wa,za),bb=h.find(ua,'*',z),cb=h.find(ua,'div','m-add-friend-flyout'),db=new r(ca);if(ta.searchlog)db.addQueryData(ta.searchlog);var eb=new r(sa.href).getQueryData()._ft_;if(eb)db.addQueryData({_ft_:eb});var fb=new p(db.toString()).setType(q.DEPENDENT);fb.setData(za);var gb=function(){h.show(bb);i.get(ua).bounce&&ia(bb);j.listen('friending_state_change',null,la.bind(event,za.id,s.SEND_OUTGOING_REQUEST_ERROR));j.invoke(m.REQUEST_SENT,null,{event:event,userid:za.id});};fb.listen('start',function(){h.hide(cb);gb();});fb.listen('postprocess',function(hb){if(va.one_click_adding){i.set(ua,{one_click_adding:false});if(va.one_click_cancel_event)na(va.one_click_cancel_event);}if(ab)l.animateExpansion(xa,event,ya);});fb.send();event.kill();}function la(sa,ta,event){var ua=event.getData();if(ua.userid!=sa)return;if(ua.error!=ta)return;var va=this.getNode('m-add-friend-secondary');if(ua.error===s.SEND_OUTGOING_REQUEST_ERROR){var wa=h.find(va,'*',z),xa=h.find(va,'div','m-add-friend-flyout');h.show(xa);h.hide(wa);j.invoke(s.SEND_OUTGOING_REQUEST_ERROR,null,{event:this});}else if(ua.error===s.CANCEL_OUTGOING_REQUEST_ERROR){var ya=h.find(va,'a','m-cancel-request'),za=h.find(va,'div','m-add-friend-flyout');h.show(ya);h.hide(za);j.invoke(s.CANCEL_OUTGOING_REQUEST_ERROR,null,{event:this});}j.removeCurrentListener();}function ma(sa){var ta=i.get(sa.getNode(w)),event=ta.flyoutEvent,ua=event.getNode('undoable-action');if(!ua)ua=event.getNode('m-add-friend-secondary');var va=h.scry(ua,'*',aa)[0],wa=h.find(ua,'div','m-add-friend-flyout'),xa=new r(ea),ya=new p(xa);ya.setData({friend_id:ta.id,noReload:true,unref:ta.unfriend_ref});ya.listen('start',function(){h.hide(va);h.show(wa);j.invoke(m.UNFRIENDED,null,{event:event});});ya.send();event.kill();}function na(event){var sa=i.get(event.getNode(v)),ta=event.getNode('undoable-action');if(!ta)ta=event.getNode('m-add-friend-secondary');if(!ta)ta=sa.parentNode;var ua=h.scry(ta,'*',z)[0],va=h.find(ta,'*','load'),wa=h.find(ta,'div','m-add-friend-flyout'),xa=event.getNode('m-add-friend-secondary'),ya=xa?i.get(xa):null;if(ya&&ya.one_click_adding){i.set(xa,{one_click_cancel_event:event});h.hide(ua);h.show(va);return;}var za=function(){h.show(wa);j.invoke(m.REQUEST_CANCELED,null,{event:event,userid:sa.id});},ab=new r(da),bb=new p(ab);bb.setData({subject_id:sa.id,ref_param:sa.ref_param,floc:sa.floc,frefs:sa.frefs});j.listen('friending_state_change',null,la.bind(event,sa.id,s.CANCEL_OUTGOING_REQUEST_ERROR));bb.listen('start',function(){h.hide(ua);h.show(va);});bb.listen('finally',function(){h.hide(va);za();var cb=event.getNode('story-wrap');if(cb)i.set(cb,{sent:false});});bb.send();event.kill();}function oa(event){var sa=event.getNode(x),ta=i.get(sa),ua=new r(fa),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:false});event.kill();}function pa(event){var sa=event.getNode(y),ta=i.get(sa),ua=new r(ga),va=new p(ua);va.setData({subject_id:ta.id,forceredirect:false,location:ha});va.send();event=ta.flyoutEvent;var wa=event.getNode('popup-action-trigger');i.set(wa,{is_following:true});event.kill();}var qa=false,ra=function(sa){if(qa)return;qa=true;j.listen('click',u,ka);j.listen('click',v,na);j.listen('click',w,ma);if(typeof sa!=='undefined'&&sa){j.listen('click',x,oa);j.listen('click',y,pa);}};f.exports={main:ra};},null);
__d('MAddFriendNew',['MFriendingState','DOM','Stratcom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k='m-add-friend-flyout',l='m-cancel-request';function m(n,o,p){'use strict';this.unit=p;this.userid=o;j.listen(h.REQUEST_SENT,null,this.onFriendRequestSent.bind(this));j.listen(h.REQUEST_CANCELED,null,this.onFriendRequestCanceled.bind(this));}m.prototype.onFriendRequestCanceled=function(event){'use strict';var n=event.getData();if(!n||n.userid!==this.userid)return;var o=i.scry(this.unit,'*',k)[0],p=i.scry(this.unit,'*',l)[0];i.show(o);i.hide(p);};m.prototype.onFriendRequestSent=function(event){'use strict';var n=event.getData();if(!n||n.userid!==this.userid)return;var o=i.scry(this.unit,'*',k)[0],p=i.scry(this.unit,'*',l)[0];i.hide(o);i.show(p);};f.exports=m;},null);
__d('MFriendDynamicSubtitle',['DOM','MAnimation','MFriendingState','MFriendingActionError','Stratcom','cx','MParent'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='undoable-action',p='m-add-friend-request-sent',q='m-friend-request-canceled',r='m-friend-unfriended',s='m-add-friend-source-replaceable',t='m-friend-request-highlight-notice';function u(v,w){'use strict';this.$MFriendDynamicSubtitle1=v;this.$MFriendDynamicSubtitle2=w;this.$MFriendDynamicSubtitle3=n.bySigil(v,o);this.$MFriendDynamicSubtitle4=[l.listen([k.SEND_OUTGOING_REQUEST_ERROR,k.CANCEL_OUTGOING_REQUEST_ERROR,j.REQUEST_SENT,j.REQUEST_CANCELED,j.UNFRIENDED],null,this.$MFriendDynamicSubtitle5.bind(this)),l.listen('m:page:unload',null,this.$MFriendDynamicSubtitle6.bind(this)),l.listen('friending_state_change',null,this.$MFriendDynamicSubtitle7.bind(this))];}u.prototype.$MFriendDynamicSubtitle7=function(v){'use strict';var w=v.getData();if(!w||!w.userid||w.userid!=this.$MFriendDynamicSubtitle2)return;if(!w.error)return;this.$MFriendDynamicSubtitle8(w.error);};u.prototype.$MFriendDynamicSubtitle5=function(v){'use strict';var w=v.getData();if(!w||!w.userid||w.userid!=this.$MFriendDynamicSubtitle2)return;var x=v.getType();this.$MFriendDynamicSubtitle8(x);};u.prototype.$MFriendDynamicSubtitle8=function(v){'use strict';this.$MFriendDynamicSubtitle9();if(v===j.REQUEST_SENT||v===k.CANCEL_OUTGOING_REQUEST_ERROR){this.$MFriendDynamicSubtitle10(p);}else if(v===j.REQUEST_CANCELED){this.$MFriendDynamicSubtitle10(q);}else if(v===j.UNFRIENDED){this.$MFriendDynamicSubtitle10(r);}else if(v===k.SEND_OUTGOING_REQUEST_ERROR)this.$MFriendDynamicSubtitle10(s);this.$MFriendDynamicSubtitle11();};u.prototype.$MFriendDynamicSubtitle9=function(){'use strict';this.$MFriendDynamicSubtitle12(p);this.$MFriendDynamicSubtitle12(s);this.$MFriendDynamicSubtitle12(q);this.$MFriendDynamicSubtitle12(r);};u.prototype.$MFriendDynamicSubtitle12=function(v){'use strict';var w=h.scry(this.$MFriendDynamicSubtitle3,'*',v)[0];w&&h.hide(w);};u.prototype.$MFriendDynamicSubtitle10=function(v){'use strict';var w=h.scry(this.$MFriendDynamicSubtitle3,'*',v)[0];w&&h.show(w);};u.prototype.$MFriendDynamicSubtitle11=function(){'use strict';var v=h.scry(this.$MFriendDynamicSubtitle3,'*',t)[0];if(v)i.animate(v,"_4z0z",4000);};u.prototype.$MFriendDynamicSubtitle6=function(){'use strict';for(var v=0;v<this.$MFriendDynamicSubtitle4.length;v++)this.$MFriendDynamicSubtitle4[v].remove();};f.exports=u;},null);
__d('MFriendsActionBubble',['DataStore','DOM','Stratcom','MURI'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l='m-unfriend-request',m='/friendlists/edit',n='manage-friend-list',o='m-follow-request',p='m-unfollow-request';function q(r){'use strict';this.$MFriendsActionBubble1=r;this.$MFriendsActionBubble2=null;}q.prototype.enable=function(){'use strict';this.$MFriendsActionBubble2=[j.listen('click','are-friends-popup',this.$MFriendsActionBubble3.bind(this)),j.listen('click',n,this.$MFriendsActionBubble4.bind(this))];};q.prototype.$MFriendsActionBubble3=function(r){'use strict';var s=this.$MFriendsActionBubble1.getContentRoot(),t=r.getNode('popup-action-trigger'),u=i.scry(s,'*',l)[0];this.$MFriendsActionBubble5(t,u,r);var v=i.scry(s,'*',n)[0];this.$MFriendsActionBubble5(t,v,r);this.$MFriendsActionBubble6(t,s,r);};q.prototype.$MFriendsActionBubble6=function(r,s,t){'use strict';var u=h.get(r).is_following;if(u===null)return;var v=i.scry(s,'*',p)[0];this.$MFriendsActionBubble5(r,v,t);var w=i.scry(s,'*',o)[0];this.$MFriendsActionBubble5(r,w,t);if(u){i.show(v);i.hide(w);}else{i.show(w);i.hide(v);}};q.prototype.$MFriendsActionBubble5=function(r,s,t){'use strict';if(!r||!s)return;var u=h.get(r);u.flyoutEvent=t;h.set(s,u);};q.prototype.$MFriendsActionBubble7=function(r,event){'use strict';if(window.FW_ENABLED||!window.APP_ENABLED){event.kill();window.location.href=r.toString();}else j.invoke('go',null,{uri:r});};q.prototype.$MFriendsActionBubble4=function(event){'use strict';var r=h.get(event.getNode(n)),s=new k(m).setQueryData({subject_id:r.id,ref_param:r.manage_list_ref});this.$MFriendsActionBubble7(s,event);};q.prototype.disable=function(){'use strict';while(this.$MFriendsActionBubble2.length)this.$MFriendsActionBubble2.pop().remove();};f.exports=q;},null);
__d("XFeedEgoLoadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/load\/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},service_id:{type:"String",required:true},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null,{});
__d('MSwipeInfiniteScrollerLoadMore',['DataStore','MRequest','MRequestTypes','MURI','DOM','cx','Parent','XFeedEgoLoadController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=-45,q=200;function r(t){var u=l.scry(t,'*','m-infinite-swipe-loading')[0];if(!u)return;var v=h.get(u);if(v.processing)return;h.set(u,{processing:true});if(v.use_uri){new i(new k(v.uri).toString()).setType(j.DEPENDENT).send();return;}var w=[],x=t.children,y,z;for(var aa=0;aa<x.length;aa++){if(aa===0)z=x[aa].getAttribute('data-service');var ba=x[aa].getAttribute('data-ft');if(!ba)continue;if(aa===0)y=JSON.parse(ba);var ca=JSON.parse(ba).ego_id;w.push(ca);}var da=o.getURIBuilder().setString('loading_id',u.id).setIntVector('ids',w).setString('service_id',z||"pymk").setString('location',"inline_feed").setInt('qid',y.qid).setInt('mf_story_key',y.mf_story_key).getURI(),ea=new i(new k(da).toString()).setType(j.DEPENDENT),fa=function(){var ga=n.byClass(u,"scrollArea");s(ga.id);h.set(u,{processing:false});};ea.listen('done',fa.bind(this));ea.send();}function s(t){var u=document.getElementById(t);if(!u)return;var v=h.get(u);if(!v||!v.scrollArea)return;var w=v.scrollArea;if(w.getAutomaticPaging()){w.reflow('auto');}else{var x=l.find(u,'*','scroll-area-body').children,y=[p];for(var z=1;z<x.length;z++)y[z]=y[z-1]+q;v.scrollArea.reflow(y);}}f.exports={maybeLoadMore:r,reflow:s};},null);
__d("XEgoHideLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/xout\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},service_id:{type:"String",required:true}});},null,{});
__d("XFeedEgoImpressionLoggingController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ego\/feed\/logging\/impression\/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}});},null,{});
__d('MSwipeInfiniteScroller',['CSS','DOM','Stratcom','MSwipeInfiniteScrollerLoadMore','XEgoHideLoggingController','MFriendingState','MScrollAreaHelper','DataStore','cx','XFeedEgoImpressionLoggingController','AsyncSignal','MRequest'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=3,u={},v={};function w(ba){var ca=ba.getData().event;if(!ca.getNode('m-swipe-pymk-item')&&!ca.getNode('m-swipe-pysf-item'))return;var da=ca.getTarget(),ea=o.get(da);ea._delayTimer&&clearTimeout(ea._delayTimer);ea._delayTimer=setTimeout(function(){if(ea.scrollArea===undefined)ea.scrollArea=n.findScrollArea(da);ea.scrollArea&&ea.scrollArea.scrollByPages(1);},1000);ea._touchstartListener&&ea._touchstartListener.remove();ea._touchstartListener=j.listen('touchstart',null,function(fa){clearTimeout(ea._delayTimer);delete ea._delayTimer;ea._touchstartListener.remove();delete ea._touchstartListener;});}function x(event){var ba=event.getData(),ca=ba.scrollarea;z(ca,ba.container);}var y=function(ba){var ca=JSON.parse(ba.getAttribute('data-ft'));if(!ca)return;var da=ca.ego_id,ea=ca.qid,fa=ca.mf_story_key,ga=(ea+fa).toString();if(!da||u[ga]&&u[ga][da])return;var ha=q.getURIBuilder().setInt('ego_id',da).setInt('qid',ea).setInt('mf_story_key',fa).getURI();new r(ha,{}).send();if(!u[ga])u[ga]={};u[ga][da]=true;};function z(ba,ca){var da=ba.getScrollPageIndex()+1,ea=ba.getScrollPageCount(),fa=ba.getScrollPageIndex();if(da+t>=ea)k.maybeLoadMore(ca);var ga=ba.getChildAtPageIndex(0),ha=JSON.parse(ga.getAttribute('data-ft'));if(!ha)return;var ia=ha.qid,ja=ha.mf_story_key,ka=0,la=(ia+ja).toString();if(v[la])ka=v[la];for(var ma=ka;ma<=fa;ma++)y(ba.getChildAtPageIndex(ma));v[la]=Math.max(ka,fa+1);}function aa(event){var ba=event.getNode('m-swipe-pymk-item'),ca='PYMK';if(!ba){ba=event.getNode('m-swipe-pysf-item');ca='PYSF';}if(!ba){ba=event.getNode('m-swipe-pymi-item');ca='PYMI';}if(!ba)return;var da=n.findScrollArea(ba);if(!da)return;var ea=JSON.parse(ba.getAttribute('data-ft'));if(ea&&ea.ego_id){var fa=l.getURIBuilder().setInt('ego_id',ea.ego_id).setInt('qid',ea.qid).setInt('mf_story_key',ea.mf_story_key).setString('service_id',ca).getURI();new s(fa).send();}h.addClass(ba,"_3m57");setTimeout(function(){i.remove(ba);k.reflow(da._element.id);z(da,da._content);},500);var ga=da.getScrollPageIndex()+1,ha=da.getChildAtPageIndex(ga);y(ha);}j.listen('MScrollArea:scrollend','infiniteScroller',x);j.listen(m.REQUEST_SENT,null,w);j.listen('click','m-swipe-xout',aa);g.logImpressionForElement=y;},null);
__d('MLayerHideOnScroll',['Stratcom','MViewport'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=5;function k(l){'use strict';this.$MLayerHideOnScroll1=null;this.$MLayerHideOnScroll2=null;this.$MLayerHideOnScroll3=null;this.$MLayerHideOnScroll4=l;this.$MLayerHideOnScroll5=null;}k.prototype.enable=function(){'use strict';this.$MLayerHideOnScroll1=[this.$MLayerHideOnScroll4.addListener('show',this.$MLayerHideOnScroll6.bind(this)),this.$MLayerHideOnScroll4.addListener('hide',this.$MLayerHideOnScroll7.bind(this))];if(this.$MLayerHideOnScroll4.isShown())this.$MLayerHideOnScroll6();};k.prototype.disable=function(){'use strict';this.$MLayerHideOnScroll7();while(this.$MLayerHideOnScroll1.length)this.$MLayerHideOnScroll1.pop().remove();this.$MLayerHideOnScroll1=null;};k.prototype.$MLayerHideOnScroll7=function(){'use strict';this.$MLayerHideOnScroll3&&this.$MLayerHideOnScroll3.remove();this.$MLayerHideOnScroll2&&this.$MLayerHideOnScroll2.remove();this.$MLayerHideOnScroll2=this.$MLayerHideOnScroll3=null;};k.prototype.$MLayerHideOnScroll6=function(){'use strict';this.$MLayerHideOnScroll5=i.getScrollTop();this.$MLayerHideOnScroll2=h.listen('touchstart',null,(function(){this.$MLayerHideOnScroll5=i.getScrollTop();}).bind(this));this.$MLayerHideOnScroll3=h.listen('touchmove',null,(function(){var l=i.getScrollTop();if(Math.abs(this.$MLayerHideOnScroll5-l)>=j){this.$MLayerHideOnScroll4.hide();return false;}}).bind(this));};f.exports=k;},null);
__d('MLoadTimeOutBanner',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=document.getElementById(i);if(j)j.style.display='inherit';}g.init=function(i,j){setTimeout(h.bind(null,i),j);};},null);